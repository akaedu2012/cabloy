(()=>{var t={690:(t,e,n)=>{"use strict";n.d(e,{Z:()=>Q});var a=n(233);function r(t,e,n,a,r,o,i){try{var s=t[o](i),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(a,r)}const o={methods:{_onActionClaim:function(){var t,e=this;return(t=regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._ensureClaimed();case 2:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(a,o){var i=t.apply(e,n);function s(t){r(i,a,o,s,u,"next",t)}function u(t){r(i,a,o,s,u,"throw",t)}s(void 0)}))})()}}};function i(t,e,n,a,r,o,i){try{var s=t[o](i),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(a,r)}const s={methods:{_onActionViewAtom:function(){var t,e=this;return(t=regeneratorRuntime.mark((function t(){var n,a,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.$props.ctx,t.next=3,e._ensureClaimed(!0);case 3:if(e.task._viewAtomData){t.next=8;break}return t.next=6,n.$api.post("/a/flowtask/task/viewAtom",{flowTaskId:e.flowTaskId});case 6:a=t.sent,e.$set(e.task,"_viewAtomData",a);case 8:r="/a/flowtask/flowTaskAtom?flowTaskId=".concat(e.flowTaskId,"&mode=view"),n.$view.navigate(r,{context:{params:{flowLayoutManager:e.flowLayoutManager,task:e.task,data:e.task._viewAtomData}}});case 10:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function s(t){i(o,a,r,s,u,"next",t)}function u(t){i(o,a,r,s,u,"throw",t)}s(void 0)}))})()}}};function u(t,e,n,a,r,o,i){try{var s=t[o](i),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(a,r)}const c={methods:{_onActionAppendHandleRemark:function(){var t,e=this;return(t=regeneratorRuntime.mark((function t(){var n,a,r,o,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.$props.ctx,a=e.$data,r=a.task,o=a.flowTaskId,t.next=4,n.$view.dialog.prompt(e.$text("Please specify the handle remark"));case 4:if(i=t.sent){t.next=7;break}return t.abrupt("return");case 7:return t.next=9,n.$api.post("/a/flowtask/task/appendHandleRemark",{flowTaskId:o,handle:{remark:i}});case 9:r.handleRemark=i;case 10:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function i(t){u(o,a,r,i,s,"next",t)}function s(t){u(o,a,r,i,s,"throw",t)}i(void 0)}))})()}}};function l(t,e,n,a,r,o,i){try{var s=t[o](i),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(a,r)}const f={methods:{_onActionAssigneesConfirmation:function(){var t,e=this;return(t=regeneratorRuntime.mark((function t(){var n,a,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.$props.ctx,t.next=3,n.$api.post("/a/flowtask/task/assignees",{flowTaskId:e.flowTaskId});case 3:a=t.sent,r={context:{params:{flowTaskId:e.flowTaskId,assignees:a},callback:function(t){200===t&&(e.flowLayoutManager.base_emitAtomActionSave(),e.flowLayoutManager.base_loadData())}}},"/a/flowtask/flowTaskAtom"===n.$pageRoute.path&&(r.target="_self",r.reloadCurrent=!0),o="/a/flowtask/flowTaskAction/assigneesConfirmation?flowTaskId=".concat(e.flowTaskId),n.$view.navigate(o,r);case 8:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function i(t){l(o,a,r,i,s,"next",t)}function s(t){l(o,a,r,i,s,"throw",t)}i(void 0)}))})()}}};function d(t,e,n,a,r,o,i){try{var s=t[o](i),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(a,r)}const m={methods:{_onActionCancelFlow:function(){var t,e=this;return(t=regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.$props.ctx,t.next=3,e._ensureClaimed();case 3:n.$refs.actionCancelFlow.open({flowLayoutManager:e.flowLayoutManager,flowTaskId:e.flowTaskId});case 4:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function i(t){d(o,a,r,i,s,"next",t)}function s(t){d(o,a,r,i,s,"throw",t)}i(void 0)}))})()}}};function h(t,e,n,a,r,o,i){try{var s=t[o](i),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(a,r)}const p={methods:{_onActionHandleTask:function(){var t,e=this;return(t=regeneratorRuntime.mark((function t(){var n,a,r,o,i,s,u,c,l,f;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.$props,a=n.ctx,r=n.action,o=e.$data,i=o.flowLayoutManager,s=o.task,u=o.flowTaskId,t.next=4,e._ensureClaimed();case 4:if(void 0!==s._editAtomData){t.next=9;break}return t.next=7,a.$api.post("/a/flowtask/task/editAtom",{flowTaskId:u});case 7:c=t.sent,e.$set(s,"_editAtomData",c);case 9:if(s._editAtomData){t.next=12;break}return a.$refs.actionHandleTask.open({flowLayoutManager:i,flowTaskId:u,action:r,callback:null}),t.abrupt("return");case 12:l={context:{params:{flowLayoutManager:i,task:s,data:s._editAtomData,action:r}}},"/a/flowtask/flowTaskAtom"===a.$pageRoute.path&&(l.target="_self",l.reloadCurrent=!0),f="/a/flowtask/flowTaskAtom?flowTaskId=".concat(u,"&mode=edit"),a.$view.navigate(f,l);case 16:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function i(t){h(o,a,r,i,s,"next",t)}function s(t){h(o,a,r,i,s,"throw",t)}i(void 0)}))})()}}};function b(t,e,n,a,r,o,i){try{var s=t[o](i),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(a,r)}const v={methods:{_onActionRecall:function(){var t,e=this;return(t=regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.$props.ctx,t.next=3,n.$view.dialog.confirm(n.$text("RecallPrompt"));case 3:return t.next=5,n.$api.post("/a/flowtask/task/recall",{flowTaskId:e.flowTaskId});case 5:return e.flowLayoutManager.base_emitAtomActionSave(),t.next=8,e.flowLayoutManager.base_loadData();case 8:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function i(t){b(o,a,r,i,s,"next",t)}function s(t){b(o,a,r,i,s,"throw",t)}i(void 0)}))})()}}};function g(t,e,n,a,r,o,i){try{var s=t[o](i),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(a,r)}function y(t){return function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function i(t){g(o,a,r,i,s,"next",t)}function s(t){g(o,a,r,i,s,"throw",t)}i(void 0)}))}}const w={methods:{_onActionForward:function(){var t=this;return y(regeneratorRuntime.mark((function e(){var n,a,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.$props.ctx,e.next=3,t._ensureClaimed();case 3:a={context:{params:{flowTaskId:t.flowTaskId},callback:function(e){200===e&&(t.flowLayoutManager.base_emitAtomActionSave(),t.flowLayoutManager.base_loadData())}}},"/a/flowtask/flowTaskAtom"===n.$pageRoute.path&&(a.target="_self",a.reloadCurrent=!0),r="/a/flowtask/flowTaskAction/forward?flowTaskId=".concat(t.flowTaskId),n.$view.navigate(r,a);case 7:case"end":return e.stop()}}),e)})))()},_onActionForwardRecall:function(){var t=this;return y(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.$props.ctx,e.next=3,n.$view.dialog.confirm(n.$text("ForwardRecallPrompt"));case 3:return e.next=5,n.$api.post("/a/flowtask/task/forwardRecall",{flowTaskId:t.flowTaskId});case 5:return t.flowLayoutManager.base_emitAtomActionSave(),e.next=8,t.flowLayoutManager.base_loadData();case 8:case"end":return e.stop()}}),e)})))()}}};function k(t,e,n,a,r,o,i){try{var s=t[o](i),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(a,r)}function _(t){return function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function i(t){k(o,a,r,i,s,"next",t)}function s(t){k(o,a,r,i,s,"throw",t)}i(void 0)}))}}const x={methods:{_onActionSubstitute:function(){var t=this;return _(regeneratorRuntime.mark((function e(){var n,a,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.$props.ctx,e.next=3,t._ensureClaimed();case 3:a={context:{params:{flowTaskId:t.flowTaskId},callback:function(e){200===e&&(t.flowLayoutManager.base_emitAtomActionSave(),t.flowLayoutManager.base_loadData())}}},"/a/flowtask/flowTaskAtom"===n.$pageRoute.path&&(a.target="_self",a.reloadCurrent=!0),r="/a/flowtask/flowTaskAction/substitute?flowTaskId=".concat(t.flowTaskId),n.$view.navigate(r,a);case 7:case"end":return e.stop()}}),e)})))()},_onActionSubstituteRecall:function(){var t=this;return _(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.$props.ctx,e.next=3,n.$view.dialog.confirm(n.$text("SubstituteRecallPrompt"));case 3:return e.next=5,n.$api.post("/a/flowtask/task/substituteRecall",{flowTaskId:t.flowTaskId});case 5:return t.flowLayoutManager.base_emitAtomActionSave(),e.next=8,t.flowLayoutManager.base_loadData();case 8:case"end":return e.stop()}}),e)})))()}}};function T(t,e,n,a,r,o,i){try{var s=t[o](i),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(a,r)}function C(t){return function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function i(t){T(o,a,r,i,s,"next",t)}function s(t){T(o,a,r,i,s,"throw",t)}i(void 0)}))}}const $={meta:{global:!1},mixins:[n.n(a)().prototype.$meta.module.get("a-base").options.mixins.ebActionBase,o,s,c,f,m,p,v,w,x],data:function(){return{flowLayoutManager:null,task:null,flowTaskId:0}},created:function(){this.init()},methods:{init:function(){this.flowLayoutManager=this.item.flowLayoutManager,this.task=this.item.task,this.flowTaskId=this.task.flowTaskId},onAction:function(){var t=this;return C(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("claim"!==(n=t.action).name){e.next=7;break}return e.next=4,t._onActionClaim();case 4:case 10:case 16:case 22:case 28:case 34:case 40:case 46:case 52:case 58:case 64:return e.abrupt("return",e.sent);case 7:if("viewAtom"!==n.name){e.next=13;break}return e.next=10,t._onActionViewAtom();case 13:if("assigneesConfirmation"!==n.name){e.next=19;break}return e.next=16,t._onActionAssigneesConfirmation();case 19:if("cancelFlow"!==n.name){e.next=25;break}return e.next=22,t._onActionCancelFlow();case 25:if("handleTask"!==n.name){e.next=31;break}return e.next=28,t._onActionHandleTask();case 31:if("recall"!==n.name){e.next=37;break}return e.next=34,t._onActionRecall();case 37:if("appendHandleRemark"!==n.name){e.next=43;break}return e.next=40,t._onActionAppendHandleRemark();case 43:if("forward"!==n.name){e.next=49;break}return e.next=46,t._onActionForward();case 49:if("forwardRecall"!==n.name){e.next=55;break}return e.next=52,t._onActionForwardRecall();case 55:if("substitute"!==n.name){e.next=61;break}return e.next=58,t._onActionSubstitute();case 61:if("substituteRecall"!==n.name){e.next=65;break}return e.next=64,t._onActionSubstituteRecall();case 65:case"end":return e.stop()}}),e)})))()},_ensureClaimed:function(t){var e=this;return C(regeneratorRuntime.mark((function n(){var a,r,o,i,s,u,c,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=e.$props.ctx,r=e.$data,o=r.flowLayoutManager,i=r.task,s=r.flowTaskId,!i.timeClaimed){n.next=4;break}return n.abrupt("return");case 4:if(u=i._actions&&i._actions.find((function(t){return"claim"===t.name})),c=u&&u.options&&u.options.bidding,!t||!c){n.next=8;break}return n.abrupt("return");case 8:return n.next=10,a.$api.post("/a/flowtask/task/claim",{flowTaskId:s});case 10:if(l=n.sent,i.timeClaimed=l.timeClaimed,!c){n.next=15;break}return n.next=15,o.base_loadData();case 15:case"end":return n.stop()}}),n)})))()}}};function I(t,e,n,a,r,o,i){try{var s=t[o](i),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(a,r)}function A(t){return function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function i(t){I(o,a,r,i,s,"next",t)}function s(t){I(o,a,r,i,s,"throw",t)}i(void 0)}))}}const S={meta:{global:!1},props:{layoutManager:{type:Object},layoutConfig:{type:Object}},data:function(){return{items:[]}},created:function(){this.init()},beforeDestroy:function(){this.layoutManager.layout_clearInstance(this)},methods:{init:function(){var t=this;return A(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.layoutManager.layout_setInstance(t);case 2:case"end":return e.stop()}}),e)})))()},onPageRefresh:function(t){this.$refs.loadMore.reload(t)},onPageInfinite:function(){this.$refs.loadMore.loadMore()},onPageClear:function(){this.$refs.loadMore.clear()},onLoadClear:function(t){this.items=[],t()},onLoadMore:function(t){var e=this;return A(regeneratorRuntime.mark((function n(){var a,r,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=t.index,(r=e.layoutManager.base_prepareSelectParams()).options.page={index:a},n.next=5,e.$api.post("/a/flow/flow/select",r);case 5:return o=n.sent,e.items=e.items.concat(o.list),n.abrupt("return",o);case 8:case"end":return n.stop()}}),n)})))()},getItems:function(){return this.items},_renderLoadMore:function(){return(0,this.$createElement)("eb-load-more",{ref:"loadMore",props:{onLoadClear:this.onLoadClear,onLoadMore:this.onLoadMore},attrs:{autoInit:!0}})}},render:function(){var t=arguments[0];return t("div",[this.layoutManager.layout_renderBlock({blockName:"items"}),this._renderLoadMore()])}},L={meta:{global:!1},props:{layoutManager:{type:Object},blockConfig:{type:Object}},data:function(){return{}},created:function(){},methods:{},render:function(){var t=arguments[0];return t("f7-nav-right")}};function P(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return R(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?R(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,r=function(){};return{s:r,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){s=!0,o=t},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function R(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}const M={meta:{global:!1},props:{layoutManager:{type:Object},layout:{type:Object},blockConfig:{type:Object}},data:function(){return{}},mounted:function(){},beforeDestroy:function(){},methods:{onItemClick:function(t,e){var n="/a/flowtask/flow?flowId=".concat(e.flowId);this.$view.navigate(n)},_getItemMetaMedia:function(t){var e=t._meta&&t._meta.media||t.avatar||this.$meta.config.modules["a-base"].user.avatar.default;return this.$meta.util.combineImageUrl(e,24)},_getItemMetaMediaLabel:function(t){return t._meta&&t._meta.mediaLabel||t.userName},_getItemMetaSummary:function(t){return t._meta&&t._meta.summary||""},_getItemMetaFlags:function(t){var e=[];return t.flowNodeNameCurrentLocale&&e.push(t.flowNodeNameCurrentLocale),t.flowRemarkLocale&&e.push(t.flowRemarkLocale),e},_renderListItem:function(t){var e,n=this,a=this.$createElement,r=a("div",{slot:"media"},[a("img",{class:"avatar avatar24",attrs:{src:this._getItemMetaMedia(t)}})]),o=a("div",{slot:"root-start",class:"header"},[a("div",{class:"mediaLabel"},[a("span",[this._getItemMetaMediaLabel(t)])]),a("div",{class:"date"},[a("span",[this.$meta.util.formatDateTimeRelative(t.timeEnd||t.updatedAt)])])]),i=a("div",{slot:"title",class:"title"},[a("div",[t.flowName])]),s=a("div",{slot:"root-end",class:"summary"},[this._getItemMetaSummary(t)]),u=[],c=P(this._getItemMetaFlags(t));try{for(c.s();!(e=c.n()).done;){var l=e.value;u.push(a("f7-badge",{key:l},[l]))}}catch(t){c.e(t)}finally{c.f()}var f=a("div",{slot:"after",class:"after"},[u]);return a("eb-list-item",{class:"item",key:t.flowId,attrs:{link:"#"},props:{onPerform:function(e){return n.onItemClick(e,t)}}},[r,o,i,s,f])},_renderList:function(){var t,e=this.$createElement,n=[],a=P(this.layout.items);try{for(a.s();!(t=a.n()).done;){var r=t.value;n.push(this._renderListItem(r))}}catch(t){a.e(t)}finally{a.f()}return e("f7-list",[n])}},render:function(){var t=arguments[0];return t("div",[this._renderList()])}};function F(t,e,n,a,r,o,i){try{var s=t[o](i),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(a,r)}function N(t){return function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function i(t){F(o,a,r,i,s,"next",t)}function s(t){F(o,a,r,i,s,"throw",t)}i(void 0)}))}}const O={meta:{global:!1},props:{layoutManager:{type:Object},layoutConfig:{type:Object}},data:function(){return{items:[]}},created:function(){this.init()},beforeDestroy:function(){this.layoutManager.layout_clearInstance(this)},methods:{init:function(){var t=this;return N(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.layoutManager.layout_setInstance(t);case 2:case"end":return e.stop()}}),e)})))()},onPageRefresh:function(t){this.$refs.loadMore.reload(t)},onPageInfinite:function(){this.$refs.loadMore.loadMore()},onPageClear:function(){this.$refs.loadMore.clear()},onLoadClear:function(t){this.items=[],t()},onLoadMore:function(t){var e=this;return N(regeneratorRuntime.mark((function n(){var a,r,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=t.index,(r=e.layoutManager.base_prepareSelectParams()).options.page={index:a},n.next=5,e.$api.post("/a/flowtask/task/select",r);case 5:return o=n.sent,e.items=e.items.concat(o.list),n.abrupt("return",o);case 8:case"end":return n.stop()}}),n)})))()},getItems:function(){return this.items},_renderLoadMore:function(){return(0,this.$createElement)("eb-load-more",{ref:"loadMore",props:{onLoadClear:this.onLoadClear,onLoadMore:this.onLoadMore},attrs:{autoInit:!0}})}},render:function(){var t=arguments[0];return t("div",[this.layoutManager.layout_renderBlock({blockName:"items"}),this._renderLoadMore()])}},D={meta:{global:!1},props:{layoutManager:{type:Object},blockConfig:{type:Object}},data:function(){return{}},created:function(){},methods:{},render:function(){var t=arguments[0];return t("f7-nav-right")}};function j(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return E(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?E(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,r=function(){};return{s:r,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){s=!0,o=t},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function E(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}const B={meta:{global:!1},props:{layoutManager:{type:Object},layout:{type:Object},blockConfig:{type:Object}},data:function(){return{}},mounted:function(){},beforeDestroy:function(){},methods:{onItemClick:function(t,e){var n="/a/flowtask/flow?flowId=".concat(e.flowId,"&flowTaskId=").concat(e.flowTaskId);this.$view.navigate(n)},_getItemMetaMedia:function(t){var e=t._meta&&t._meta.media||t.flowUserAvatar||this.$meta.config.modules["a-base"].user.avatar.default;return this.$meta.util.combineImageUrl(e,24)},_getItemMetaMediaLabel:function(t){return t._meta&&t._meta.mediaLabel||t.flowUserName},_getItemMetaSummary:function(t){return this._getHandleRemark(t)||""},_getItemMetaFlags:function(t){var e=[];return(t.flowTaskIdForwardFrom||t.flowTaskIdForwardTo)&&e.push(this.$text("ForwardAbbr")),(t.flowTaskIdSubstituteFrom||t.flowTaskIdSubstituteTo)&&e.push(this.$text("SubstituteAbbr")),t.flowNodeNameLocale&&e.push(t.flowNodeNameLocale),e},_getHandleRemark:function(t){return t.handleRemarkLocale?t.handleRemarkLocale:0===t.flowTaskStatus&&1===t.specificFlag?this.$text("AssigneesConfirmationPrompt"):0===t.flowTaskStatus&&2===t.specificFlag?this.$text("Recall Available"):void 0},_renderListItem:function(t){var e,n=this,a=this.$createElement,r=a("div",{slot:"media"},[a("img",{class:"avatar avatar24",attrs:{src:this._getItemMetaMedia(t)}})]),o=a("div",{slot:"root-start",class:"header"},[a("div",{class:"mediaLabel"},[a("span",[this._getItemMetaMediaLabel(t)])]),a("div",{class:"date"},[a("span",[this.$meta.util.formatDateTimeRelative(t.timeHandled||t.updatedAt)])])]),i=a("div",{slot:"title",class:"title"},[a("div",[t.flowName])]),s=a("div",{slot:"root-end",class:"summary"},[this._getItemMetaSummary(t)]),u=[],c=j(this._getItemMetaFlags(t));try{for(c.s();!(e=c.n()).done;){var l=e.value;u.push(a("f7-badge",{key:l},[l]))}}catch(t){c.e(t)}finally{c.f()}var f=a("div",{slot:"after",class:"after"},[u]);return a("eb-list-item",{class:"item",key:t.flowTaskId,attrs:{link:"#"},props:{onPerform:function(e){return n.onItemClick(e,t)}}},[r,o,i,s,f])},_renderList:function(){var t,e=this.$createElement,n=[],a=j(this.layout.items);try{for(a.s();!(t=a.n()).done;){var r=t.value;n.push(this._renderListItem(r))}}catch(t){a.e(t)}finally{a.f()}return e("f7-list",[n])}},render:function(){var t=arguments[0];return t("div",[this._renderList()])}};function H(t,e,n,a,r,o,i){try{var s=t[o](i),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(a,r)}const U={meta:{global:!1},props:{layoutManager:{type:Object},layoutConfig:{type:Object}},data:function(){return{}},created:function(){this.init()},beforeDestroy:function(){this.layoutManager.layout_clearInstance(this)},methods:{init:function(){var t,e=this;return(t=regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.layoutManager.subnavbar_policyDefault(),t.next=3,e.layoutManager.layout_setInstance(e);case 3:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function i(t){H(o,a,r,i,s,"next",t)}function s(t){H(o,a,r,i,s,"throw",t)}i(void 0)}))})()}},render:function(){var t=arguments[0];return t("div",[this.layoutManager.layout_renderBlock({blockName:"main"})])}},Z={meta:{global:!1},props:{layoutManager:{type:Object},blockConfig:{type:Object}},data:function(){return{}},created:function(){},methods:{_renderNormal:function(){return(0,this.$createElement)("f7-nav-right",[this.layoutManager.info_renderFlowStatus()])},_renderFull:function(){return(0,this.$createElement)("f7-nav-right",{class:"atom-item-title-info-container"},[this.layoutManager.info_renderActionsLeft(),this.layoutManager.info_renderActionsRight(),this.layoutManager.info_renderFlowStatus()])}},render:function(){return this.layoutManager.subnavbar.render&&!this.layoutManager.subnavbar.enable?this._renderFull():this._renderNormal()}},z={meta:{global:!1},props:{layoutManager:{type:Object},blockConfig:{type:Object}},data:function(){return{}},methods:{_renderActionsLeft:function(){return(0,this.$createElement)("div",{class:"actions-block actions-block-left"},[this.layoutManager.info_renderActionsLeft()])},_renderActionsRight:function(){return(0,this.$createElement)("div",{class:"actions-block actions-block-right"},[this.layoutManager.info_renderActionsRight()])}},render:function(){var t=arguments[0];return t("f7-subnavbar",[t("div",{class:"atom-item-subnavbar-container"},[this._renderActionsLeft(),this._renderActionsRight()])])}},K={meta:{global:!1},props:{layoutManager:{type:Object},layout:{type:Object},blockConfig:{type:Object}},data:function(){return{}},render:function(){var t=arguments[0],e=this.layoutManager.timeline_render(),n=this.layoutManager.actions_renderActionComponents();return t("div",[e,n])}};function V(t,e,n,a,r,o,i){try{var s=t[o](i),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(a,r)}const q={meta:{global:!1},props:{layoutManager:{type:Object},layoutConfig:{type:Object}},data:function(){return{}},created:function(){this.init()},beforeDestroy:function(){this.layoutManager.layout_clearInstance(this)},methods:{init:function(){var t,e=this;return(t=regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.layoutManager.layout_setInstance(e);case 2:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function i(t){V(o,a,r,i,s,"next",t)}function s(t){V(o,a,r,i,s,"throw",t)}i(void 0)}))})()}},render:function(){var t=arguments[0];return t("div",[this.layoutManager.layout_renderBlock({blockName:"main"})])}},G={meta:{global:!1},props:{layoutManager:{type:Object},blockConfig:{type:Object}},data:function(){return{}},created:function(){},methods:{},render:function(){var t=arguments[0];return t("f7-nav-right",[this.layoutManager.actions_render()])}},J={meta:{global:!1},props:{layoutManager:{type:Object},layout:{type:Object},blockConfig:{type:Object}},data:function(){return{}},render:function(){var t=arguments[0],e=this.layoutManager.validate_render(),n=this.layoutManager.actions_renderActionComponents();return t("div",[e,n])}};var W=n(862),X=n(119);const Q={action:$,flowListLayoutList:S,flowListLayoutBlockListTitle:L,flowListLayoutBlockListItems:M,flowTaskListLayoutList:O,flowTaskListLayoutBlockListTitle:D,flowTaskListLayoutBlockListItems:B,flowLayoutDefault:U,flowLayoutBlockDefaultTitle:Z,flowLayoutBlockDefaultSubnavbar:z,flowLayoutBlockDefaultMain:K,atomLayoutDefault:q,atomLayoutBlockDefaultTitle:G,atomLayoutBlockDefaultMain:J,flowTaskTab:W.Z,flowTab:X.Z}},509:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var a=[{name:"default"}],r=[{name:"default"}],o=[{name:"default"}],i=[{name:"default"}];const s={flowTask:{actions:{claim:{basic:!0,title:"TaskActionTitleClaim",actionModule:"a-flowtask",actionComponent:"action",icon:{f7:"::mark-as-unread"}},viewAtom:{basic:!0,title:"View",actionModule:"a-flowtask",actionComponent:"action",icon:{f7:"::visibility"}},handleTask:{basic:!0,title:"Handle",actionModule:"a-flowtask",actionComponent:"action",icon:{f7:"::play-arrow"}},cancelFlow:{basic:!0,title:"Cancel Flow",actionModule:"a-flowtask",actionComponent:"action",icon:{f7:"::stop"}},assigneesConfirmation:{basic:!0,title:"Confirmation",actionModule:"a-flowtask",actionComponent:"action",icon:{f7:"::group"}},recall:{basic:!0,title:"Recall",actionModule:"a-flowtask",actionComponent:"action",icon:{f7:"::undo"}},appendHandleRemark:{basic:!1,title:"AppendHandleRemark",actionModule:"a-flowtask",actionComponent:"action",icon:{f7:"::info-circle"}},forward:{basic:!1,title:"TaskActionTitleForward",actionModule:"a-flowtask",actionComponent:"action"},forwardRecall:{basic:!1,title:"TaskActionTitleForwardRecall",actionModule:"a-flowtask",actionComponent:"action",icon:{f7:"::undo"}},substitute:{basic:!1,title:"TaskActionTitleSubstitute",actionModule:"a-flowtask",actionComponent:"action"},substituteRecall:{basic:!1,title:"TaskActionTitleSubstituteRecall",actionModule:"a-flowtask",actionComponent:"action",icon:{f7:"::undo"}}},render:{list:{info:{layout:{viewSize:{small:{name:"list"},medium:{name:"list"},large:{name:"list"}}}},layouts:{base:{blocks:{title:{component:{module:"a-flowtask",name:"flowTaskListLayoutBlockListTitle"}}}},list:{title:"LayoutList",component:{module:"a-flowtask",name:"flowTaskListLayoutList"},blocks:{items:{component:{module:"a-flowtask",name:"flowTaskListLayoutBlockListItems"}}}}}},atom:{info:{layout:{viewSize:{view:{small:a,medium:a,large:a},edit:{small:r,medium:r,large:r}}},attachment:!0,comment:!0},layouts:{base:{blocks:{title:{component:{module:"a-flowtask",name:"atomLayoutBlockDefaultTitle"}},main:{component:{module:"a-flowtask",name:"atomLayoutBlockDefaultMain"}}}},default:{title:"LayoutDefault",component:{module:"a-flowtask",name:"atomLayoutDefault"},blocks:{}}}}}},flow:{render:{list:{info:{layout:{viewSize:{small:{name:"list"},medium:{name:"list"},large:{name:"list"}}}},layouts:{base:{blocks:{title:{component:{module:"a-flowtask",name:"flowListLayoutBlockListTitle"}}}},list:{title:"LayoutList",component:{module:"a-flowtask",name:"flowListLayoutList"},blocks:{items:{component:{module:"a-flowtask",name:"flowListLayoutBlockListItems"}}}}}},item:{info:{layout:{viewSize:{view:{small:o,medium:o,large:o},edit:{small:i,medium:i,large:i}}},attachment:!0,comment:!0},layouts:{base:{blocks:{title:{component:{module:"a-flowtask",name:"flowLayoutBlockDefaultTitle"}},subnavbar:{component:{module:"a-flowtask",name:"flowLayoutBlockDefaultSubnavbar"}},main:{component:{module:"a-flowtask",name:"flowLayoutBlockDefaultMain"}}}},default:{title:"LayoutDefault",component:{module:"a-flowtask",name:"flowLayoutDefault"},blocks:{}}}}}},flowTaskHandleStatuses:{1:{color:"teal",text:"Passed"},2:{color:"gray",text:"Rejected"},3:{color:"gray",text:"Cancelled"},4:{color:"teal",text:"FlowTaskHandleStatusForwarded"},5:{color:"teal",text:"FlowTaskHandleStatusSubstituted"}},flowNodeHandleStatuses:{1:{color:"teal",text:"End"},2:{color:"gray",text:"Rejected"},3:{color:"gray",text:"Cancelled"}},flowHandleStatuses:{1:{color:"teal",text:"End"},2:{color:"gray",text:"Rejected"},3:{color:"gray",text:"Cancelled"}}}},933:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});const a={FlowTitle:"Flow",DraftingAgain:"Drafting Again",ConfirmationAllowAppend:"Allow Append Assignees",AssigneesConfirmationPrompt:"Please confirm the assignees",CancelFlowPrompt:"Are you sure to cancel this flow?",TaskPassPrompt:"Are you sure to pass this task?",TaskRejectPrompt:"Are you sure to reject this task?",RecallPrompt:"Are you sure to recall this task?",ForwardRecallPrompt:"Are you sure to recall the forwarded task?",SubstituteRecallPrompt:"Are you sure to recall the substituted task?",FlowOrTaskNotExists:"Work Flow or Task does not exist",AppendHandleRemark:"Append Handle Remark",TaskActionTitleClaim:"Claim",TaskActionTitleForward:"Forward",TaskActionTitleSubstitute:"Substitute",TaskActionTitleForwardRecall:"Recall Forward",TaskActionTitleSubstituteRecall:"Recall Substitute",FlowTaskHandleStatusForwarded:"Forwarded",FlowTaskHandleStatusSubstituted:"Substituted",ForwardAbbr:"FWD",SubstituteAbbr:"SUBS"}},978:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});const a={FlowTitle:"流程",Task:"任务",End:"结束",Current:"当前",Drafting:"起草",Pass:"通过",Recall:"撤回",Reject:"驳回",Passed:"已通过",Rejected:"已驳回",Cancelled:"已取消",View:"查看",Handle:"处理",Outdated:"已过期",Remark:"说明",Submitted:"已提交",Assignee:"参与人",Assignees:"参与人",Confirmation:"确认",Bidding:"竞标",DraftingAgain:"再次起草",ConfirmationAllowAppend:"允许添加参与人",AssigneesConfirmationPrompt:"请确认参与人",CancelFlowPrompt:"您确认要取消本流程吗？",TaskPassPrompt:"您确认要通过本任务吗？",TaskRejectPrompt:"您确认要驳回本任务吗？",RecallPrompt:"您确认要撤回本任务吗？",ForwardRecallPrompt:"您确认要撤回转办的任务吗？",SubstituteRecallPrompt:"您确认要撤回代办的任务吗？",FlowOrTaskNotExists:"流程或任务已经不存在",AppendHandleRemark:"追加处理意见",TaskActionTitleClaim:"签收",TaskActionTitleForward:"转办",TaskActionTitleSubstitute:"代办",TaskActionTitleForwardRecall:"撤回转办",TaskActionTitleSubstituteRecall:"撤回代办",FlowTaskHandleStatusForwarded:"已转办",FlowTaskHandleStatusSubstituted:"已代办",ForwardAbbr:"转办",SubstituteAbbr:"代办","Assignees Confirmation":"参与人确认","Cancel Flow":"取消流程","Recall Available":"可撤回","Show Assignees":"显示参与人","Completion Condition":"完成条件","Confirmation Assignees":"确认参与人","Rejected Node":"驳回节点","Allow Pass Task":"允许通过任务","Allow Reject Task":"允许驳回任务","Allow Cancel Flow":"允许取消流程","Allow Recall":"允许撤回","Allow Forward":"允许转办","Allow Substitute":"允许代办","User Task Options":"用户任务选项","Condition Expression":"条件表达式","Flow Chart":"流程图","Please specify the handle remark":"请指定处理意见"}},137:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});const a={"en-us":n(933).Z,"zh-cn":n(978).Z}},644:(t,e,n)=>{"use strict";function a(t){return n(142)("./".concat(t,".vue")).default}function r(t){return n(990)("./".concat(t,".jsx")).default}n.d(e,{Z:()=>o});const o=[{path:"flow",component:r("flow")},{path:"flow/list",component:r("flowList")},{path:"flowTask/list",component:r("flowTaskList")},{path:"flowTaskAtom",component:r("flowTaskAtom")},{path:"flowTask/tabs",component:a("flowTaskTabs")},{path:"flow/tabs",component:a("flowTabs")},{path:"flowTaskAction/assigneesConfirmation",component:r("flowTaskAction/assigneesConfirmation")},{path:"flowTaskAction/forward",component:r("flowTaskAction/forward")},{path:"flowTaskAction/substitute",component:r("flowTaskAction/substitute")}]},81:(t,e,n)=>{"use strict";function a(t){return{state:{},getters:{},mutations:{},actions:{}}}n.d(e,{Z:()=>a})},609:(t,e,n)=>{"use strict";function a(t,e,n,a,r,o,i){try{var s=t[o](i),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(a,r)}function r(t,e,n,a,r,o,i){try{var s=t[o](i),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(a,r)}function o(t){return function(){var e=this,n=arguments;return new Promise((function(a,o){var i=t.apply(e,n);function s(t){r(i,a,o,s,u,"next",t)}function u(t){r(i,a,o,s,u,"throw",t)}s(void 0)}))}}function i(t,e,n,a,r,o,i){try{var s=t[o](i),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(a,r)}n.d(e,{Z:()=>s});const s={mixins:[{data:function(){return{base:{ready:!1,configFlowBase:null,config:null,layoutConfig:null}}},computed:{base_user:function(){return this.$store.state.auth.user.op}},created:function(){},methods:{base_init:function(){var t,e=this;return(t=regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("a/base/getLayoutConfig","a-basefront");case 2:e.base.layoutConfig=t.sent;case 3:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function s(t){a(i,r,o,s,u,"next",t)}function u(t){a(i,r,o,s,u,"throw",t)}s(void 0)}))})()},base_getLayoutConfigKeyCurrent:function(){return"flow.".concat(null,".render.list.layout.current.").concat(this.$view.size)},base_prepareSelectOptions:function(){var t={where:{}};return t.layout=this.layout.current,t.orders=[["a.updatedAt","desc"]],this.container.options&&(t=this.$utils.extend({},t,this.container.options)),t},base_prepareSelectParams:function(){return{options:this.base_prepareSelectOptions()}},base_getItems:function(){return this.layout.instance?this.layout.instance.getItems():[]}}},{data:function(){return{}},methods:{page_onRefresh:function(t){t&&t(),this.layout.instance&&this.layout.instance.onPageRefresh(!0)},page_onInfinite:function(){this.layout.instance&&this.layout.instance.onPageInfinite()},page_onClear:function(){this.layout.instance&&this.layout.instance.onPageClear()},page_getTitle:function(){var t=this.container.options&&this.container.options.mode;return"mine"===t?"".concat(this.$text("Flow"),": ").concat(this.$text("Initiateds")):"others"===t?"".concat(this.$text("Flow"),": ").concat(this.$text("Participateds")):"history"===t?"".concat(this.$text("Flow"),": ").concat(this.$text("Ends")):this.$text("Flow")},page_getSubtitle:function(){return""}}},{data:function(){return{layout:{current:null,config:null,instance:null}}},created:function(){},methods:{layout_setInstance:function(t){var e=this;return o(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.layout.instance=t;case 1:case"end":return n.stop()}}),n)})))()},layout_clearInstance:function(t){this.layout.instance===t&&(this.layout.instance=null)},layout_prepareConfig:function(){var t=this;return o(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.base.configFlowBase=t.$meta.config.modules["a-flowtask"].flow,t.base.config=t.base.configFlowBase,t.layout_prepareConfigLayout();case 3:case"end":return e.stop()}}),e)})))()},layout_getDefault:function(){var t=this.base_getLayoutConfigKeyCurrent(),e=this.base.layoutConfig[t];if(e)return e;var n=this.$meta.util.getProperty(this.base.config,"render.list.info.layout.viewSize")[this.$view.size];return Array.isArray(n)||(n=[n]),n[0].name},layout_prepareConfigLayout:function(t){this.layout.current=t||this.container.layout||this.layout_getDefault();var e=this.$meta.util.getProperty(this.base.config,"render.list.layouts.".concat(this.layout.current));if(!e)return!1;var n=this.$meta.util.getProperty(this.base.config,"render.list.layouts.base");return this.layout.config=n?this.$meta.util.extend({},n,e):e,!0},layout_switchLayout:function(t){var e=this;return o(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t!==e.layout.current){n.next=2;break}return n.abrupt("return",!0);case 2:if(e.layout.current=null,e.layout.config=null,e.layout_prepareConfigLayout(t)){n.next=6;break}return n.abrupt("return",!1);case 6:return a=e.base_getLayoutConfigKeyCurrent(),e.$store.commit("a/base/setLayoutConfigKey",{module:"a-basefront",key:a,value:t}),n.abrupt("return",!0);case 9:case"end":return n.stop()}}),n)})))()},layout_getComponentOptions:function(){return{props:{layoutManager:this,layoutConfig:this.layout.config}}},layout_renderComponent:function(){var t=this.$createElement;return this.base.ready?t("eb-component",{attrs:{module:this.layout.config.component.module,name:this.layout.config.component.name,options:this.layout_getComponentOptions()}}):null},layout_getBlockComponentOptions:function(t){var e=t.blockConfig;return{props:{layoutManager:this,layout:this.layout.instance,blockConfig:e}}},layout_renderBlock:function(t){var e=t.blockName,n=this.$createElement;if(!this.base.ready)return null;if(!this.layout.instance)return null;var a=this.layout.config.blocks[e];return a?n("eb-component",{attrs:{module:a.component.module,name:a.component.name,options:this.layout_getBlockComponentOptions({blockConfig:a})}}):null},layout_renderLayout:function(){return(0,this.$createElement)("div",[this.layout_renderComponent()])}}}],data:function(){return{}},created:function(){this.index_init()},beforeDestroy:function(){this.$emit("layoutManager:destroy")},methods:{index_init:function(){var t,e=this;return(t=regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.base_init();case 2:return t.next=4,e.layout_prepareConfig();case 4:e.base.ready=!0;case 5:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function s(t){i(o,a,r,s,u,"next",t)}function u(t){i(o,a,r,s,u,"throw",t)}s(void 0)}))})()}}}},46:(t,e,n)=>{"use strict";function a(t,e,n,a,r,o,i){try{var s=t[o](i),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(a,r)}function r(t,e,n,a,r,o,i){try{var s=t[o](i),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(a,r)}function o(t){return function(){var e=this,n=arguments;return new Promise((function(a,o){var i=t.apply(e,n);function s(t){r(i,a,o,s,u,"next",t)}function u(t){r(i,a,o,s,u,"throw",t)}s(void 0)}))}}function i(t,e,n,a,r,o,i){try{var s=t[o](i),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(a,r)}n.d(e,{Z:()=>s});const s={mixins:[{data:function(){return{base:{ready:!1,configFlowBase:null,config:null,layoutConfig:null}}},computed:{base_user:function(){return this.$store.state.auth.user.op}},created:function(){},methods:{base_init:function(){var t,e=this;return(t=regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("a/base/getLayoutConfig","a-basefront");case 2:e.base.layoutConfig=t.sent;case 3:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function s(t){a(i,r,o,s,u,"next",t)}function u(t){a(i,r,o,s,u,"throw",t)}s(void 0)}))})()},base_getLayoutConfigKeyCurrent:function(){return"flowTask.".concat(null,".render.list.layout.current.").concat(this.$view.size)},base_prepareSelectOptions:function(){var t={where:{}};return t.layout=this.layout.current,t.orders=[["a.updatedAt","desc"]],this.container.options&&(t=this.$utils.extend({},t,this.container.options)),t},base_prepareSelectParams:function(){return{options:this.base_prepareSelectOptions()}},base_getItems:function(){return this.layout.instance?this.layout.instance.getItems():[]}}},{data:function(){return{}},methods:{page_onRefresh:function(t){t&&t(),this.layout.instance&&this.layout.instance.onPageRefresh(!0)},page_onInfinite:function(){this.layout.instance&&this.layout.instance.onPageInfinite()},page_onClear:function(){this.layout.instance&&this.layout.instance.onPageClear()},page_getTitle:function(){var t=this.container.options&&this.container.options.mode;return"claimings"===t?"".concat(this.$text("Task"),": ").concat(this.$text("Claimings")):"handlings"===t?"".concat(this.$text("Task"),": ").concat(this.$text("Handlings")):"completeds"===t?"".concat(this.$text("Task"),": ").concat(this.$text("Completeds")):this.$text("Task")},page_getSubtitle:function(){return""}}},{data:function(){return{layout:{current:null,config:null,instance:null}}},created:function(){},methods:{layout_setInstance:function(t){var e=this;return o(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.layout.instance=t;case 1:case"end":return n.stop()}}),n)})))()},layout_clearInstance:function(t){this.layout.instance===t&&(this.layout.instance=null)},layout_prepareConfig:function(){var t=this;return o(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.base.configFlowBase=t.$meta.config.modules["a-flowtask"].flowTask,t.base.config=t.base.configFlowBase,t.layout_prepareConfigLayout();case 3:case"end":return e.stop()}}),e)})))()},layout_getDefault:function(){var t=this.base_getLayoutConfigKeyCurrent(),e=this.base.layoutConfig[t];if(e)return e;var n=this.$meta.util.getProperty(this.base.config,"render.list.info.layout.viewSize")[this.$view.size];return Array.isArray(n)||(n=[n]),n[0].name},layout_prepareConfigLayout:function(t){this.layout.current=t||this.container.layout||this.layout_getDefault();var e=this.$meta.util.getProperty(this.base.config,"render.list.layouts.".concat(this.layout.current));if(!e)return!1;var n=this.$meta.util.getProperty(this.base.config,"render.list.layouts.base");return this.layout.config=n?this.$meta.util.extend({},n,e):e,!0},layout_switchLayout:function(t){var e=this;return o(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t!==e.layout.current){n.next=2;break}return n.abrupt("return",!0);case 2:if(e.layout.current=null,e.layout.config=null,e.layout_prepareConfigLayout(t)){n.next=6;break}return n.abrupt("return",!1);case 6:return a=e.base_getLayoutConfigKeyCurrent(),e.$store.commit("a/base/setLayoutConfigKey",{module:"a-basefront",key:a,value:t}),n.abrupt("return",!0);case 9:case"end":return n.stop()}}),n)})))()},layout_getComponentOptions:function(){return{props:{layoutManager:this,layoutConfig:this.layout.config}}},layout_renderComponent:function(){var t=this.$createElement;return this.base.ready?t("eb-component",{attrs:{module:this.layout.config.component.module,name:this.layout.config.component.name,options:this.layout_getComponentOptions()}}):null},layout_getBlockComponentOptions:function(t){var e=t.blockConfig;return{props:{layoutManager:this,layout:this.layout.instance,blockConfig:e}}},layout_renderBlock:function(t){var e=t.blockName,n=this.$createElement;if(!this.base.ready)return null;if(!this.layout.instance)return null;var a=this.layout.config.blocks[e];return a?n("eb-component",{attrs:{module:a.component.module,name:a.component.name,options:this.layout_getBlockComponentOptions({blockConfig:a})}}):null},layout_renderLayout:function(){return(0,this.$createElement)("div",[this.layout_renderComponent()])}}}],data:function(){return{}},created:function(){this.index_init()},beforeDestroy:function(){this.$emit("layoutManager:destroy")},methods:{index_init:function(){var t,e=this;return(t=regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.base_init();case 2:return t.next=4,e.layout_prepareConfig();case 4:e.base.ready=!0;case 5:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function s(t){i(o,a,r,s,u,"next",t)}function u(t){i(o,a,r,s,u,"throw",t)}s(void 0)}))})()}}}},957:(t,e,n)=>{"use strict";function a(t,e,n,a,r,o,i){try{var s=t[o](i),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(a,r)}n.d(e,{Z:()=>r});const r={data:function(){return{flowLayoutManager:null,flowTaskId:0,remark:"",pathThis:null}},created:function(){this.pathThis=this.$f7route.path},methods:{onFormSubmit:function(){this.$refs.buttonSubmit.onClick()},onSubmit:function(){var t,e=this;return(t=regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$view.dialog.confirm(e.$text("CancelFlowPrompt"));case 2:return t.next=4,e.$api.post("/a/flowtask/task/cancelFlow",{flowTaskId:e.flowTaskId,handle:{remark:e.remark}});case 4:return e.flowLayoutManager.base_emitAtomActionSave(),t.next=7,e.flowLayoutManager.base_loadData();case 7:e.$refs.sheet.f7Sheet.close(!1),"/a/flowtask/flowTaskAtom"===e.pathThis&&e.$f7router.back();case 9:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function s(t){a(i,r,o,s,u,"next",t)}function u(t){a(i,r,o,s,u,"throw",t)}s(void 0)}))})()},open:function(t){var e=t.flowLayoutManager,n=t.flowTaskId;this.flowLayoutManager=e,this.flowTaskId=n,this.$refs.sheet.f7Sheet.open()}},render:function(){var t=this,e=arguments[0];return e("f7-sheet",{ref:"sheet",attrs:{fill:!0}},[e("f7-toolbar",[e("div",{class:"left"}),e("div",{class:"right"},[e("eb-link",{ref:"buttonSubmit",props:{onPerform:function(e){return t.onSubmit(e)}}},[this.$text("Cancel Flow")])])]),e("f7-page-content",[e("eb-list",{attrs:{form:!0,"inline-labels":!0,"no-hairlines-md":!0},on:{submit:function(e){return t.onFormSubmit(e)}}},[e("eb-list-input",{attrs:{label:this.$text("Remark"),type:"text","clear-button":!0,placeholder:this.$text("Remark")},model:{value:t.remark,callback:function(e){t.remark=e}}})])])])}}},801:(t,e,n)=>{"use strict";function a(t,e,n,a,r,o,i){try{var s=t[o](i),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(a,r)}function r(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function s(t){a(i,r,o,s,u,"next",t)}function u(t){a(i,r,o,s,u,"throw",t)}s(void 0)}))}}n.d(e,{Z:()=>o});const o={data:function(){return{atomLayoutManager:null,flowLayoutManager:null,flowTaskId:0,action:null,remark:"",callback:null,pathThis:null}},created:function(){this.pathThis=this.$f7route.path},beforeDestroy:function(){this.atomLayoutManager=null,this.flowLayoutManager=null,this.callback=null},methods:{onFormSubmit:function(){},onSubmit:function(t,e){var n=this;return r(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.$view.dialog.confirm(n.$text(1===e?"TaskPassPrompt":"TaskRejectPrompt"));case 2:if(n.$refs.sheet.f7Sheet.close(!1),a={status:e,remark:n.remark},!n.callback){t.next=8;break}return t.next=7,n.callback({handle:a});case 7:case 10:return t.abrupt("return",t.sent);case 8:return t.next=10,n._submit({handle:a,formAtom:null});case 11:case"end":return t.stop()}}),t)})))()},_submit:function(t){var e=this;return r(regeneratorRuntime.mark((function n(){var a,r,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=t.handle,r=t.formAtom,o={flowTaskId:e.flowTaskId},a&&(o.handle=a),r&&(o.formAtom=r),n.next=6,e.$api.post("/a/flowtask/task/complete",o);case 6:return e.flowLayoutManager.base_emitAtomActionSave(),n.next=9,e.flowLayoutManager.base_loadData();case 9:e.atomLayoutManager&&e.atomLayoutManager.page_setDirty(!1),a&&"/a/flowtask/flowTaskAtom"===e.pathThis&&(e.flowLayoutManager.base_checkAssigneesConfirmation()||e.$f7router.back());case 11:case"end":return n.stop()}}),n)})))()},init:function(t){var e=t.atomLayoutManager,n=t.flowLayoutManager,a=t.flowTaskId,r=t.action,o=t.callback;this.atomLayoutManager=e,this.flowLayoutManager=n,this.flowTaskId=a,this.action=r,this.callback=o},open:function(t){var e=t.atomLayoutManager,n=t.flowLayoutManager,a=t.flowTaskId,r=t.action,o=t.callback;this.init({atomLayoutManager:e,flowLayoutManager:n,flowTaskId:a,action:r,callback:o}),this.$refs.sheet.f7Sheet.open()}},render:function(){var t,e,n=this,a=arguments[0];return this.action&&this.action.options.allowPassTask&&(t=a("eb-link",{ref:"buttonSubmitPass",props:{onPerform:function(t){return n.onSubmit(t,1)}}},[this.$text("Pass")])),this.action&&this.action.options.allowRejectTask&&(e=a("eb-link",{ref:"buttonSubmitReject",props:{onPerform:function(t){return n.onSubmit(t,2)}}},[this.$text("Reject")])),a("f7-sheet",{ref:"sheet",attrs:{fill:!0}},[a("f7-toolbar",[a("div",{class:"left"}),a("div",{class:"right display-flex align-items-center"},[t,e])]),a("f7-page-content",[a("eb-list",{attrs:{form:!0,"inline-labels":!0,"no-hairlines-md":!0},on:{submit:function(t){return n.onFormSubmit(t)}}},[a("eb-list-input",{attrs:{label:this.$text("Remark"),type:"text","clear-button":!0,placeholder:this.$text("Remark")},model:{value:n.remark,callback:function(t){n.remark=t}}})])])])}}},119:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});const a={meta:{global:!1},mixins:[n(609).Z],props:{container:{type:Object}},data:function(){return{}},created:function(){},methods:{reload:function(t){this.layout.instance&&this.layout.instance.onPageRefresh(t)},loadMore:function(){this.layout.instance&&this.layout.instance.onPageInfinite()}},render:function(){return this.layout_renderLayout()}}},862:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});const a={meta:{global:!1},mixins:[n(46).Z],props:{container:{type:Object}},data:function(){return{}},created:function(){},methods:{reload:function(t){this.layout.instance&&this.layout.instance.onPageRefresh(t)},loadMore:function(){this.layout.instance&&this.layout.instance.onPageInfinite()}},render:function(){return this.layout_renderLayout()}}},926:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>R});var a=n(233),r=n.n(a);function o(t,e,n,a,r,o,i){try{var s=t[o](i),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(a,r)}function i(t){return function(){var e=this,n=arguments;return new Promise((function(a,r){var i=t.apply(e,n);function s(t){o(i,a,r,s,u,"next",t)}function u(t){o(i,a,r,s,u,"throw",t)}s(void 0)}))}}function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){c(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t,e){if(t){if("string"==typeof t)return f(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(t,e):void 0}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}const d={data:function(){return{base:{ready:!1,configFlowBase:null,configAtom:null,config:null,layoutConfig:null,data:null,notfound:!1}}},computed:{base_ready:function(){return this.base.ready&&this.base.data},base_user:function(){return this.$store.state.auth.user.op},base_flow:function(){return this.base.data&&this.base.data.flow},base_atom:function(){return this.base.data&&this.base.data.atom},base_tasks:function(){return this.base.data&&this.base.data.tasks},base_flowOld:function(){if(!this.base_ready)return!1;var t=this.base_atom,e=this.base_flow;return!t||t.atomFlowId!==e.flowId},base_atomClass:function(){return this.base.data&&this.base.data.atom?{module:this.base.data.atom.module,atomClassName:this.base.data.atom.atomClassName}:null},base_tasksGroup:function(){var t=this.base_tasks;if(!t)return null;var e,n=[],a=null,r=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=l(t))){n&&(t=n);var a=0,r=function(){};return{s:r,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){s=!0,o=t},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}(t);try{for(r.s();!(e=r.n()).done;){var o=e.value;a&&a.flowNodeId===o.flowNodeId||(a=u(u({},o),{},{items:[],__showStatus:this.base_checkFlowNodeShowStatus(o)}),n.push(a)),a.items.push(o)}}catch(t){r.e(t)}finally{r.f()}return n}},created:function(){},mounted:function(){this.$meta.eventHub.$on("comment:action",this.base_onCommentChanged),this.$meta.eventHub.$on("attachment:action",this.base_onAttachmentChanged)},beforeDestroy:function(){this.$meta.eventHub.$off("comment:action",this.base_onCommentChanged),this.$meta.eventHub.$off("attachment:action",this.base_onAttachmentChanged)},methods:{base_init:function(){var t=this;return i(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("a/base/getLayoutConfig","a-basefront");case 2:t.base.layoutConfig=e.sent;case 3:case"end":return e.stop()}}),e)})))()},base_checkFlowNodeShowStatus:function(t){if(0===t.flowNodeStatus)return!1;var e=this.base_tasks;return!!e&&!e.some((function(e){return e.flowNodeId===t.flowNodeId&&e.handleStatus>0}))},base_getLayoutConfigKeyCurrent:function(){var t=this.base_atomClass,e=t?"".concat(t.module,"_").concat(t.atomClassName):null;return"flow.".concat(e,".render.item.layout.current.").concat("view",".").concat(this.$view.size)},base_loadData:function(){var t=this;return i(regeneratorRuntime.mark((function e(){var n,a,r,o,i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.base_flow,a=t.base_atom,e.next=5,t.$api.post("/a/flowtask/flow/data",{flowId:t.container.flowId});case 5:if(t.base.data=e.sent,t.base.data){e.next=9;break}return t.base.notfound=!0,e.abrupt("return",!1);case 9:return r=t.base_flow,o=t.base_atom,a&&o&&n&&r&&0===n.flowStatus&&1===r.flowStatus&&(i={atomId:o.atomId,itemId:o.itemId},s={atomId:o.atomIdFormal},0===a.atomIdFormal&&o.atomIdFormal>0?t.$meta.eventHub.$emit("atom:action",{key:s,action:{name:"create"},atom:{atomStage:1,module:o.module,atomClassName:o.atomClassName}}):t.$meta.eventHub.$emit("atom:action",{key:s,action:{name:"save"},actionSource:t}),t.$meta.eventHub.$emit("atom:action",{key:i,action:{name:"delete"}})),t.base_checkOpenAssigneesConfirmation(),e.abrupt("return",!0);case 16:return e.prev=16,e.t0=e.catch(0),t.base.notfound=!0,e.abrupt("return",!1);case 20:case"end":return e.stop()}}),e,null,[[0,16]])})))()},base_emitAtomActionSave:function(){this.$meta.eventHub.$emit("atom:action",{key:{atomId:this.base_atom.atomId},action:{name:"save"},actionSource:this})},base_checkAssigneesConfirmation:function(){var t=this.base_tasks&&this.base_tasks[0];return t&&0===t.flowTaskStatus&&1===t.specificFlag?t:null},base_checkOpenAssigneesConfirmation:function(){var t=this;window.setTimeout(i(regeneratorRuntime.mark((function e(){var n,a,r,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t.base_checkAssigneesConfirmation())){e.next=7;break}if(a=t._timeline_prepareActions({task:n}),u=1,r=function(t){if(Array.isArray(t))return t}(s=a)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var a,r,o=[],i=!0,s=!1;try{for(n=n.call(t);!(i=(a=n.next()).done)&&(o.push(a.value),!e||o.length!==e);i=!0);}catch(t){s=!0,r=t}finally{try{i||null==n.return||n.return()}finally{if(s)throw r}}return o}}(s,u)||l(s,u)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),o=r[0],!(i=o.find((function(t){return"assigneesConfirmation"===t.name})))){e.next=7;break}return e.next=7,t.timeline_onPerformTaskAction(null,i,n);case 7:case"end":return e.stop()}var s,u}),e)}))),300)},base_getCurrentStage:function(){if(!this.base.item)return null;var t=this.base.item.atomStage;return 0===t?"draft":1===t?"formal":"history"},base_onCommentChanged:function(t){var e=this.base_atom;e&&t.atomId===e.atomId&&("create"===t.action&&(e.commentCount+=1),"delete"===t.action&&(e.commentCount-=1))},base_onAttachmentChanged:function(t){var e=this.base_atom;e&&t.atomId===e.atomId&&("create"===t.action&&(e.attachmentCount+=1),"delete"===t.action&&(e.attachmentCount-=1))}}};function m(t,e,n,a,r,o,i){try{var s=t[o](i),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(a,r)}function h(t){return function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function i(t){m(o,a,r,i,s,"next",t)}function s(t){m(o,a,r,i,s,"throw",t)}i(void 0)}))}}const p={data:function(){return{layout:{current:null,config:null,instance:null}}},created:function(){},methods:{layout_setInstance:function(t){var e=this;return h(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.layout.instance=t;case 1:case"end":return n.stop()}}),n)})))()},layout_clearInstance:function(t){this.layout.instance===t&&(this.layout.instance=null)},layout_prepareConfig:function(){var t=this;return h(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.base.configFlowBase=t.$meta.config.modules["a-flowtask"].flow,!(n=t.base_atomClass)){e.next=6;break}return e.next=5,t.$meta.module.use(n.module);case 5:t.base.configAtom=t.$meta.util.getProperty(t.$meta.config.modules[n.module],"flows.".concat(n.atomClassName));case 6:t.base.config=t.base.configAtom?t.$meta.util.extend({},t.base.configFlowBase,t.base.configAtom):t.base.configFlowBase,t.layout_prepareConfigLayout();case 8:case"end":return e.stop()}}),e)})))()},layout_getDefault:function(){var t=this.base_getLayoutConfigKeyCurrent(),e=this.base.layoutConfig[t];if(e)return e;var n=this.$meta.util.getProperty(this.base.config,"render.item.info.layout.viewSize").view[this.$view.size];return Array.isArray(n)||(n=[n]),n[0].name},layout_prepareConfigLayout:function(t){this.layout.current=t||this.container.layout||this.layout_getDefault();var e=this.$meta.util.getProperty(this.base.config,"render.item.layouts.".concat(this.layout.current));if(e||(e=this.$meta.util.getProperty(this.base.config,"render.item.layouts.default")),!e)return!1;var n=this.$meta.util.getProperty(this.base.config,"render.item.layouts.base");return this.layout.config=n?this.$meta.util.extend({},n,e):e,!0},layout_switchLayout:function(t){var e=this;return h(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t!==e.layout.current){n.next=2;break}return n.abrupt("return",!0);case 2:if(e.layout.current=null,e.layout.config=null,e.subnavbar.enable=!1,e.subnavbar.render=!1,e.layout_prepareConfigLayout(t)){n.next=8;break}return n.abrupt("return",!1);case 8:return a=e.base_getLayoutConfigKeyCurrent(),e.$store.commit("a/base/setLayoutConfigKey",{module:"a-basefront",key:a,value:t}),n.abrupt("return",!0);case 11:case"end":return n.stop()}}),n)})))()},layout_getComponentOptions:function(){return{props:{layoutManager:this,layoutConfig:this.layout.config}}},layout_renderComponent:function(){var t=this.$createElement;return this.base.ready?t("eb-component",{attrs:{module:this.layout.config.component.module,name:this.layout.config.component.name,options:this.layout_getComponentOptions()}}):null},layout_getBlockComponentOptions:function(t){var e=t.blockConfig;return{props:{layoutManager:this,layout:this.layout.instance,blockConfig:e}}},layout_renderBlock:function(t){var e=t.blockName,n=this.$createElement;if(!this.base.ready)return null;if(!this.layout.instance)return null;var a=this.layout.config.blocks[e];return a?n("eb-component",{attrs:{module:a.component.module,name:a.component.name,options:this.layout_getBlockComponentOptions({blockConfig:a})}}):null},layout_renderLayout:function(){var t=this.$createElement;return this.base.notfound?t("f7-card",[t("f7-card-header",[this.$text("Friendly Tips")]),t("f7-card-content",[this.$text("FlowOrTaskNotExists")])]):t("div",[this.layout_renderComponent()])}}};function b(t,e,n,a,r,o,i){try{var s=t[o](i),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(a,r)}function v(t){return function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function i(t){b(o,a,r,i,s,"next",t)}function s(t){b(o,a,r,i,s,"throw",t)}i(void 0)}))}}const g={data:function(){return{}},methods:{info_onPerformFlowChart:function(){var t=this;return v(regeneratorRuntime.mark((function e(){var n,a,r,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.container.flowId,e.next=3,t.$api.post("/a/flowchart/flow/flowChartProcess",{host:{flowId:n}});case 3:a=e.sent,r=t.base.data.tasks,o=r.filter((function(t){return 0===t.flowTaskStatus})).map((function(t){return t.flowNodeDefId})),i="/a/flowchart/flowDef/contentProcessView?flowId=".concat(n),t.$view.navigate(i,{target:void 0,context:{params:{contentProcess:a,flowNodeDefIds:o}}});case 8:case"end":return e.stop()}}),e)})))()},info_onPerformDraftingAgain:function(){var t=this;return v(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$view.dialog.confirm();case 2:if(n=t.base.data.atom,a=t.getAction({module:n.module,atomClassName:n.atomClassName,name:"write"})){e.next=6;break}return e.abrupt("return");case 6:return a=t.$utils.extend({},a,{navigateOptions:{target:"_self",reloadCurrent:!0}}),e.next=9,t.$meta.util.performAction({ctx:t,action:a,item:n});case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})))()},info_onPerformCommentList:function(t,e){var n={context:{params:{atom:e}}},a="/a/basefront/comment/list?atomId=".concat(e.id);this.$view.navigate(a,n)},info_getItemMetaMedia:function(t){var e=t||this.$meta.config.modules["a-base"].user.avatar.default;return this.$meta.util.combineImageUrl(e,16)},info_renderActionsLeft:function(){var t=this,e=this.$createElement;if(this.base_ready){var n=this.base.data.flow,a=this.base.data.atom,r=[];return a?(this.base.config.render.item.info.comment&&r.push(e("eb-link",{key:"actionsLeft:comment",attrs:{iconF7:"::comment-dots",iconBadge:a.commentCount,tooltip:this.$text("Comments")},props:{onPerform:function(e){return t.info_onPerformCommentList(e,a)}}})),this.base.config.render.item.info.attachment&&r.push(e("eb-link",{key:"actionsLeft:attachment",attrs:{iconF7:"::attachment-line",iconBadge:a.attachmentCount,tooltip:this.$text("Attachments"),"eb-href":"/a/basefront/attachment/list?atomId=".concat(a.id)}})),r.push(e("eb-link",{key:"actionsLeft:flowChart",attrs:{iconF7:"::flow-chart",tooltip:this.$text("Flow Chart")},props:{onPerform:this.info_onPerformFlowChart}})),1===n.flowStatus&&n.flowUserId===this.base_user.id&&r.push(e("eb-button",{key:"actionsLeft:draftingAgain",attrs:{color:"orange",small:!0,outline:!0},props:{onPerform:this.info_onPerformDraftingAgain}},[this.$text("DraftingAgain")]))):r.push(e("f7-badge",{attrs:{color:"gray"}},[this.$text("Outdated")])),r}},info_renderAvatar:function(){var t=this.$createElement,e=this.base.data.flow,n=[];return n.push(t("img",{key:"avatar:one",class:"avatar avatar16",attrs:{src:this.info_getItemMetaMedia(e.avatar),title:e.userName}})),t("div",{key:"avatar",class:"info-avatar"},[n])},info_renderDate:function(){var t=this.$createElement,e=this.base.data.flow,n=[],a=this.$meta.util.formatDateTime(e.createdAt),r=this.$meta.util.formatDateTime(e.timeEnd),o=!1;return e.timeEnd&&(o=!0,n.push(t("div",{key:"date:one"},[a]))),o?n.push(t("div",{key:"date:two"},[r])):(n.push(t("div",{key:"date:one2"},[this.$meta.util.formatDate(e.createdAt)])),n.push(t("div",{key:"date:two2"},[this.$meta.util.formatTime(e.createdAt)]))),t("div",{key:"date",class:"info-date"},[n])},info_renderActionsRight:function(){if(this.base_ready){var t=[];return t.push(this.info_renderAvatar()),t.push(this.info_renderDate()),t}},info_renderFlowStatus:function(){var t=this.$createElement;if(!this.base_ready)return null;var e=this.base.data.flow,n=[];if(1===e.flowStatus){var a=this.$meta.config.modules["a-flowtask"].flowHandleStatuses[e.flowHandleStatus||1],r="".concat(e.flowRemarkLocale||this.$text(a.text));n.push(t("f7-badge",{class:"eb-flowStatus",key:"flowStatus",attrs:{color:a.color}},[r]))}else{var o="".concat(this.$text("Current"),": ").concat(e.flowNodeNameCurrentLocale);n.push(t("f7-badge",{class:"eb-flowStatus",key:"flowStatus",attrs:{color:"orange"}},[o]))}return n}}};function y(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=k(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,r=function(){};return{s:r,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){s=!0,o=t},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function w(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var a,r,o=[],i=!0,s=!1;try{for(n=n.call(t);!(i=(a=n.next()).done)&&(o.push(a.value),!e||o.length!==e);i=!0);}catch(t){s=!0,r=t}finally{try{i||null==n.return||n.return()}finally{if(s)throw r}}return o}}(t,e)||k(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(t,e){if(t){if("string"==typeof t)return _(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(t,e):void 0}}function _(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function x(t,e,n,a,r,o,i){try{var s=t[o](i),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(a,r)}function T(t){return function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function i(t){x(o,a,r,i,s,"next",t)}function s(t){x(o,a,r,i,s,"throw",t)}i(void 0)}))}}const C={data:function(){return{timeline:{}}},methods:{_timeline_prepareActions:function(t){var e=this,n=t.task,a=n._actions||[];return[(a=a.map((function(t){return e._timeline_getActionBase(t)}))).filter((function(t){return("claim"!==t.name||!n.timeClaimed)&&t.basic})),a.filter((function(t){return!("appendHandleRemark"===t.name&&n.handleRemark||t.basic)}))]},timeline_onPerformTaskActionMore:function(t,e){var n=this;return T(regeneratorRuntime.mark((function a(){var r,o,i,s,u,c,l,f,d,m,h,p,b;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:r=n._timeline_prepareActions({task:e}),o=w(r,2),i=o[1],s=[],u=y(i),a.prev=3,u.s();case 5:if((c=u.n()).done){a.next=17;break}if(l=c.value,f=void 0,!l.icon){a.next=14;break}return d=l.icon.material,m=l.icon.f7,a.next=13,n.$meta.util.combineIcon({material:d,f7:m});case 13:f=a.sent;case 14:s.push({icon:f||'<i class="icon"></i>',text:n.$text(l.title),data:l});case 15:a.next=5;break;case 17:a.next=22;break;case 19:a.prev=19,a.t0=a.catch(3),u.e(a.t0);case 22:return a.prev=22,u.f(),a.finish(22);case 25:return h={forceToPopover:!0,targetEl:t.currentTarget,buttons:s},a.next=28,n.$view.actions.choose(h);case 28:return p=a.sent,b=p.data,a.next=32,n.timeline_onPerformTaskAction(t,b,e);case 32:case"end":return a.stop()}}),a,null,[[3,19,22,25]])})))()},timeline_onPerformTaskAction:function(t,e,n,a){var r=this;return T(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.$meta.util.performAction({ctx:a||r,action:e,item:{flowLayoutManager:r,task:n}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()},_timeline_getActionBase:function(t){var e=this.$meta.config.modules["a-flowtask"].flowTask.actions[t.name];return this.$meta.util.extend({},e,t)},_timeline_renderFlowNodeItems:function(t){var e,n=t.tasks,a=this.$createElement,r=[],o=y(n);try{for(o.s();!(e=o.n()).done;){var i=e.value,s=this._timeline_renderFlowTask({task:i});s&&r.push(s)}}catch(t){o.e(t)}finally{o.f()}return a("f7-list",{attrs:{"medial-list":!0}},[r])},_timeline_renderFlowNode:function(t){var e,n,a=t.task,r=t.flowNodeGroupIndex,o=this.$createElement,i=o("f7-badge",{class:"flowNodeIndex",attrs:{color:"teal"}},[r]),s=o("span",[a.flowNodeNameLocale]);a.__showStatus&&(e=this._timeline_renderFlowNodeStatuses({task:a})),a.flowNodeId===this.base_flow.flowNodeIdCurrent&&(n=o("f7-badge",{attrs:{color:"orange"}},[this.$text("Current")]));var u=this._timeline_renderFlowNodeItems({tasks:a.items});return o("f7-card",{key:"flowNode:".concat(a.flowNodeId),attrs:{outline:!0}},[o("f7-card-header",[o("div",[i,s]),o("div",[e,n])]),o("f7-card-content",{attrs:{padding:!1}},[u])])},_timeline_renderFlowNodeStatuses:function(t){var e=t.task,n=[],a=this._timeline_renderFlowNodeStatus({task:e});return a&&n.push(a),n},_timeline_renderFlowNodeStatus:function(t){var e=t.task,n=this.$createElement;if(0!==e.flowNodeHandleStatus){var a=this.$meta.config.modules["a-flowtask"].flowNodeHandleStatuses[e.flowNodeHandleStatus],r=e.flowNodeRemarkLocale||this.$text(a.text);return n("f7-badge",{attrs:{color:a.color}},[r])}},_timeline_renderFlowTaskStatuses:function(t){var e=t.task,n=this.$createElement,a=[];if(e.flowTaskIdForwardTo){var r=this.base_tasks.find((function(t){return t.flowTaskId===e.flowTaskIdForwardTo}));a.push(n("f7-badge",["To: ".concat(r.userName)]))}if(e.flowTaskIdForwardFrom){var o=this.base_tasks.find((function(t){return t.flowTaskId===e.flowTaskIdForwardFrom}));a.push(n("f7-badge",["From: ".concat(o.userName)]))}if(e.flowTaskIdSubstituteTo){var i=this.base_tasks.find((function(t){return t.flowTaskId===e.flowTaskIdSubstituteTo}));i&&a.push(n("f7-badge",["To: ".concat(i.userName)]))}if(e.flowTaskIdSubstituteFrom){var s=this.base_tasks.find((function(t){return t.flowTaskId===e.flowTaskIdSubstituteFrom}));s&&a.push(n("f7-badge",["From: ".concat(s.userName)]))}var u=this._timeline_renderFlowTaskStatus({task:e});return u&&a.push(u),a},_timeline_renderFlowTaskStatus:function(t){var e=t.task,n=this.$createElement;if(0!==e.handleStatus){var a,r=this.$meta.config.modules["a-flowtask"].flowTaskHandleStatuses[e.handleStatus];return a=e.flowNodeType.indexOf("startEventAtom")>-1?this.$text("Submitted"):this.$text(r.text),n("f7-badge",{attrs:{color:r.color}},[a])}},_timeline_renderFlowTaskActions_HandleView:function(t){var e=this,n=t.task,a=t.ctxParent,r=this.$createElement;if(n.userIdAssignee===this.base_user.id&&!this.base_flowOld){for(var o=[],i=w(this._timeline_prepareActions({task:n}),1)[0],s=function(){var t=c[u],s=i.find((function(e){return e.name===t}));s&&o.push(r("eb-link",{key:s.name,attrs:{iconMaterial:s.icon.material,iconF7:s.icon.f7,tooltip:e.$text(s.title)},props:{onPerform:function(t){return e.timeline_onPerformTaskAction(t,s,n,a)}}}))},u=0,c=["claim","handleTask"];u<c.length;u++)s();return o}},_timeline_renderFlowTaskActionsChildren:function(t){var e=this,n=t.task,a=this.$createElement;if(n.userIdAssignee===this.base_user.id&&!this.base_flowOld){var r,o=[],i=w(this._timeline_prepareActions({task:n}),2),s=i[0],u=i[1],c=y(s);try{var l=function(){var t=r.value;o.push(a("eb-link",{key:t.name,attrs:{iconMaterial:t.icon.material,iconF7:t.icon.f7,tooltip:e.$text(t.title)},props:{onPerform:function(a){return e.timeline_onPerformTaskAction(a,t,n)}}}))};for(c.s();!(r=c.n()).done;)l()}catch(t){c.e(t)}finally{c.f()}return u.length>0&&o.push(a("eb-link",{key:"actionsPopover",attrs:{iconF7:"::more-horiz"},props:{onPerform:function(t){return e.timeline_onPerformTaskActionMore(t,n)}}})),o}},_timeline_renderFlowTaskActions:function(t){var e=t.task,n=this.$createElement;if(e.userIdAssignee===this.base_user.id&&!this.base_flowOld)return n("div",{class:"task-actions"},[this._timeline_renderFlowTaskActionsChildren({task:e})])},_timeline_getHandleRemark:function(t){var e=t.task;return 0===e.flowTaskStatus&&1===e.specificFlag?this.$text("AssigneesConfirmationPrompt"):0===e.flowTaskStatus&&2===e.specificFlag?this.$text("Recall Available"):e.handleRemarkLocale||e.handleRemark},_timeline_renderFlowTask:function(t){var e,n=t.task,a=this.$createElement,r=n.id===this.container.flowTaskId?"item flowTaskCurrent":"item",o=a("div",{slot:"media"},[a("img",{class:"avatar avatar24",attrs:{src:this.info_getItemMetaMedia(n.avatar)}})]);n.handleStatus>0&&(e=this.$meta.util.formatDateTime(n.timeHandled));var i=this._timeline_renderFlowTaskStatuses({task:n}),s=a("div",{slot:"root-start",class:"header"},[a("div",{class:"mediaLabel"},[a("span",[e])]),a("div",{class:"date"},[i])]),u=a("div",{slot:"title",class:"title"},[a("div",[n.userName])]),c=a("div",{slot:"root-end",class:"summary"},[this._timeline_getHandleRemark({task:n})]),l=a("div",{slot:"after",class:"after"},[this._timeline_renderFlowTaskActions({task:n})]);return a("eb-list-item",{class:r,key:"flowTask:".concat(n.flowTaskId),ref:"flowTask:".concat(n.flowTaskId)},[o,s,u,c,l])},_timeline_renderTasks:function(){var t,e=[],n=this.base_tasksGroup,a=n.length,r=y(n);try{for(r.s();!(t=r.n()).done;){var o=t.value;e.push(this._timeline_renderFlowNode({task:o,flowNodeGroupIndex:a})),a--}}catch(t){r.e(t)}finally{r.f()}return e},timeline_render:function(){return(0,this.$createElement)("div",{class:"eb-flow-timeline"},[this._timeline_renderTasks()])}}};var $=n(957),I=n(801);const A={components:{actionCancelFlow:$.Z,actionHandleTask:I.Z},data:function(){return{}},methods:{actions_renderActionComponents:function(){var t=this.$createElement,e=[];return e.push(t($.Z,{key:"actionCancelFlow",ref:"actionCancelFlow"})),e.push(t(I.Z,{key:"actionHandleTask",ref:"actionHandleTask"})),e}}};function S(t,e,n,a,r,o,i){try{var s=t[o](i),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(a,r)}const L={data:function(){return{notification:{simple:null,callbackId:0}}},created:function(){var t=this;this.$meta.util.performAction({ctx:this,action:{actionModule:"a-message",actionComponent:"uniform",name:"initialize"}}).then((function(e){t.notification.simple=e,t.notification.callbackId=t.notification.simple.register("a-flow:workflow",t.notification_callback.bind(t))}))},beforeDestroy:function(){this.notification.callbackId&&(this.notification.simple.unRegister(this.notification.callbackId),this.notification.callbackId=0)},methods:{notification_callback:function(t){var e,n=this;return(e=regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.scene,r=t.content,"click"!==a){e.next=6;break}if((n.base_flow&&n.base_flow.flowId)!==r.params.flowId){e.next=6;break}return n.base_loadData(),e.abrupt("return",!0);case 6:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function i(t){S(o,a,r,i,s,"next",t)}function s(t){S(o,a,r,i,s,"throw",t)}i(void 0)}))})()}}};function P(t,e,n,a,r,o,i){try{var s=t[o](i),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(a,r)}const R={mixins:[{mixins:[r().prototype.$meta.module.get("a-base").options.mixins.ebAtomActions,d,{data:function(){return{}},methods:{page_onRefresh:function(t){t&&t(),this.base_loadData()},page_getTitle:function(){var t=this.$text("FlowTitle");return this.base_ready?"".concat(t,": ").concat(this.base.data.flow.flowName):t},page_getSubtitle:function(){return null}}},p,{data:function(){return{subnavbar:{enable:!1,render:!1}}},methods:{subnavbar_policyDefault:function(){var t=this.subnavbar_policyDefaultCalc(),e=t.enable,n=t.render;this.subnavbar.enable=e,this.subnavbar.render=n},subnavbar_policyDefaultCalc:function(){return{enable:"small"===this.$view.size,render:!0}}}},g,C,A,L],data:function(){return{}},created:function(){this.index_load()},beforeDestroy:function(){this.$emit("layoutManager:destroy")},methods:{index_load:function(){var t,e=this;return(t=regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.base_init();case 2:return t.next=4,e.base_loadData();case 4:if(t.sent){t.next=7;break}return t.abrupt("return");case 7:return t.next=9,e.layout_prepareConfig();case 9:e.base.ready=!0;case 10:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function i(t){P(o,a,r,i,s,"next",t)}function s(t){P(o,a,r,i,s,"throw",t)}i(void 0)}))})()}}}],data:function(){var t=this.$f7route.query;return{container:{flowId:parseInt(t.flowId||0),flowTaskId:parseInt(t.flowTaskId||0),layout:t.layout}}},render:function(){var t=arguments[0];return t("eb-page",{attrs:{withSubnavbar:this.subnavbar.enable,ptr:!0},on:{ptrRefresh:this.page_onRefresh}},[t("eb-navbar",{attrs:{title:this.page_getTitle(),subtitle:this.page_getSubtitle(),"eb-back-link":"Back"}},[this.layout_renderBlock({blockName:"title"}),this.layout.instance&&this.subnavbar.enable&&this.layout_renderBlock({blockName:"subnavbar"})]),this.layout_renderLayout()])}}},383:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});const a={mixins:[n(609).Z],data:function(){var t=this.$f7route.query;return{container:{options:t&&t.options?JSON.parse(t.options):{mode:"history"},layout:t&&t.layout}}},render:function(){var t=arguments[0];return t("eb-page",{attrs:{ptr:!0,infinite:!0,infinitePreloader:!1},on:{ptrRefresh:this.page_onRefresh,infinite:this.page_onInfinite}},[t("eb-navbar",{attrs:{title:this.page_getTitle(),subtitle:this.page_getSubtitle(),"eb-back-link":"Back"}},[this.layout_renderBlock({blockName:"title"})]),this.layout_renderLayout()])}}},209:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i});var a=n(233);function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function o(t,e,n,a,r,o,i){try{var s=t[o](i),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(a,r)}const i={mixins:[n.n(a)().prototype.$meta.module.get("a-components").options.mixins.ebPageContext],data:function(){return{selectedUsers:null}},computed:{flowTaskId:function(){return this.contextParams.flowTaskId},assignees:function(){return this.contextParams.assignees}},created:function(){this.selectedUsers=this.assignees.users.map((function(t){return t.id}))},methods:{onPerform:function(t,e){var n,a=this;return(n=regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.$view.dialog.confirm();case 2:return t.next=4,a.$api.post("/a/flowtask/task/assigneesConfirmation",{flowTaskId:a.flowTaskId,handle:{status:e,assignees:1===e?{users:a.selectedUsers}:void 0}});case 4:a.contextCallback(200,!0),a.$f7router.back();case 6:case"end":return t.stop()}}),t)})),function(){var t=this,e=arguments;return new Promise((function(a,r){var i=n.apply(t,e);function s(t){o(i,a,r,s,u,"next",t)}function u(t){o(i,a,r,s,u,"throw",t)}s(void 0)}))})()},onItemChange:function(t,e){var n=this.selectedUsers.findIndex((function(t){return t===e.id}));t.currentTarget.checked&&-1===n?this.selectedUsers.push(e.id):!t.currentTarget.checked&&n>-1&&this.selectedUsers.splice(n,1)},_getItemChecked:function(t){return this.selectedUsers.findIndex((function(e){return e===t.id}))>-1},_getItemMetaMedia:function(t){var e=t.avatar||this.$meta.config.modules["a-base"].user.avatar.default;return this.$meta.util.combineImageUrl(e,24)},renderUsers:function(){var t,e=this,n=this.$createElement,a=this.assignees.users,o=[],i=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,o=function(){};return{s:o,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,i=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw i}}}}(a);try{var s=function(){var a=t.value;o.push(n("eb-list-item",{class:"item",key:a.id,attrs:{checkbox:!0,checked:e._getItemChecked(a)},on:{change:function(t){return e.onItemChange(t,a)}}},[n("div",{slot:"title",class:"display-flex align-items-center"},[n("img",{class:"avatar avatar24",attrs:{src:e._getItemMetaMedia(a)}}),n("span",[a.userName])])]))};for(i.s();!(t=i.n()).done;)s()}catch(t){i.e(t)}finally{i.f()}return n("f7-list",[o])}},render:function(){var t,e=this,n=arguments[0];return this.selectedUsers.length>0&&(t=n("eb-link",{props:{onPerform:function(t){return e.onPerform(t,1)}}},[this.$text("Pass")])),n("eb-page",[n("eb-navbar",{attrs:{title:this.$text("Assignees Confirmation"),"eb-back-link":"Back"}},[n("f7-nav-right",[t,n("eb-link",{props:{onPerform:function(t){return e.onPerform(t,2)}}},[this.$text("Reject")])])]),this.renderUsers()])}}},758:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>o});var a=n(233);function r(t,e,n,a,r,o,i){try{var s=t[o](i),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(a,r)}const o={mixins:[n.n(a)().prototype.$meta.module.get("a-components").options.mixins.ebPageContext],data:function(){return{selectedUser:null,remark:null}},computed:{flowTaskId:function(){return this.contextParams.flowTaskId}},created:function(){},methods:{onFormSubmit:function(){this.$refs.buttonSubmit&&this.$refs.buttonSubmit.onClick()},onPerformSelectUser:function(){var t=this;this.$view.navigate("/a/baseadmin/user/select",{target:"_self",context:{params:{onFetchUsers:function(e){var n=e.query,a=e.page;return t.$api.post("/a/flowtask/task/userSelectForward",{flowTaskId:t.flowTaskId,params:{query:n,page:a}})}},callback:function(e,n){200===e&&(t.selectedUser=n)}}})},onPerformDone:function(){var t,e=this;return(t=regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$view.dialog.confirm();case 2:return t.next=4,e.$api.post("/a/flowtask/task/forward",{flowTaskId:e.flowTaskId,handle:{assignee:e.selectedUser.id,remark:e.remark}});case 4:e.contextCallback(200,!0),e.$f7router.back();case 6:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(a,o){var i=t.apply(e,n);function s(t){r(i,a,o,s,u,"next",t)}function u(t){r(i,a,o,s,u,"throw",t)}s(void 0)}))})()},onItemChange:function(t,e){var n=this.selectedUsers.findIndex((function(t){return t===e.id}));t.currentTarget.checked&&-1===n?this.selectedUsers.push(e.id):!t.currentTarget.checked&&n>-1&&this.selectedUsers.splice(n,1)},_getItemChecked:function(t){return this.selectedUsers.findIndex((function(e){return e===t.id}))>-1},_getItemMetaMedia:function(t){var e=t.avatar||this.$meta.config.modules["a-base"].user.avatar.default;return this.$meta.util.combineImageUrl(e,24)},_renderForm:function(){var t=this,e=this.$createElement;return e("eb-list",{attrs:{form:!0,"inline-labels":!0,"no-hairlines-md":!0},on:{submit:function(e){return t.onFormSubmit(e)}}},[e("eb-list-item",{attrs:{title:this.$text("Assignee"),link:"#"},props:{onPerform:this.onPerformSelectUser}},[e("div",{slot:"after",class:"after"},[this.selectedUser&&this.selectedUser.userName])]),e("eb-list-input",{attrs:{label:this.$text("Remark"),type:"text","clear-button":!0,placeholder:this.$text("Remark")},model:{value:t.remark,callback:function(e){t.remark=e}}})])}},render:function(){var t,e=arguments[0];return this.selectedUser&&(t=e("eb-link",{ref:"buttonSubmit",attrs:{iconF7:"::done"},props:{onPerform:this.onPerformDone}})),e("eb-page",[e("eb-navbar",{attrs:{title:this.$text("TaskActionTitleForward"),"eb-back-link":"Back"}},[e("f7-nav-right",[t])]),this._renderForm()])}}},510:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>o});var a=n(233);function r(t,e,n,a,r,o,i){try{var s=t[o](i),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(a,r)}const o={mixins:[n.n(a)().prototype.$meta.module.get("a-components").options.mixins.ebPageContext],data:function(){return{selectedUser:null,remark:null}},computed:{flowTaskId:function(){return this.contextParams.flowTaskId}},created:function(){},methods:{onFormSubmit:function(){this.$refs.buttonSubmit&&this.$refs.buttonSubmit.onClick()},onPerformSelectUser:function(){var t=this;this.$view.navigate("/a/baseadmin/user/select",{target:"_self",context:{params:{onFetchUsers:function(e){var n=e.query,a=e.page;return t.$api.post("/a/flowtask/task/userSelectSubstitute",{flowTaskId:t.flowTaskId,params:{query:n,page:a}})}},callback:function(e,n){200===e&&(t.selectedUser=n)}}})},onPerformDone:function(){var t,e=this;return(t=regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$view.dialog.confirm();case 2:return t.next=4,e.$api.post("/a/flowtask/task/substitute",{flowTaskId:e.flowTaskId,handle:{assignee:e.selectedUser.id,remark:e.remark}});case 4:e.contextCallback(200,!0),e.$f7router.back();case 6:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(a,o){var i=t.apply(e,n);function s(t){r(i,a,o,s,u,"next",t)}function u(t){r(i,a,o,s,u,"throw",t)}s(void 0)}))})()},onItemChange:function(t,e){var n=this.selectedUsers.findIndex((function(t){return t===e.id}));t.currentTarget.checked&&-1===n?this.selectedUsers.push(e.id):!t.currentTarget.checked&&n>-1&&this.selectedUsers.splice(n,1)},_getItemChecked:function(t){return this.selectedUsers.findIndex((function(e){return e===t.id}))>-1},_getItemMetaMedia:function(t){var e=t.avatar||this.$meta.config.modules["a-base"].user.avatar.default;return this.$meta.util.combineImageUrl(e,24)},_renderForm:function(){var t=this,e=this.$createElement;return e("eb-list",{attrs:{form:!0,"inline-labels":!0,"no-hairlines-md":!0},on:{submit:function(e){return t.onFormSubmit(e)}}},[e("eb-list-item",{attrs:{title:this.$text("Assignee"),link:"#"},props:{onPerform:this.onPerformSelectUser}},[e("div",{slot:"after",class:"after"},[this.selectedUser&&this.selectedUser.userName])]),e("eb-list-input",{attrs:{label:this.$text("Remark"),type:"text","clear-button":!0,placeholder:this.$text("Remark")},model:{value:t.remark,callback:function(e){t.remark=e}}})])}},render:function(){var t,e=arguments[0];return this.selectedUser&&(t=e("eb-link",{ref:"buttonSubmit",attrs:{iconF7:"::done"},props:{onPerform:this.onPerformDone}})),e("eb-page",[e("eb-navbar",{attrs:{title:this.$text("TaskActionTitleSubstitute"),"eb-back-link":"Back"}},[e("f7-nav-right",[t])]),this._renderForm()])}}},970:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>v});var a=n(233),r=n.n(a);function o(t,e,n,a,r,o,i){try{var s=t[o](i),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(a,r)}const i={data:function(){return{base:{ready:!1,configAtomBase:null,configAtom:null,config:null,layoutConfig:null}}},computed:{base_ready:function(){return this.base.ready},base_user:function(){return this.$store.state.auth.user.op},base_flow:function(){return this.container_flowLayoutManager.base_flow},base_atom:function(){return this.container_flowLayoutManager.base_atom},base_flowOld:function(){return this.container_flowLayoutManager.base_flowOld},base_atomClass:function(){return this.container_flowLayoutManager.base_atomClass}},created:function(){},methods:{base_init:function(){var t,e=this;return(t=regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("a/base/getLayoutConfig","a-basefront");case 2:e.base.layoutConfig=t.sent;case 3:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(a,r){var i=t.apply(e,n);function s(t){o(i,a,r,s,u,"next",t)}function u(t){o(i,a,r,s,u,"throw",t)}s(void 0)}))})()},base_getLayoutConfigKeyCurrent:function(){var t=this.base_atomClass,e=t?"".concat(t.module,"_").concat(t.atomClassName):null;return"flowTask.".concat(e,".render.atom.layout.current.").concat(this.container.mode,".").concat(this.$view.size)}}};function s(t,e,n,a,r,o,i){try{var s=t[o](i),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(a,r)}function u(t){return function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function i(t){s(o,a,r,i,u,"next",t)}function u(t){s(o,a,r,i,u,"throw",t)}i(void 0)}))}}const c={data:function(){return{layout:{current:null,config:null,instance:null}}},created:function(){},methods:{layout_setInstance:function(t){var e=this;return u(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.layout.instance=t;case 1:case"end":return n.stop()}}),n)})))()},layout_clearInstance:function(t){this.layout.instance===t&&(this.layout.instance=null)},layout_prepareConfig:function(){var t=this;return u(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.base.configAtomBase=t.$meta.config.modules["a-flowtask"].flowTask,!(n=t.base_atomClass)){e.next=6;break}return e.next=5,t.$meta.module.use(n.module);case 5:t.base.configAtom=t.$meta.util.getProperty(t.$meta.config.modules[n.module],"flowTasks.".concat(n.atomClassName));case 6:t.base.config=t.base.configAtom?t.$meta.util.extend({},t.base.configAtomBase,t.base.configAtom):t.base.configAtomBase,t.layout_prepareConfigLayout();case 8:case"end":return e.stop()}}),e)})))()},layout_getDefault:function(){var t=this.base_getLayoutConfigKeyCurrent(),e=this.base.layoutConfig[t];if(e)return e;var n=this.$meta.util.getProperty(this.base.config,"render.atom.info.layout.viewSize")[this.container.mode][this.$view.size];return Array.isArray(n)||(n=[n]),n[0].name},layout_prepareConfigLayout:function(t){this.layout.current=t||this.container.layout||this.layout_getDefault();var e=this.$meta.util.getProperty(this.base.config,"render.atom.layouts.".concat(this.layout.current));if(e||(e=this.$meta.util.getProperty(this.base.config,"render.atom.layouts.default")),!e)return!1;var n=this.$meta.util.getProperty(this.base.config,"render.atom.layouts.base");return this.layout.config=n?this.$meta.util.extend({},n,e):e,!0},layout_switchLayout:function(t){var e=this;return u(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t!==e.layout.current){n.next=2;break}return n.abrupt("return",!0);case 2:if(e.layout.current=null,e.layout.config=null,e.layout_prepareConfigLayout(t)){n.next=6;break}return n.abrupt("return",!1);case 6:return a=e.base_getLayoutConfigKeyCurrent(),e.$store.commit("a/base/setLayoutConfigKey",{module:"a-basefront",key:a,value:t}),n.abrupt("return",!0);case 9:case"end":return n.stop()}}),n)})))()},layout_getComponentOptions:function(){return{props:{layoutManager:this,layoutConfig:this.layout.config}}},layout_renderComponent:function(){var t=this.$createElement;return this.base.ready?t("eb-component",{attrs:{module:this.layout.config.component.module,name:this.layout.config.component.name,options:this.layout_getComponentOptions()}}):null},layout_getBlockComponentOptions:function(t){var e=t.blockConfig;return{props:{layoutManager:this,layout:this.layout.instance,blockConfig:e}}},layout_renderBlock:function(t){var e=t.blockName,n=this.$createElement;if(!this.base.ready)return null;if(!this.layout.instance)return null;var a=this.layout.config.blocks[e];return a?n("eb-component",{attrs:{module:a.component.module,name:a.component.name,options:this.layout_getBlockComponentOptions({blockConfig:a})}}):null},layout_renderLayout:function(){return(0,this.$createElement)("div",[this.layout_renderComponent()])}}};var l=n(957),f=n(801);function d(t,e,n,a,r,o,i){try{var s=t[o](i),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(a,r)}function m(t){return function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function i(t){d(o,a,r,i,s,"next",t)}function s(t){d(o,a,r,i,s,"throw",t)}i(void 0)}))}}const h={components:{actionCancelFlow:l.Z,actionHandleTask:f.Z},data:function(){return{}},methods:{actions_onSubmit:function(){this.$refs.buttonSave.onClick()},actions_onPerformValidate:function(t,e){var n=this;return m(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.handle,n.$refs.actionHandleTask.init({atomLayoutManager:n,flowLayoutManager:n.container_flowLayoutManager,flowTaskId:n.container.flowTaskId,action:n.container_action}),r=n.container_data.item,t.next=5,n.$refs.actionHandleTask._submit({handle:a,formAtom:r});case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})))()},actions_onPerformTaskHandleSave:function(){var t=this;return m(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.validate_getInstance()){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,n.perform(null,{action:"save"});case 5:return e.abrupt("return",t.$text("Saved"));case 6:case"end":return e.stop()}}),e)})))()},actions_onPerformTaskHandleSubmit:function(){var t,e=this;this.$refs.actionHandleTask.open({atomLayoutManager:this,flowLayoutManager:this.container_flowLayoutManager,flowTaskId:this.container.flowTaskId,action:this.container_action,callback:(t=m(regeneratorRuntime.mark((function t(n){var a,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=n.handle,r=e.validate_getInstance()){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,r.perform(null,{action:"submit",handle:a});case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)}))),async function(e){return t.apply(this,arguments)})})},actions_renderActionComponents:function(){var t=this.$createElement,e=[];return e.push(t(l.Z,{key:"actionCancelFlow",ref:"actionCancelFlow"})),e.push(t(f.Z,{key:"actionHandleTask",ref:"actionHandleTask"})),e},actions_renderHandleEdit:function(){var t=this,e=this.$createElement,n=[];return n.push(e("eb-link",{key:"save",ref:"buttonSave",attrs:{iconF7:"::save"},props:{onPerform:function(e){return t.actions_onPerformTaskHandleSave(e)}}})),n.push(e("eb-link",{key:"submit",ref:"buttonSubmit",attrs:{iconF7:"::done"},props:{onPerform:function(e){return t.actions_onPerformTaskHandleSubmit(e)}}})),n},actions_render:function(){return this.base_ready?"view"===this.container.mode?this.container_flowLayoutManager._timeline_renderFlowTaskActions_HandleView({task:this.container_task,ctxParent:this}):this.actions_renderHandleEdit():null}}};function p(t,e,n,a,r,o,i){try{var s=t[o](i),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(a,r)}const b={mixins:[r().prototype.$meta.module.get("a-components").options.mixins.ebPageDirty,i,{data:function(){return{}},methods:{page_getTitle:function(){if(!this.base_ready)return"";var t="".concat(this.$text("Task"),": ").concat(this.base_flow.flowName);return this.page_getDirtyTitle(t)},page_getSubtitle:function(){return null}}},c,{data:function(){return{}},methods:{}},{data:function(){return{}},computed:{validate_host:function(){return{mode:this.container.mode,atomId:this.container_data.item.atomId,flowTaskId:this.container.flowTaskId}}},methods:{validate_getInstance:function(){return this.$refs.validate},validate_onSubmit:function(){this.actions_onSubmit()},validate_onPerformValidate:function(t,e){return this.actions_onPerformValidate(t,e)},validate_onValidateItemChange:function(){"edit"===this.container.mode&&this.page_setDirty(!0)},validate_render:function(){var t=this.$createElement;if(!this.base_ready)return null;var e={schema:this.container_data.schema};return t("eb-validate",{ref:"validate",attrs:{host:this.validate_host,readOnly:"edit"!==this.container.mode,auto:!0,data:this.container_data.item,meta:e},props:{onPerform:this.validate_onPerformValidate},on:{submit:this.validate_onSubmit,validateItemChange:this.validate_onValidateItemChange}})}}},h],data:function(){return{}},computed:{container_flowLayoutManager:function(){return this.contextParams.flowLayoutManager},container_task:function(){return this.contextParams.task},container_data:function(){return this.contextParams.data},container_action:function(){return this.contextParams.action}},created:function(){this.index_load()},beforeDestroy:function(){this.$emit("layoutManager:destroy")},methods:{index_load:function(){var t,e=this;return(t=regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.base_init();case 2:return t.next=4,e.layout_prepareConfig();case 4:e.base.ready=!0;case 5:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function i(t){p(o,a,r,i,s,"next",t)}function s(t){p(o,a,r,i,s,"throw",t)}i(void 0)}))})()}}},v={mixins:[r().prototype.$meta.module.get("a-components").options.mixins.ebPageContext,b],data:function(){var t=this.$f7route.query;return{container:{flowTaskId:parseInt(t.flowTaskId||0),mode:t.mode,layout:t.layout}}},render:function(){var t=arguments[0];return t("eb-page",[t("eb-navbar",{attrs:{title:this.page_getTitle(),subtitle:this.page_getSubtitle(),"eb-back-link":"Back"}},[this.layout_renderBlock({blockName:"title"})]),this.layout_renderLayout()])}}},506:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});const a={mixins:[n(46).Z],data:function(){var t=this.$f7route.query;return{container:{options:t&&t.options?JSON.parse(t.options):{mode:"history"},layout:t&&t.layout}}},render:function(){var t=arguments[0];return t("eb-page",{attrs:{ptr:!0,infinite:!0,infinitePreloader:!1},on:{ptrRefresh:this.page_onRefresh,infinite:this.page_onInfinite}},[t("eb-navbar",{attrs:{title:this.page_getTitle(),subtitle:this.page_getSubtitle(),"eb-back-link":"Back"}},[this.layout_renderBlock({blockName:"title"})]),this.layout_renderLayout()])}}},450:(t,e,n)=>{var a=n(361)((function(t){return t[1]}));a.push([t.id,":root .navbar .eb-flowStatus.badge {\n  margin: 0 16px;\n}\n:root .eb-flow-timeline .task-actions {\n  display: flex;\n  align-items: center;\n}\n:root .eb-flow-timeline .task-actions .link {\n  margin-left: 6px;\n}\n:root .eb-flow-timeline .flowRemark.badge {\n  margin: 0 16px;\n}\n:root .eb-flow-timeline .flowNodeIndex.badge {\n  margin-top: -3px;\n  margin-right: 6px;\n}\n:root .eb-flow-timeline .flowTaskCurrent {\n  background: var(--f7-list-item-divider-bg-color);\n}\n",""]),t.exports=a},361:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=t(e);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,a){"string"==typeof t&&(t=[[null,t,""]]);var r={};if(a)for(var o=0;o<this.length;o++){var i=this[o][0];null!=i&&(r[i]=!0)}for(var s=0;s<t.length;s++){var u=[].concat(t[s]);a&&r[u[0]]||(n&&(u[2]?u[2]="".concat(n," and ").concat(u[2]):u[2]=n),e.push(u))}},e}},259:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i});var a=n(233),r=n.n(a);const o={components:{flowTab:n(119).Z},data:function(){var t=this.$f7route.query,e=t&&t.options?JSON.parse(t.options):{mode:"mine"};return{options:e,layout:t&&t.layout,stats:{mine:0},tabId:{mine:r().prototype.$meta.util.nextId("tab"),others:r().prototype.$meta.util.nextId("tab"),history:r().prototype.$meta.util.nextId("tab")},tabName:e.mode}},computed:{pageTitle:function(){var t=this.tabName;return"mine"===t?"".concat(this.$text("Initiateds")):"others"===t?"".concat(this.$text("Participateds")):"history"===t?"".concat(this.$text("Ends")):this.$text("Flow")}},created:function(){},methods:{getContainer:function(t){var e={mode:t};return"history"===t&&(e.where={"a.flowStatus":1}),{options:e,layout:this.layout}},onStatsChange:function(t,e){this.stats[e]=t}}},i=(0,n(792).Z)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("eb-page",{attrs:{"page-content":!1,tabs:"","with-subnavbar":""}},[n("eb-navbar",{attrs:{title:t.pageTitle,"eb-back-link":"Back"}},[n("f7-subnavbar",[n("f7-toolbar",{attrs:{top:"",tabbar:""}},[n("eb-link",{attrs:{"tab-link":"#"+t.tabId.mine,tabLinkActive:"mine"===t.tabName,"icon-only":"",iconF7:"::person","badge-color":"orange","icon-badge":t.stats.mine,stats_params:{module:"a-flow",name:"flowInitiateds"}},on:{stats_change:function(e){return t.onStatsChange(e,"mine")}}}),t._v(" "),n("eb-link",{attrs:{"tab-link":"#"+t.tabId.others,tabLinkActive:"others"===t.tabName,"icon-only":"",iconF7:"::people"}}),t._v(" "),n("eb-link",{attrs:{"tab-link":"#"+t.tabId.history,tabLinkActive:"history"===t.tabName,"icon-only":"",iconF7:"::stop"}})],1)],1)],1),t._v(" "),n("f7-tabs",{ref:"tabs"},[n("eb-tab-page-content",{attrs:{id:t.tabId.mine,tabActive:"mine"===t.tabName,"data-ref":"mine"},on:{"tab:show":function(e){t.tabName="mine"}}},[n("flowTab",{ref:"mine",attrs:{slot:"list",container:t.getContainer("mine")},slot:"list"})],1),t._v(" "),n("eb-tab-page-content",{attrs:{id:t.tabId.others,tabActive:"others"===t.tabName,"data-ref":"others"},on:{"tab:show":function(e){t.tabName="others"}}},[n("flowTab",{ref:"others",attrs:{slot:"list",container:t.getContainer("others")},slot:"list"})],1),t._v(" "),n("eb-tab-page-content",{attrs:{id:t.tabId.history,tabActive:"history"===t.tabName,"data-ref":"history"},on:{"tab:show":function(e){t.tabName="history"}}},[n("flowTab",{ref:"history",attrs:{slot:"list",container:t.getContainer("history")},slot:"list"})],1)],1)],1)}),[],!1,null,null,null).exports},621:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i});var a=n(233),r=n.n(a);const o={components:{flowTaskTab:n(862).Z},data:function(){var t=this.$f7route.query,e=t&&t.options?JSON.parse(t.options):{mode:"claimings"};return{options:e,layout:t&&t.layout,stats:{claimings:0,handlings:0},tabId:{claimings:r().prototype.$meta.util.nextId("tab"),handlings:r().prototype.$meta.util.nextId("tab"),completeds:r().prototype.$meta.util.nextId("tab")},tabName:e.mode}},computed:{pageTitle:function(){var t=this.tabName;return"claimings"===t?"".concat(this.$text("Claimings")):"handlings"===t?"".concat(this.$text("Handlings")):"completeds"===t?"".concat(this.$text("Completeds")):this.$text("Task")}},created:function(){},methods:{getContainer:function(t){return{options:{mode:t},layout:this.layout}},onStatsChange:function(t,e){this.stats[e]=t}}},i=(0,n(792).Z)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("eb-page",{attrs:{"page-content":!1,tabs:"","with-subnavbar":""}},[n("eb-navbar",{attrs:{title:t.pageTitle,"eb-back-link":"Back"}},[n("f7-subnavbar",[n("f7-toolbar",{attrs:{top:"",tabbar:""}},[n("eb-link",{attrs:{"tab-link":"#"+t.tabId.claimings,tabLinkActive:"claimings"===t.tabName,"icon-only":"",iconF7:"::play-arrow","badge-color":"red","icon-badge":t.stats.claimings,stats_params:{module:"a-flowtask",name:"taskClaimings"}},on:{stats_change:function(e){return t.onStatsChange(e,"claimings")}}}),t._v(" "),n("eb-link",{attrs:{"tab-link":"#"+t.tabId.handlings,tabLinkActive:"handlings"===t.tabName,"icon-only":"",iconF7:"::fast-forward","badge-color":"red","icon-badge":t.stats.handlings,stats_params:{module:"a-flowtask",name:"taskHandlings"}},on:{stats_change:function(e){return t.onStatsChange(e,"handlings")}}}),t._v(" "),n("eb-link",{attrs:{"tab-link":"#"+t.tabId.completeds,tabLinkActive:"completeds"===t.tabName,"icon-only":"",iconF7:"::stop"}})],1)],1)],1),t._v(" "),n("f7-tabs",{ref:"tabs"},[n("eb-tab-page-content",{attrs:{id:t.tabId.claimings,tabActive:"claimings"===t.tabName,"data-ref":"claimings"},on:{"tab:show":function(e){t.tabName="claimings"}}},[n("flowTaskTab",{ref:"claimings",attrs:{slot:"list",container:t.getContainer("claimings")},slot:"list"})],1),t._v(" "),n("eb-tab-page-content",{attrs:{id:t.tabId.handlings,tabActive:"handlings"===t.tabName,"data-ref":"handlings"},on:{"tab:show":function(e){t.tabName="handlings"}}},[n("flowTaskTab",{ref:"handlings",attrs:{slot:"list",container:t.getContainer("handlings")},slot:"list"})],1),t._v(" "),n("eb-tab-page-content",{attrs:{id:t.tabId.completeds,tabActive:"completeds"===t.tabName,"data-ref":"completeds"},on:{"tab:show":function(e){t.tabName="completeds"}}},[n("flowTaskTab",{ref:"completeds",attrs:{slot:"list",container:t.getContainer("completeds")},slot:"list"})],1)],1)],1)}),[],!1,null,null,null).exports},792:(t,e,n)=>{"use strict";function a(t,e,n,a,r,o,i,s){var u,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),a&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),i?(u=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(i)},c._ssrRegister=u):r&&(u=s?function(){r.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:r),u)if(c.functional){c._injectStyles=u;var l=c.render;c.render=function(t,e){return u.call(e),l(t,e)}}else{var f=c.beforeCreate;c.beforeCreate=f?[].concat(f,u):[u]}return{exports:t,options:c}}n.d(e,{Z:()=>a})},65:(t,e,n)=>{var a=n(450);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.id,a,""]]),a.locals&&(t.exports=a.locals),(0,n(159).Z)("9b6e4e10",a,!0,{})},159:(t,e,n)=>{"use strict";function a(t,e){for(var n=[],a={},r=0;r<e.length;r++){var o=e[r],i=o[0],s={id:t+":"+r,css:o[1],media:o[2],sourceMap:o[3]};a[i]?a[i].parts.push(s):n.push(a[i]={id:i,parts:[s]})}return n}n.d(e,{Z:()=>h});var r="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!r)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var o={},i=r&&(document.head||document.getElementsByTagName("head")[0]),s=null,u=0,c=!1,l=function(){},f=null,d="data-vue-ssr-id",m="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function h(t,e,n,r){c=n,f=r||{};var i=a(t,e);return p(i),function(e){for(var n=[],r=0;r<i.length;r++){var s=i[r];(u=o[s.id]).refs--,n.push(u)}for(e?p(i=a(t,e)):i=[],r=0;r<n.length;r++){var u;if(0===(u=n[r]).refs){for(var c=0;c<u.parts.length;c++)u.parts[c]();delete o[u.id]}}}}function p(t){for(var e=0;e<t.length;e++){var n=t[e],a=o[n.id];if(a){a.refs++;for(var r=0;r<a.parts.length;r++)a.parts[r](n.parts[r]);for(;r<n.parts.length;r++)a.parts.push(v(n.parts[r]));a.parts.length>n.parts.length&&(a.parts.length=n.parts.length)}else{var i=[];for(r=0;r<n.parts.length;r++)i.push(v(n.parts[r]));o[n.id]={id:n.id,refs:1,parts:i}}}}function b(){var t=document.createElement("style");return t.type="text/css",i.appendChild(t),t}function v(t){var e,n,a=document.querySelector("style["+d+'~="'+t.id+'"]');if(a){if(c)return l;a.parentNode.removeChild(a)}if(m){var r=u++;a=s||(s=b()),e=w.bind(null,a,r,!1),n=w.bind(null,a,r,!0)}else a=b(),e=k.bind(null,a),n=function(){a.parentNode.removeChild(a)};return e(t),function(a){if(a){if(a.css===t.css&&a.media===t.media&&a.sourceMap===t.sourceMap)return;e(t=a)}else n()}}var g,y=(g=[],function(t,e){return g[t]=e,g.filter(Boolean).join("\n")});function w(t,e,n,a){var r=n?"":a.css;if(t.styleSheet)t.styleSheet.cssText=y(e,r);else{var o=document.createTextNode(r),i=t.childNodes;i[e]&&t.removeChild(i[e]),i.length?t.insertBefore(o,i[e]):t.appendChild(o)}}function k(t,e){var n=e.css,a=e.media,r=e.sourceMap;if(a&&t.setAttribute("media",a),f.ssrId&&t.setAttribute(d,e.id),r&&(n+="\n/*# sourceURL="+r.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */"),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}},990:(t,e,n)=>{var a={"./flow.jsx":926,"./flowList.jsx":383,"./flowTaskAction/assigneesConfirmation.jsx":209,"./flowTaskAction/forward.jsx":758,"./flowTaskAction/substitute.jsx":510,"./flowTaskAtom.jsx":970,"./flowTaskList.jsx":506};function r(t){var e=o(t);return n(e)}function o(t){if(!n.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}r.keys=function(){return Object.keys(a)},r.resolve=o,t.exports=r,r.id=990},142:(t,e,n)=>{var a={"./flowTabs.vue":259,"./flowTaskTabs.vue":621};function r(t){var e=o(t);return n(e)}function o(t){if(!n.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}r.keys=function(){return Object.keys(a)},r.resolve=o,t.exports=r,r.id=142},233:t=>{"use strict";t.exports=window.Vue}},e={};function n(a){var r=e[a];if(void 0!==r)return r.exports;var o=e[a]={id:a,exports:{}};return t[a](o,o.exports,n),o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var a in e)n.o(e,a)&&!n.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var a={};(()=>{"use strict";var t;n.r(a),n.d(a,{default:()=>e}),n(65);const e={install:function(e,a){return t?console.error("already installed."):(t=e,a({routes:n(644).Z,store:n(81).Z(t),config:n(509).Z,locales:n(137).Z,components:n(690).Z}))}}})(),window["a-flowtask"]=a})();