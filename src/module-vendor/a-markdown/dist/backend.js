(()=>{var e={129:e=>{e.exports=e=>({})},194:(e,t,r)=>{function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o(e,t,r,n,o,a,c){try{var s=e[a](c),i=s.value}catch(e){return void r(e)}s.done?t(i):Promise.resolve(i).then(n,o)}const a=r(17),c=r(638),s=c("@zhennann/markdown"),i=c("@zhennann/markdown-it-block"),u=c("uuid");e.exports=e=>class{async render(t){var r,l=this;return(r=regeneratorRuntime.mark((function r(){var o,p,m,d,f,b,x,y,v,h,k,w,g,R,T,_,j,A,C,E,M,P;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o=t.host,p=t.content,m=t.locale,p){r.next=3;break}return r.abrupt("return","");case 3:d={},f={utils:{text:function(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(t=e.text).locale.apply(t,[m||e.app.config.i18n.defaultLocale].concat(n))},register:e=>{let t=e.params,r=e.content;const n="__markdown_block_placeholder__".concat(u.v4().replace(/-/g,""));return d[n]={params:t,content:r},n}}},b=s.create().use(i,f),x=b.render(p),r.t0=regeneratorRuntime.keys(d);case 8:if((r.t1=r.t0()).done){r.next=34;break}if(y=r.t1.value,v=d[y],h=v.params,p=v.content,k=h.split(":"),B=2,w=function(e){if(Array.isArray(e))return e}(S=k)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a=[],c=!0,s=!1;try{for(r=r.call(e);!(c=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{c||null==r.return||r.return()}finally{if(s)throw o}}return a}}(S,B)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(S,B)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),g=w[0],R=w[1],g&&R){r.next=14;break}throw new Error("Invalid Markdown Block: ".concat(h));case 14:if(T=e.app.meta.modules[g]){r.next=17;break}throw new Error("Module Not Found: ".concat(g));case 17:if(_=a.join(T.static.backend,"blocks/".concat(R,"/main")),e.app.meta.isProd&&(_+=".min"),j=c(_+=".js"),A=l._getHost({host:o,content:p,locale:m}),C=new j(A),E="",!C.render){r.next=28;break}return r.next=27,C.render();case 27:E=r.sent;case 28:M=encodeURIComponent(JSON5.stringify(p,null,2)),E='\n<div class="markdown-it-cabloy-block" data-block-params="'.concat(h,'" data-block-content="').concat(M,'">\n  ').concat(E,"\n</div>\n"),P=new RegExp(y),x=x.replace(P,E),r.next=8;break;case 34:return r.abrupt("return",x);case 35:case"end":return r.stop()}var S,B}),r)})),function(){var e=this,t=arguments;return new Promise((function(n,a){var c=r.apply(e,t);function s(e){o(c,n,a,s,i,"next",e)}function i(e){o(c,n,a,s,i,"throw",e)}s(void 0)}))})()}_getHost(t){let r=t.host,n=t.content,o=t.locale;return{$host:r,$content:n,$util:e.bean.util.hostUtil({locale:o||e.bean.util.getProperty(r,"atom.atomLanguage")})}}}},223:e=>{function t(e,t,r,n,o,a,c){try{var s=e[a](c),i=s.value}catch(e){return void r(e)}s.done?t(i):Promise.resolve(i).then(n,o)}function r(e){return function(){var r=this,n=arguments;return new Promise((function(o,a){var c=e.apply(r,n);function s(e){t(c,o,a,s,i,"next",e)}function i(e){t(c,o,a,s,i,"throw",e)}s(void 0)}))}}e.exports=e=>{class t extends e.meta.BeanBase{async update(e){return r(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()}async init(e){return r(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()}async test(){return r(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()}}return t}},313:(e,t,r)=>{const n=r(223),o=r(194);e.exports=e=>({"version.manager":{mode:"app",bean:n},markdown:{mode:"ctx",bean:o,global:!0}})},817:e=>{e.exports=e=>({})},971:e=>{e.exports={}},724:e=>{e.exports={}},995:e=>{e.exports={"Markdown Block":"Markdown区块"}},266:(e,t,r)=>{e.exports={"en-us":r(724),"zh-cn":r(995)}},326:e=>{e.exports=e=>({link:{type:"object",properties:{href:{type:"string",ebType:"text",ebTitle:"Link",format:"uri",notEmpty:!0},title:{type:"string",ebType:"text",ebTitle:"Description"}}},table:{type:"object",properties:{rowCount:{type:"number",ebType:"text",ebTitle:"RowCount",default:3,notEmpty:!0},columnCount:{type:"number",ebType:"text",ebTitle:"ColumnCount",default:3,notEmpty:!0}}}})},691:e=>{e.exports=e=>({})},312:(e,t,r)=>{const n=r(817),o=r(266),a=r(971);e.exports=e=>{const t=r(129)(e),c=r(313)(e),s=r(788)(e),i=r(691)(e),u=r(481)(e),l=r(700)(e),p=r(730)(e);return{aops:t,beans:c,routes:s,controllers:i,services:u,models:l,config:n,locales:o,errors:a,meta:p}}},730:(e,t,r)=>{e.exports=e=>({base:{atoms:{},resources:{block:{title:"Markdown Block"}}},validation:{validators:{link:{schemas:"link"},table:{schemas:"table"}},keywords:{},schemas:r(326)(e)}})},700:e=>{e.exports=e=>({})},788:e=>{e.exports=e=>[]},481:e=>{e.exports=e=>({})},638:e=>{"use strict";e.exports=require("require3")},17:e=>{"use strict";e.exports=require("path")}},t={},r=function r(n){var o=t[n];if(void 0!==o)return o.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,r),a.exports}(312);module.exports=r})();