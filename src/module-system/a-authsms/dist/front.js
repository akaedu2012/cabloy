window["a-authsms"]=function(t){var e={};function n(a){if(e[a])return e[a].exports;var o=e[a]={i:a,l:!1,exports:{}};return t[a].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(a,o,function(e){return t[e]}.bind(null,o));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=5)}([function(t,e,n){"use strict";function a(t,e,n,a,o,r,i,s){var c,u="function"==typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=n,u._compiled=!0),a&&(u.functional=!0),r&&(u._scopeId="data-v-"+r),i?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(i)},u._ssrRegister=c):o&&(c=s?function(){o.call(this,this.$root.$options.shadowRoot)}:o),c)if(u.functional){u._injectStyles=c;var l=u.render;u.render=function(t,e){return c.call(e),l(t,e)}}else{var d=u.beforeCreate;u.beforeCreate=d?[].concat(d,c):[c]}return{exports:t,options:u}}n.d(e,"a",(function(){return a}))},function(t,e,n){var a=n(15);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,n(4).default)("74e06fba",a,!0,{})},function(t,e,n){var a=n(17);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,n(4).default)("15afd4c4",a,!0,{})},function(t,e,n){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=function(t,e){var n=t[1]||"",a=t[3];if(!a)return n;if(e&&"function"==typeof btoa){var o=(i=a,s=btoa(unescape(encodeURIComponent(JSON.stringify(i)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(c," */")),r=a.sources.map((function(t){return"/*# sourceURL=".concat(a.sourceRoot||"").concat(t," */")}));return[n].concat(r).concat([o]).join("\n")}var i,s,c;return[n].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,a){"string"==typeof t&&(t=[[null,t,""]]);var o={};if(a)for(var r=0;r<this.length;r++){var i=this[r][0];null!=i&&(o[i]=!0)}for(var s=0;s<t.length;s++){var c=[].concat(t[s]);a&&o[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),e.push(c))}},e}},function(t,e,n){"use strict";function a(t,e){for(var n=[],a={},o=0;o<e.length;o++){var r=e[o],i=r[0],s={id:t+":"+o,css:r[1],media:r[2],sourceMap:r[3]};a[i]?a[i].parts.push(s):n.push(a[i]={id:i,parts:[s]})}return n}n.r(e),n.d(e,"default",(function(){return p}));var o="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!o)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var r={},i=o&&(document.head||document.getElementsByTagName("head")[0]),s=null,c=0,u=!1,l=function(){},d=null,f="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function p(t,e,n,o){u=n,d=o||{};var i=a(t,e);return h(i),function(e){for(var n=[],o=0;o<i.length;o++){var s=i[o];(c=r[s.id]).refs--,n.push(c)}e?h(i=a(t,e)):i=[];for(o=0;o<n.length;o++){var c;if(0===(c=n[o]).refs){for(var u=0;u<c.parts.length;u++)c.parts[u]();delete r[c.id]}}}}function h(t){for(var e=0;e<t.length;e++){var n=t[e],a=r[n.id];if(a){a.refs++;for(var o=0;o<a.parts.length;o++)a.parts[o](n.parts[o]);for(;o<n.parts.length;o++)a.parts.push(v(n.parts[o]));a.parts.length>n.parts.length&&(a.parts.length=n.parts.length)}else{var i=[];for(o=0;o<n.parts.length;o++)i.push(v(n.parts[o]));r[n.id]={id:n.id,refs:1,parts:i}}}}function m(){var t=document.createElement("style");return t.type="text/css",i.appendChild(t),t}function v(t){var e,n,a=document.querySelector('style[data-vue-ssr-id~="'+t.id+'"]');if(a){if(u)return l;a.parentNode.removeChild(a)}if(f){var o=c++;a=s||(s=m()),e=C.bind(null,a,o,!1),n=C.bind(null,a,o,!0)}else a=m(),e=x.bind(null,a),n=function(){a.parentNode.removeChild(a)};return e(t),function(a){if(a){if(a.css===t.css&&a.media===t.media&&a.sourceMap===t.sourceMap)return;e(t=a)}else n()}}var b,g=(b=[],function(t,e){return b[t]=e,b.filter(Boolean).join("\n")});function C(t,e,n,a){var o=n?"":a.css;if(t.styleSheet)t.styleSheet.cssText=g(e,o);else{var r=document.createTextNode(o),i=t.childNodes;i[e]&&t.removeChild(i[e]),i.length?t.insertBefore(r,i[e]):t.appendChild(r)}}function x(t,e){var n=e.css,a=e.media,o=e.sourceMap;if(a&&t.setAttribute("media",a),d.ssrId&&t.setAttribute("data-vue-ssr-id",e.id),o&&(n+="\n/*# sourceURL="+o.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}},function(t,e,n){"use strict";n.r(e);var a;n(6);e.default={install:function(t,e){return a?console.error("already installed."):(a=t,e({routes:n(8).default,store:n(10).default(a),config:n(11).default,locales:n(12).default,components:n(18).default}))}}},function(t,e,n){var a=n(7);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,n(4).default)("33f4524a",a,!0,{})},function(t,e,n){(e=n(3)(!0)).push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"module.less"}]),t.exports=e},function(t,e,n){"use strict";function a(t){return n(9)("./".concat(t,".vue")).default}n.r(e),e.default=[{path:"signup",component:a("signup")},{path:"mobileVerify",component:a("mobileVerify")}]},function(t,e,n){var a={"./mobileVerify.vue":19,"./signup.vue":20};function o(t){var e=r(t);return n(e)}function r(t){if(!n.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}o.keys=function(){return Object.keys(a)},o.resolve=r,t.exports=o,o.id=9},function(t,e,n){"use strict";n.r(e),e.default=function(t){return{state:{},getters:{},mutations:{},actions:{}}}},function(t,e,n){"use strict";n.r(e),e.default={sendCode:{counter:3}}},function(t,e,n){"use strict";n.r(e),e.default={"zh-cn":n(13).default}},function(t,e,n){"use strict";n.r(e),e.default={"Captcha Code":"验证码","Mobile Verification":"手机号认证","Phone Number":"电话号码","SMS Verification":"短信认证","SMS Verification Code":"短信认证码","Remember Me":"记住我","Sign In":"登录","Sign Up":"注册","Send Code":"发送认证码","Resend in %ds":"重新发送(%ds)","Verify Now":"现在认证","Associate Account":"关联账户","Associate Now":"现在关联"}},function(t,e,n){"use strict";var a=n(1);n.n(a).a},function(t,e,n){(e=n(3)(!0)).push([t.i,".text-smaller[data-v-cade6a7a] {\n  font-size: smaller !important;\n}\n","",{version:3,sources:["/Users/yangjian/Documents/data/cabloy/egg-born-demo/src/module/a-authsms/front/src/components/signin.vue?vue&type=style&index=0&id=cade6a7a&lang=less&scoped=true&","signin.vue"],names:[],mappings:"AAiFA;EACE,6BAAA;AChFF",file:"signin.vue?vue&type=style&index=0&id=cade6a7a&lang=less&scoped=true&",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.text-smaller {\n  font-size: smaller !important;\n}\n\n",".text-smaller {\n  font-size: smaller !important;\n}\n"]}]),t.exports=e},function(t,e,n){"use strict";var a=n(2);n.n(a).a},function(t,e,n){(e=n(3)(!0)).push([t.i,"\n.captcha[data-v-3cf50a24] {\n  white-space: nowrap;\n}\n\n","",{version:3,sources:["captcha.vue?vue&type=style&index=0&id=3cf50a24&scoped=true&lang=css&"],names:[],mappings:";AACA;EACE,mBAAmB;AACrB",file:"captcha.vue?vue&type=style&index=0&id=3cf50a24&scoped=true&lang=css&",sourcesContent:["\n.captcha[data-v-3cf50a24] {\n  white-space: nowrap;\n}\n\n"]}]),t.exports=e},function(t,e,n){"use strict";n.r(e);var a={meta:{global:!1},data:function(){return{data:{mobile:null,rememberMe:!1},captcha:{token:null},moduleCaptcha:null}},computed:{captchaContext:function(){return{mobile:this.data.mobile}}},created:function(){var t=this;this.$meta.module.use("a-captcha",(function(e){t.$options.components.captchaContainer=e.options.components.captchaContainer,t.moduleCaptcha=e}))},methods:{onPerformValidate:function(){var t=this;return this.$api.post("auth/signin",{data:this.data,captcha:this.$refs.captchaContainer.captchaData({token:this.captcha.token})}).then((function(){t.$meta.vueApp.reload({echo:!0})}))},signIn:function(){return this.$refs.validate.perform()},onSubmit:function(){this.$refs.buttonSubmit.onClick()}}},o=(n(14),n(0)),r=Object(o.a)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("f7-card",[n("f7-card-content",[n("eb-validate",{ref:"validate",attrs:{onPerform:t.onPerformValidate}},[n("eb-list",{attrs:{form:"","no-hairlines-md":""},on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[n("eb-list-input",{attrs:{label:t.$text("Phone Number"),"floating-label":"",type:"text","clear-button":"",placeholder:t.$text("Phone Number"),dataPath:"mobile"},model:{value:t.data.mobile,callback:function(e){t.$set(t.data,"mobile",e)},expression:"data.mobile"}},[n("f7-icon",{attrs:{slot:"media",material:"call"},slot:"media"})],1),t._v(" "),n("eb-list-input",{attrs:{label:t.$text("SMS Verification Code"),"floating-label":"",type:"text","clear-button":"",placeholder:t.$text("SMS Verification Code"),dataPath:"captcha/token"},model:{value:t.captcha.token,callback:function(e){t.$set(t.captcha,"token",e)},expression:"captcha.token"}},[n("f7-icon",{attrs:{slot:"media"},slot:"media"}),t._v(" "),n("div",{attrs:{slot:"content"},slot:"content"},[t.moduleCaptcha?[n("captchaContainer",{ref:"captchaContainer",attrs:{module:"a-authsms",sceneName:"signin",context:t.captchaContext}})]:t._e()],2)],1),t._v(" "),n("f7-list-item",[n("f7-icon",{attrs:{slot:"media"},slot:"media"}),t._v(" "),n("span",{staticClass:"text-color-gray"},[t._v(t._s(t.$text("Remember Me")))]),t._v(" "),n("eb-toggle",{attrs:{dataPath:"rememberMe"},model:{value:t.data.rememberMe,callback:function(e){t.$set(t.data,"rememberMe",e)},expression:"data.rememberMe"}})],1),t._v(" "),n("eb-list-button",{ref:"buttonSubmit",attrs:{onPerform:t.signIn}},[t._v(t._s(t.$text("Sign In")))])],1)],1)],1),t._v(" "),n("f7-card-footer",[n("div"),t._v(" "),n("eb-link",{staticClass:"text-smaller",attrs:{"eb-href":"/a/authsms/signup","eb-target":"_self"}},[t._v(t._s(t.$text("Sign Up")))])],1)],1)],1)}),[],!1,null,"cade6a7a",null).exports,i={meta:{global:!1},props:{module:{type:String},sceneName:{type:String},context:{type:Object},providerInstance:{type:Object}},data:function(){return{sendTimer:0,sendTimerCounter:0}},computed:{buttonDisabled:function(){return!!this.sendTimer||!this.context.mobile}},created:function(){},methods:{onPerformSend:function(){var t=this;if(!this.sendTimer)return this.$api.post("captcha/sendCode",{providerInstanceId:this.providerInstance.providerInstanceId,context:this.context}).then((function(){t._setTimer(!0)}))},getSendText:function(){return this.sendTimer?this.$text("Resend in %ds",this.sendTimerCounter):this.$text("Send Code")},_setTimer:function(t){var e=this;t?(this._setTimer(!1),this.sendTimerCounter=this.$config.sendCode.counter,this.sendTimer=window.setInterval((function(){0==--e.sendTimerCounter&&e._setTimer(!1)}),1e3)):this.sendTimer&&(window.clearInterval(this.sendTimer),this.sendTimer=0)}}},s=(n(16),Object(o.a)(i,(function(){var t=this.$createElement;return(this._self._c||t)("eb-button",{staticClass:"captcha",attrs:{disabled:this.buttonDisabled,onPerform:this.onPerformSend}},[this._v(this._s(this.getSendText()))])}),[],!1,null,"3cf50a24",null).exports);e.default={signin:r,captcha:s}},function(t,e,n){"use strict";n.r(e);var a={data:function(){return{data:null,captcha:{token:null},moduleCaptcha:null}},computed:{captchaContext:function(){return{mobile:this.data.mobile}}},created:function(){var t=this,e=this.$store.state.auth.user.agent;this.data={userName:e.userName,email:e.email},this.$meta.module.use("a-captcha",(function(e){t.$options.components.captchaContainer=e.options.components.captchaContainer,t.moduleCaptcha=e}))},methods:{onPerformValidate:function(){var t=this;return this.$api.post("auth/mobileVerify",{data:this.data,captcha:this.$refs.captchaContainer.captchaData({token:this.captcha.token})}).then((function(){t.$meta.vueApp.reload({echo:!0})}))},onPerformOk:function(){return this.$refs.validate.perform()},onSubmit:function(){this.$refs.buttonSubmit.onClick()}}},o=n(0),r=Object(o.a)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("eb-page",[n("eb-navbar",{attrs:{large:"",largeTransparent:"",title:t.$text("Mobile Verification"),"eb-back-link":"Back"}}),t._v(" "),n("f7-block",[n("eb-validate",{ref:"validate",attrs:{auto:!1,data:t.data,params:{validator:"mobileVerify"},onPerform:t.onPerformValidate}},[n("eb-list",{attrs:{form:"","no-hairlines-md":""},on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[n("eb-list-item-validate",{attrs:{dataKey:"userName"}}),t._v(" "),n("eb-list-item-validate",{attrs:{dataKey:"mobile"}}),t._v(" "),n("eb-list-input",{attrs:{label:t.$text("SMS Verification Code"),"floating-label":"",type:"text","clear-button":"",placeholder:t.$text("SMS Verification Code"),dataPath:"captcha/token"},model:{value:t.captcha.token,callback:function(e){t.$set(t.captcha,"token",e)},expression:"captcha.token"}},[n("div",{attrs:{slot:"content"},slot:"content"},[t.moduleCaptcha?[n("captchaContainer",{ref:"captchaContainer",attrs:{module:"a-authsms",sceneName:"mobileVerify",context:t.captchaContext}})]:t._e()],2)]),t._v(" "),n("f7-list-item",{attrs:{divider:""}},[n("eb-button",{ref:"buttonSubmit",attrs:{onPerform:t.onPerformOk}},[t._v(t._s(t.$text("Verify Now")))])],1)],1)],1)],1)],1)}),[],!1,null,"0cdbe410",null);e.default=r.exports},function(t,e,n){"use strict";n.r(e);var a={meta:{global:!1},data:function(){return{state:this.$f7route.query.state||"login",returnTo:this.$f7route.query.returnTo,data:{userName:null,realName:null,mobile:null},captcha:{tokenCode:null,token:null},moduleCaptcha:null,userNameReadOnly:!1}},computed:{captchaContext:function(){return{mobile:this.data.mobile}}},created:function(){var t=this;if("associate"===this.state){var e=this.$store.state.auth.user.agent;this.data.userName=e.userName,this.data.realName=e.realName,this.data.mobile=e.mobile,this.data.userName&&-1===this.data.userName.indexOf("__")&&(this.userNameReadOnly=!0)}this.$meta.module.use("a-captcha",(function(e){t.$options.components.captchaContainer=e.options.components.captchaContainer,t.moduleCaptcha=e}))},methods:{getPageTitle:function(){return"associate"===this.state?this.$text("Associate Account"):this.$text("Sign Up")},getButtonText:function(){return"associate"===this.state?this.$text("Associate Now"):this.$text("Sign Up")},onSchemaReady:function(t){this.userNameReadOnly&&(t.properties.userName.ebReadOnly=!0)},onPerformValidate:function(){var t=this;return this.$api.post("auth/signup",{state:this.state,data:this.data,captchaCode:this.$refs.captchaContainerCode.captchaData({token:this.captcha.tokenCode}),captcha:this.$refs.captchaContainer.captchaData({token:this.captcha.token})}).then((function(){var e;t.returnTo&&(e=t.$meta.util.parseHash(t.returnTo)),t.$meta.vueApp.reload({echo:!0,hash:e})}))},signUp:function(){return this.$refs.validate.perform()},onSubmit:function(){this.$refs.buttonSubmit.onClick()}}},o=n(0),r=Object(o.a)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("eb-page",[n("eb-navbar",{attrs:{large:"",largeTransparent:"",title:t.getPageTitle(),"eb-back-link":"Back"}}),t._v(" "),n("f7-block",[n("eb-validate",{ref:"validate",attrs:{auto:!1,data:t.data,params:{validator:"signup"},onPerform:t.onPerformValidate},on:{"schema:ready":t.onSchemaReady}},[n("eb-list",{attrs:{form:"","no-hairlines-md":""},on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[n("eb-list-item-validate",{attrs:{dataKey:"userName"}}),t._v(" "),n("eb-list-item-validate",{attrs:{dataKey:"realName"}}),t._v(" "),n("eb-list-item-validate",{attrs:{dataKey:"mobile"}}),t._v(" "),n("eb-list-input",{attrs:{label:t.$text("Captcha Code"),"floating-label":"",type:"text","clear-button":"",placeholder:t.$text("Captcha Code"),dataPath:"captcha/tokenCode"},model:{value:t.captcha.tokenCode,callback:function(e){t.$set(t.captcha,"tokenCode",e)},expression:"captcha.tokenCode"}},[n("div",{attrs:{slot:"content"},slot:"content"},[t.moduleCaptcha?[n("captchaContainer",{ref:"captchaContainerCode",attrs:{module:"a-authsms",sceneName:"signupCode"}})]:t._e()],2)]),t._v(" "),n("eb-list-input",{attrs:{label:t.$text("SMS Verification Code"),"floating-label":"",type:"text","clear-button":"",placeholder:t.$text("SMS Verification Code"),dataPath:"captcha/token"},model:{value:t.captcha.token,callback:function(e){t.$set(t.captcha,"token",e)},expression:"captcha.token"}},[n("div",{attrs:{slot:"content"},slot:"content"},[t.moduleCaptcha?[n("captchaContainer",{ref:"captchaContainer",attrs:{module:"a-authsms",sceneName:"signup",context:t.captchaContext}})]:t._e()],2)]),t._v(" "),n("f7-list-item",{attrs:{divider:""}},[n("eb-button",{ref:"buttonSubmit",attrs:{onPerform:t.signUp}},[t._v(t._s(t.getButtonText()))])],1)],1)],1)],1)],1)}),[],!1,null,"436d0407",null);e.default=r.exports}]);