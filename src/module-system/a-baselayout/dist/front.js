window["a-baselayout"]=function(t){var e={};function a(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,a),r.l=!0,r.exports}return a.m=t,a.c=e,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(n,r,function(e){return t[e]}.bind(null,r));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s=1)}([function(t,e){t.exports=window.Vue},function(t,e,a){"use strict";a.r(e);var n;a(2);e.default={install:function(t,e){return n?console.error("already installed."):(n=t,e({routes:a(5).default,store:a(9).default(n),config:a(10).default,locales:a(11).default,components:a(14).default,mixins:a(13).default}))}}},function(t,e,a){var n=a(3);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,a(15).default)("48256719",n,!0,{})},function(t,e,a){(e=a(4)(!0)).push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"module.less"}]),t.exports=e},function(t,e,a){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var a=function(t,e){var a=t[1]||"",n=t[3];if(!n)return a;if(e&&"function"==typeof btoa){var r=(i=n,s=btoa(unescape(encodeURIComponent(JSON.stringify(i)))),l="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(l," */")),o=n.sources.map((function(t){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(t," */")}));return[a].concat(o).concat([r]).join("\n")}var i,s,l;return[a].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(a,"}"):a})).join("")},e.i=function(t,a,n){"string"==typeof t&&(t=[[null,t,""]]);var r={};if(n)for(var o=0;o<this.length;o++){var i=this[o][0];null!=i&&(r[i]=!0)}for(var s=0;s<t.length;s++){var l=[].concat(t[s]);n&&r[l[0]]||(a&&(l[2]?l[2]="".concat(a," and ").concat(l[2]):l[2]=a),e.push(l))}},e}},function(t,e,a){"use strict";var n;a.r(e),e.default=[{path:"listLayoutFilter",component:(n="listLayoutFilter",a(7)("./".concat(n,".jsx")).default)}]},function(t,e){function a(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}a.keys=function(){return[]},a.resolve=a,t.exports=a,a.id=6},function(t,e,a){var n={"./listLayoutFilter.jsx":8};function r(t){var e=o(t);return a(e)}function o(t){if(!a.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}r.keys=function(){return Object.keys(n)},r.resolve=o,t.exports=r,r.id=7},function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n).a.prototype.$meta.module.get("a-components").options.mixins.ebPageContext;e.default={mixins:[r],data:function(){return{immediate:!0}},computed:{pageTitle:function(){return this.$text("Filter")},filterComponentInstance:function(){return this.$refs.filter&&this.$refs.filter.getComponentInstance()}},created:function(){this.immediate=this.contextParams.immediate},methods:{onPerformSearch:function(){this.filterComponentInstance&&this.filterComponentInstance.onPerformSearch()},_getFilterComponentOptions:function(){return{props:{layoutManager:this.contextParams.layoutManager,filterConfig:this.contextParams.filterConfig,filterContainer:this}}},_renderNavbar:function(){var t=this.$createElement;return t("eb-navbar",{attrs:{title:this.pageTitle,"eb-back-link":"Back"}},[t("f7-nav-right",[!this.immediate&&t("eb-link",{ref:"buttonSubmit",attrs:{iconMaterial:"search"},props:{onPerform:this.onPerformSearch}})])])}},render:function(){var t,e=arguments[0];if(this.contextParams){var a=this.contextParams.filterConfig;t=e("eb-component",{ref:"filter",attrs:{module:a.component.module,name:a.component.name,options:this._getFilterComponentOptions()}})}return e("eb-page",[this._renderNavbar(),t])}}},function(t,e,a){"use strict";a.r(e),e.default=function(t){return{state:{},getters:{},mutations:{},actions:{}}}},function(t,e,a){"use strict";a.r(e),e.default={}},function(t,e,a){"use strict";a.r(e),e.default={"zh-cn":a(12).default}},function(t,e,a){"use strict";a.r(e),e.default={Filter:"筛选",Stage:"阶段"}},function(t,e,a){"use strict";a.r(e),e.default={}},function(t,e,a){"use strict";function n(t,e,a,n,r,o,i){try{var s=t[o](i),l=s.value}catch(t){return void a(t)}s.done?e(l):Promise.resolve(l).then(n,r)}a.r(e);var r={meta:{global:!1},props:{layoutManager:{type:Object},layoutConfig:{type:Object}},data:function(){return{items:[]}},created:function(){this.layoutManager.container.atomClass&&"select"!==this.layoutManager.container.scene&&"selecting"!==this.layoutManager.container.scene&&(this.layoutManager.subnavbar.enable=!0,this.layoutManager.bulk_loadActions())},methods:{onPageRefresh:function(t){this.$refs.loadMore.reload(t)},onPageInfinite:function(){this.$refs.loadMore.loadMore()},onPageClear:function(){this.$refs.loadMore.clear()},onLoadClear:function(t){this.items=[],this.layoutManager.bulk.selectedAtoms=[],t()},onLoadMore:function(t){var e,a=this;return(e=regeneratorRuntime.mark((function e(){var n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.index,(r=a.layoutManager.base_prepareSelectParams()).options.page={index:n},e.next=5,a.$api.post("/a/base/atom/select",r);case 5:return o=e.sent,a.items=a.items.concat(o.list),e.abrupt("return",o);case 8:case"end":return e.stop()}}),e)})),function(){var t=this,a=arguments;return new Promise((function(r,o){var i=e.apply(t,a);function s(t){n(i,r,o,s,l,"next",t)}function l(t){n(i,r,o,s,l,"throw",t)}s(void 0)}))})()},getBlockComponentOptions:function(t){var e=t.blockConfig;return{props:{layoutManager:this.layoutManager,layout:this,blockConfig:e}}},getItems:function(){return this.items},_renderBlock:function(t){var e=t.blockName,a=this.$createElement,n=this.layoutConfig.blocks[e];return n?a("eb-component",{attrs:{module:n.component.module,name:n.component.name,options:this.getBlockComponentOptions({blockConfig:n})}}):null},_renderLoadMore:function(){return(0,this.$createElement)("eb-load-more",{ref:"loadMore",props:{onLoadClear:this.onLoadClear,onLoadMore:this.onLoadMore},attrs:{autoInit:"search"!==this.layoutManager.container.scene}})}},render:function(){var t=arguments[0];return t("div",[this._renderBlock({blockName:"items"}),this._renderLoadMore()])}},o={meta:{global:!1},props:{scene:{type:String},mode:{type:String},atomClass:{type:Object},where:{type:Object},params:{type:Object}},data:function(){return{}},created:function(){},methods:{}},i=a(0),s=a.n(i),l={meta:{global:!1},mixins:[s.a.prototype.$meta.module.get("a-base").options.mixins.ebAtomClasses],props:{layoutManager:{type:Object},filterConfig:{type:Object},filterContainer:{type:Object}},data:function(){return{form:this.$meta.util.getProperty(this.layoutManager,"filter.data.form")||{atomName:null,star:this.layoutManager.container.options&&this.layoutManager.container.options.star||0,label:this.layoutManager.container.options&&this.layoutManager.container.options.label||0,stage:this.layoutManager.container.options&&this.layoutManager.container.options.stage||"archive",atomClass:null},formAtomClass:this.$meta.util.getProperty(this.layoutManager,"filter.data.formAtomClass")||{},validateParams:null}},computed:{userLabels:function(){var t=this.$store.getters["a/base/userLabels"];if(!t)return null;var e=[{title:"",value:0}];for(var a in t)e.push({title:t[a].text,value:a});return e},atomClass:function(){return this.form.atomClass||this.layoutManager.container.atomClass},atomClassTitle:function(){if(!this.atomClass)return"";if(this.atomClass.title)return this.atomClass.title;var t=this.getAtomClass(this.atomClass);return t?t.titleLocale:""},stages:function(){for(var t=[],e=0,a=["draft","archive","history"];e<a.length;e++){var n=a[e];t.push({title:n.replace(n[0],n[0].toUpperCase()),value:n})}return t}},watch:{form:{handler:function(){this.onFilterChanged()},deep:!0},formAtomClass:{handler:function(){this.onFilterChanged()},deep:!0}},created:function(){this.$store.dispatch("a/base/getLabels"),this.atomClassChanged()},methods:{atomClassChanged:function(){var t=this;this.validateParams=null;var e=this.atomClass;e&&this.$meta.module.use(e.module,(function(){t.$api.post("/a/base/atomClass/validatorSearch",{atomClass:{module:e.module,atomClassName:e.atomClassName}}).then((function(e){t.validateParams={module:e.module,validator:e.validator}}))}))},onSelectAtomClass:function(){var t=this;this.$view.navigate("/a/base/atom/selectAtomClass",{target:"_self",context:{params:{atomClass:this.atomClass,optional:!0},callback:function(e,a){200===e&&t.form.atomClass!==a&&(t.form.atomClass=a,t.formAtomClass={},t.atomClassChanged())}}})},onFilterChanged:function(t){(t||this.filterContainer.immediate)&&this.onFilterDebounce()},onFilterDebounce:s.a.prototype.$meta.util.debounce((function(){this.layoutManager.filter_onChanged({form:this.form,formAtomClass:this.formAtomClass})}),300),onPerformSearch:function(){this.onFilterChanged(!0),this.$f7router.back()},onFormSubmit:function(){this.filterContainer.immediate||this.onPerformSearch()},_renderForm:function(){var t=this,e=this.$createElement;return e("eb-list",{attrs:{form:!0,"inline-labels":!0,"no-hairlines-md":!0},on:{submit:this.onFormSubmit}},[e("eb-list-input",{attrs:{label:this.$text("Atom Name"),type:"text","clear-button":!0,placeholder:this.$text("Atom Name")},model:{value:t.form.atomName,callback:function(e){t.$set(t.form,"atomName",e)}}}),e("f7-list-item",{attrs:{title:this.$text("Star")}},[e("eb-toggle",{slot:"after",model:{value:t.form.star,callback:function(e){t.$set(t.form,"star",e)}}})]),e("f7-list-item",{attrs:{smartSelect:!0,title:this.$text("Label"),smartSelectParams:{openIn:"page",closeOnSelect:!0}}},[e("eb-select",{attrs:{name:"label",options:this.userLabels},model:{value:t.form.label,callback:function(e){t.$set(t.form,"label",e)}}})]),e("f7-list-item",{attrs:{smartSelect:!0,title:this.$text("Stage"),smartSelectParams:{openIn:"sheet",closeOnSelect:!0}}},[e("eb-select",{attrs:{name:"stage",options:this.stages},model:{value:t.form.stage,callback:function(e){t.$set(t.form,"stage",e)}}})]),e("f7-list-item",{attrs:{divider:!0}}),!this.layoutManager.container.atomClass&&e("f7-list-item",{attrs:{title:this.$text("Atom Class"),link:"#"},on:{click:this.onSelectAtomClass}},[e("div",{slot:"after"},[this.atomClassTitle])])])},_renderFormAtomClass:function(){var t=this.$createElement;return this.validateParams?t("eb-validate",{ref:"validate",attrs:{auto:!0,data:this.formAtomClass,params:this.validateParams},on:{submit:this.onFormSubmit}}):null}},render:function(){var t=arguments[0];return t("div",[this._renderForm(),this._renderFormAtomClass()])}},u={meta:{global:!1},props:{layoutManager:{type:Object},blockConfig:{type:Object}},data:function(){return{}},created:function(){},methods:{onPerformFilter:function(){this.layoutManager.filter_onPerform()},onPerformAtomOrders:function(t){this.layoutManager.order_onPerformPopover(t.currentTarget)},onPerformActionsCreate:function(t){this.layoutManager.create_onPerformActions(t.currentTarget)},_renderActionsCreate:function(){var t=this,e=this.$createElement;if(!this.layoutManager.container.atomClass&&this.layoutManager.create_showPopoverActions)return e("eb-link",{attrs:{iconMaterial:"add"},props:{onPerform:function(e){return t.onPerformActionsCreate(e)}}})},_renderActionFilter:function(){var t=this.$createElement;return this.layoutManager.container.params&&!0===this.layoutManager.container.params.disableFilter?null:t("eb-link",{attrs:{iconMaterial:"search"},props:{onPerform:this.onPerformFilter}})}},render:function(){var t=this,e=arguments[0];return e("f7-nav-right",[this._renderActionsCreate(),e("eb-link",{attrs:{iconMaterial:"sort"},props:{onPerform:function(e){return t.onPerformAtomOrders(e)}}}),this._renderActionFilter()])}};function c(t,e){var a;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=function(t,e){if(!t)return;if("string"==typeof t)return m(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return m(t,e)}(t))||e&&t&&"number"==typeof t.length){a&&(t=a);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){a=t[Symbol.iterator]()},n:function(){var t=a.next();return i=t.done,t},e:function(t){s=!0,o=t},f:function(){try{i||null==a.return||a.return()}finally{if(s)throw o}}}}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}var f={meta:{global:!1},mixins:[s.a.prototype.$meta.module.get("a-base").options.mixins.ebAtomActions],props:{layoutManager:{type:Object},blockConfig:{type:Object}},data:function(){return{}},created:function(){},methods:{onSelectingBulkSwitch:function(){this.layoutManager.bulk_onSelectingSwitch()},onSelectingBulkChecking:function(){this.layoutManager.bulk_onSelectingChecking()},onAction:function(t,e){this.$f7.tooltip.hide(t.currentTarget);var a=this.getAction(e);if(a){a=this.$utils.extend({},a,{targetEl:t.target});var n={atomClassId:e.atomClassId,module:e.module,atomClassName:e.atomClassName,atomClassIdParent:e.atomClassIdParent};if("create"===a.name){var r=this.$meta.util.getProperty(this.layoutManager.container.params,"createParams");r&&(n=this.$utils.extend({},n,r))}return this.$meta.util.performAction({ctx:this,action:a,item:n})}},_renderActionsLeft:function(){var t=this.$createElement,e=[],a=this.layoutManager.base_getItems();(a.length>0||this.layoutManager.bulk.selecting)&&e.push(t("eb-link",{attrs:{iconMaterial:"grading"},props:{onPerform:this.onSelectingBulkSwitch}}));var n=this.layoutManager.bulk.selectedAtoms;return this.layoutManager.bulk.selecting&&e.push(t("eb-link",{attrs:{iconMaterial:n.length>=a.length?"check_box_outline_blank":"check_box",iconBadge:n.length},props:{onPerform:this.onSelectingBulkChecking}})),t("div",{class:"actions-block actions-block-left"},[e])},_renderActionsRight:function(){var t=this,e=this.$createElement,a=[],n=this.layoutManager.bulk.selectedAtoms;if(this.layoutManager.bulk.actions&&this.actionsAll){var r,o=c(this.layoutManager.bulk.actions);try{var i=function(){var o=r.value,i=t.getAction(o);(void 0===i.select||null===i.select||!0===i.select&&n.length>0||!1===i.select&&!t.layoutManager.bulk.selecting)&&a.push(e("eb-link",{attrs:{iconMaterial:i.icon&&i.icon.material,tooltip:i.icon&&i.titleLocale},props:{onPerform:function(e){return t.onAction(e,o)}}},[!i.icon&&i.titleLocale]))};for(o.s();!(r=o.n()).done;)i()}catch(t){o.e(t)}finally{o.f()}}return e("div",{class:"actions-block actions-block-right"},[a])}},render:function(){var t=arguments[0];return t("f7-subnavbar",[t("div",{class:"atom-list-subnavbar-container"},[this._renderActionsLeft(),this._renderActionsRight()])])}};function d(t,e){var a;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=function(t,e){if(!t)return;if("string"==typeof t)return h(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return h(t,e)}(t))||e&&t&&"number"==typeof t.length){a&&(t=a);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){a=t[Symbol.iterator]()},n:function(){var t=a.next();return i=t.done,t},e:function(t){s=!0,o=t},f:function(){try{i||null==a.return||a.return()}finally{if(s)throw o}}}}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}var p={meta:{global:!1},mixins:[s.a.prototype.$meta.module.get("a-base").options.mixins.ebAtomActions],props:{layoutManager:{type:Object},layout:{type:Object},blockConfig:{type:Object}},data:function(){return{radioName:s.a.prototype.$meta.util.nextId("radio")}},mounted:function(){this.$meta.eventHub.$on("atom:star",this.onStarChanged),this.$meta.eventHub.$on("atom:labels",this.onLabelsChanged),this.$meta.eventHub.$on("atom:action",this.onActionChanged)},beforeDestroy:function(){this.$meta.eventHub.$off("atom:star",this.onStarChanged),this.$meta.eventHub.$off("atom:labels",this.onLabelsChanged),this.$meta.eventHub.$off("atom:action",this.onActionChanged)},methods:{onItemClick:function(t,e){if(!this.layoutManager.bulk.selecting)return this.onAction(t,e,{module:e.module,atomClassName:e.atomClassName,name:"read"})},onSwipeoutOpened:function(t,e){e._actions||this.$api.post("/a/base/atom/actions",{key:{atomId:e.atomId},basic:!0}).then((function(t){s.a.set(e,"_actions",t)}))},onLabel:function(t,e){var a=this;this.layoutManager.base_user.anonymous?this.$view.dialog.confirm(this.$text("Please Sign In")).then((function(){a.$meta.vueLayout.openLogin()})):(this.$view.navigate("/a/base/atom/labels?atomId=".concat(e.atomId),{target:"_self"}),this.$meta.util.swipeoutClose(t.target))},onStarSwitch:function(t,e){var a=e.star?0:1;return this._onStarSwitch(t,e,a,"swipeoutClose")},onAction:function(t,e,a){var n=this,r=this.getAction(a);if(r)return this.$meta.util.performAction({ctx:this,action:r,item:e}).then((function(){n.$meta.util.swipeoutClose(t.target)}))},onStarChanged:function(t){var e=this.layout.items.findIndex((function(e){return e.atomId===t.key.atomId}));-1!==e&&(this.layout.items[e].star=t.star)},onLabelsChanged:function(t){var e=this.layout.items.findIndex((function(e){return e.atomId===t.key.atomId}));-1!==e&&(this.layout.items[e].labels=JSON.stringify(t.labels))},onActionChanged:function(t){var e=this,a=t.key,n=t.action;if(1!==n.menu||"create"!==n.action){var r=this.layout.items.findIndex((function(t){return t.atomId===a.atomId}));"delete"!==n.name?-1!==r&&this.$api.post("/a/base/atom/read",{key:a}).then((function(t){s.a.set(e.layout.items,r,t)})):-1!==r&&this.layout.items.splice(r,1)}},onItemChange:function(t,e){this.layoutManager.bulk_onItemChange(t,e)},_onStarSwitch:function(t,e,a,n){var r=this;if(!this.layoutManager.base_user.anonymous){var o={atomId:e.atomId,itemId:e.itemId};return this.$api.post("/a/base/atom/star",{key:o,atom:{star:a}}).then((function(e){r.$meta.eventHub.$emit("atom:star",{key:o,star:e.star,starCount:e.starCount}),r.$meta.util[n](t.target)}))}this.$view.dialog.confirm(this.$text("Please Sign In")).then((function(){r.$meta.vueLayout.openLogin()}))},_getItemMetaMedia:function(t){var e=t._meta&&t._meta.media||t.avatar||this.$meta.config.modules["a-base"].user.avatar.default;return this.$meta.util.combineImageUrl(e,32)},_getItemMetaMediaLabel:function(t){return t._meta&&t._meta.mediaLabel||t.userName},_getItemMetaSummary:function(t){var e=t._meta&&t._meta.summary||"";if(this.layoutManager.container.atomClass)return e;var a=this.layoutManager.getAtomClass({module:t.module,atomClassName:t.atomClassName});return a?"".concat(a.titleLocale," ").concat(e):e},_getItemMetaFlags:function(t){var e=t._meta&&t._meta.flags;return e?Array.isArray(e)?e:e.split(","):[]},_getLabel:function(t){return this.layoutManager.base_userLabels?this.layoutManager.base_userLabels[t]:null},_getActionColor:function(t,e){return 0===e?"orange":1===e?"red":"blue"},_getActionTitle:function(t,e){return this.getActionTitle(t,e.atomStage)},_getItemChecked:function(t){return this.layoutManager.bulk.selectedAtoms.findIndex((function(e){return e.atomId===t.atomId}))>-1},_renderListItem:function(t){var e,a=this,n=this.$createElement,r=this.layoutManager.bulk.selecting?null:n("div",{slot:"media"},[n("img",{class:"avatar avatar24",attrs:{src:this._getItemMetaMedia(t)}})]),o=n("div",{slot:"root-start",class:"header"},[n("div",{class:"mediaLabel"},[n("span",[this._getItemMetaMediaLabel(t)])]),n("div",{class:"date"},[t.star>0&&n("span",["⭐"]),t.attachmentCount>0&&n("span",["🧷"]),t.attachmentCount>1&&n("span",["".concat(t.attachmentCount)]),t.commentCount>0&&n("span",["💬"]),t.commentCount>1&&n("span",["".concat(t.commentCount)]),n("span",[this.$meta.util.formatDateTimeRelative(t.atomUpdatedAt)])])]),i=n("div",{slot:"title",class:"title"},[n("div",[t.atomName])]),s=n("div",{slot:"root-end",class:"summary"},[this._getItemMetaSummary(t)]),l=[],u=d(this._getItemMetaFlags(t));try{for(u.s();!(e=u.n()).done;){var c=e.value;l.push(n("f7-badge",{key:"flag"},[c]))}}catch(t){u.e(t)}finally{u.f()}var m=[];if(t.labels&&this.layoutManager.base_userLabels){var f,h=d(JSON.parse(t.labels));try{for(h.s();!(f=h.n()).done;){var p=f.value,g=this._getLabel(p);m.push(n("f7-badge",{key:p,style:{backgroundColor:g.color}},[g.text]))}}catch(t){h.e(t)}finally{h.f()}}var y=n("div",{slot:"after",class:"after"},[l,m]);return n("eb-list-item",{class:"item",key:t.atomId,attrs:{link:!this.layoutManager.bulk.selecting&&"#",name:this.radioName,checkbox:this.layoutManager.bulk.selecting,checked:this._getItemChecked(t),swipeout:!0},props:{onPerform:function(e){return a.onItemClick(e,t)}},on:{swipeoutOpened:function(e){a.onSwipeoutOpened(e,t)},contextmenuOpened:function(e){a.onSwipeoutOpened(e,t)},change:function(e){return a.onItemChange(e,t)}}},[r,o,i,s,y,this._renderListItemContextMenu(t)])},_renderListItemContextMenu:function(t){var e,a=this,n=this.$createElement;if(1===t.atomStage){var r=n("div",{attrs:{color:"teal"},props:{onPerform:function(e){return a.onStarSwitch(e,t)}}},[n("f7-icon",{slot:"media",attrs:{material:t.star?"star_border":"star"}}),this.$device.desktop&&n("div",{slot:"title"},[this.$text(t.star?"Unstar":"Star")])]),o=n("div",{attrs:{color:"blue"},props:{onPerform:function(e){return a.onLabel(e,t)}}},[n("f7-icon",{slot:"media",attrs:{material:"label"}}),this.$device.desktop&&n("div",{slot:"title"},[this.$text("Labels")])]);e=n("div",{slot:"left"},[r,o])}var i=[];if(t._actions){var s=function(e){e=parseInt(e);var r=t._actions[e],o=a.getAction(r);i.push(n("div",{key:r.id,attrs:{color:a._getActionColor(r,e)},props:{onPerform:function(e){return a.onAction(e,t,r)}}},[n("f7-icon",{slot:"media",attrs:{material:o.icon.material}}),a.$device.desktop&&n("div",{slot:"title"},[a._getActionTitle(r,t)])])),l=e};for(var l in t._actions)s(l)}var u=n("div",{slot:"right",attrs:{ready:!!t._actions}},[i]);return n("eb-context-menu",[e,u])},_renderList:function(){var t,e=this.$createElement,a=[],n=d(this.layout.items);try{for(n.s();!(t=n.n()).done;){var r=t.value;a.push(this._renderListItem(r))}}catch(t){n.e(t)}finally{n.f()}return e("f7-list",[a])}},render:function(){var t=arguments[0];return t("div",[this._renderList()])}},g={meta:{global:!1},props:{layoutManager:{type:Object},blockConfig:{type:Object}},data:function(){return{}},created:function(){},methods:{onPerformAdd:function(){var t=this,e=this.layoutManager.select_getSelectedAtoms(),a={selectMode:this.layoutManager.container.params.selectMode,selectedAtoms:e};this.$view.navigate("/a/base/atom/selecting",{target:"_self",context:{params:{atomClass:this.layoutManager.container.atomClass,options:this.layoutManager.container.options,params:a},callback:function(e,a){200===e&&(t.layoutManager.container.params.selectedAtomIds=a.map((function(t){return t.atomId})),t.layoutManager.page_onRefresh())}}})},onPerformDone:function(){var t=this.getSelectedAtoms();this.layoutManager.contextCallback(200,t),this.$f7router.back()},getSelectedAtoms:function(){var t=this.layoutManager.select_getSelectedAtoms();return"single"===this.layoutManager.container.params.selectMode?t&&t.length>0?t[0]:null:t&&t.length>0?t:null}},render:function(){var t=arguments[0];return t("f7-nav-right",[t("eb-link",{attrs:{iconMaterial:"add"},props:{onPerform:this.onPerformAdd}}),t("eb-link",{attrs:{iconMaterial:"done"},props:{onPerform:this.onPerformDone}})])}};function y(t,e){var a;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=function(t,e){if(!t)return;if("string"==typeof t)return v(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return v(t,e)}(t))||e&&t&&"number"==typeof t.length){a&&(t=a);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){a=t[Symbol.iterator]()},n:function(){var t=a.next();return i=t.done,t},e:function(t){s=!0,o=t},f:function(){try{i||null==a.return||a.return()}finally{if(s)throw o}}}}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}var b={meta:{global:!1},mixins:[s.a.prototype.$meta.module.get("a-base").options.mixins.ebAtomActions],props:{layoutManager:{type:Object},layout:{type:Object},blockConfig:{type:Object}},data:function(){return{}},methods:{onItemClick:function(t,e){return this.onAction(t,e,{module:e.module,atomClassName:e.atomClassName,name:"read"})},onActionSelectRemove:function(t,e){this.$meta.util.swipeoutClose(t.target);var a=this.layoutManager.container.params.selectedAtomIds;if(a){var n=a.findIndex((function(t){return t===e.atomId}));-1!==n&&a.splice(n,1)}var r=this.layoutManager.base_getItems(),o=r.findIndex((function(t){return t.atomId===e.atomId}));-1!==o&&r.splice(o,1)},onAction:function(t,e,a){var n=this,r=this.getAction(a);if(r)return this.$meta.util.performAction({ctx:this,action:r,item:e}).then((function(){n.$meta.util.swipeoutClose(t.target)}))},_getItemMetaMedia:function(t){var e=t._meta&&t._meta.media||t.avatar||this.$meta.config.modules["a-base"].user.avatar.default;return this.$meta.util.combineImageUrl(e,32)},_getItemMetaMediaLabel:function(t){return t._meta&&t._meta.mediaLabel||t.userName},_getItemMetaSummary:function(t){var e=t._meta&&t._meta.summary||"";if(this.layoutManager.container.atomClass)return e;var a=this.layoutManager.getAtomClass({module:t.module,atomClassName:t.atomClassName});return a?"".concat(a.titleLocale," ").concat(e):e},_getItemMetaFlags:function(t){var e=t._meta&&t._meta.flags;return e?Array.isArray(e)?e:e.split(","):[]},_getLabel:function(t){return this.layoutManager.base_userLabels?this.layoutManager.base_userLabels[t]:null},_renderListItem:function(t){var e,a=this,n=this.$createElement,r=n("div",{slot:"media"},[n("img",{class:"avatar avatar24",attrs:{src:this._getItemMetaMedia(t)}})]),o=n("div",{slot:"root-start",class:"header"},[n("div",{class:"mediaLabel"},[n("span",[this._getItemMetaMediaLabel(t)])]),n("div",{class:"date"},[t.star>0&&n("span",["⭐"]),t.attachmentCount>0&&n("span",["🧷"]),t.attachmentCount>1&&n("span",["".concat(t.attachmentCount)]),t.commentCount>0&&n("span",["💬"]),t.commentCount>1&&n("span",["".concat(t.commentCount)]),n("span",[this.$meta.util.formatDateTimeRelative(t.atomUpdatedAt)])])]),i=n("div",{slot:"title",class:"title"},[n("div",[t.atomName])]),s=n("div",{slot:"root-end",class:"summary"},[this._getItemMetaSummary(t)]),l=[],u=y(this._getItemMetaFlags(t));try{for(u.s();!(e=u.n()).done;){var c=e.value;l.push(n("f7-badge",{key:"flag"},[c]))}}catch(t){u.e(t)}finally{u.f()}var m=[];if(t.labels&&this.layoutManager.base_userLabels){var f,d=y(JSON.parse(t.labels));try{for(d.s();!(f=d.n()).done;){var h=f.value,p=this._getLabel(h);m.push(n("f7-badge",{key:h,style:{backgroundColor:p.color}},[p.text]))}}catch(t){d.e(t)}finally{d.f()}}var g=n("div",{slot:"after",class:"after"},[l,m]);return n("eb-list-item",{class:"item",key:t.atomId,attrs:{link:"#",swipeout:!0},props:{onPerform:function(e){return a.onItemClick(e,t)}}},[r,o,i,s,g,this._renderListItemContextMenu(t)])},_renderListItemContextMenu:function(t){var e=this,a=this.$createElement;return a("eb-context-menu",[a("div",{slot:"right"},[a("div",{attrs:{color:"teal"},props:{onPerform:function(a){return e.onActionSelectRemove(a,t)}}},[this.$text("Remove")])])])},_renderList:function(){var t,e=this.$createElement,a=[],n=y(this.layout.items);try{for(n.s();!(t=n.n()).done;){var r=t.value;a.push(this._renderListItem(r))}}catch(t){n.e(t)}finally{n.f()}return e("f7-list",[a])}},render:function(){var t=arguments[0];return t("div",[this._renderList()])}},C={meta:{global:!1},props:{layoutManager:{type:Object},blockConfig:{type:Object}},data:function(){return{}},computed:{selectedAtoms:function(){return this.layoutManager.select_getSelectedAtoms()}},created:function(){},methods:{onPerformAtomOrders:function(t){this.layoutManager.order_onPerformPopover(t.currentTarget)},onPerformFilter:function(){this.layoutManager.filter_onPerform()},onPerformDone:function(){this.layoutManager.contextCallback(200,this.selectedAtoms),this.$f7router.back()}},render:function(){var t=this,e=arguments[0];return e("f7-nav-right",[e("eb-link",{attrs:{iconMaterial:"sort"},props:{onPerform:function(e){return t.onPerformAtomOrders(e)}}}),e("eb-link",{attrs:{iconMaterial:"search"},props:{onPerform:this.onPerformFilter}}),this.selectedAtoms.length>0&&e("eb-link",{attrs:{iconMaterial:"done"},props:{onPerform:this.onPerformDone}})])}};function M(t,e){var a;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=function(t,e){if(!t)return;if("string"==typeof t)return _(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _(t,e)}(t))||e&&t&&"number"==typeof t.length){a&&(t=a);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){a=t[Symbol.iterator]()},n:function(){var t=a.next();return i=t.done,t},e:function(t){s=!0,o=t},f:function(){try{i||null==a.return||a.return()}finally{if(s)throw o}}}}function _(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}var A={meta:{global:!1},mixins:[s.a.prototype.$meta.module.get("a-base").options.mixins.ebAtomActions],props:{layoutManager:{type:Object},layout:{type:Object},blockConfig:{type:Object}},data:function(){return{radioName:s.a.prototype.$meta.util.nextId("radio")}},computed:{selectedAtoms:function(){return this.layoutManager.select_getSelectedAtoms()}},methods:{onItemChange:function(t,e){if("single"===this.layoutManager.container.params.selectMode)t.target.checked&&(this.layoutManager.container.params.selectedAtoms=[e]);else{var a=this.layoutManager.container.params.selectedAtoms,n=a.findIndex((function(t){return t.atomId===e.atomId}));t.target.checked&&-1===n?a.push(e):!t.target.checked&&n>-1&&a.splice(n,1)}},onActionView:function(t,e){return this.onAction(t,e,{module:e.module,atomClassName:e.atomClassName,name:"read"})},onAction:function(t,e,a){var n=this,r=this.getAction(a);if(r)return this.$meta.util.performAction({ctx:this,action:r,item:e}).then((function(){n.$meta.util.swipeoutClose(t.target)}))},_getItemMetaMediaLabel:function(t){return t._meta&&t._meta.mediaLabel||t.userName},_getItemMetaSummary:function(t){var e=t._meta&&t._meta.summary||"";if(this.layoutManager.container.atomClass)return e;var a=this.layoutManager.getAtomClass({module:t.module,atomClassName:t.atomClassName});return a?"".concat(a.titleLocale," ").concat(e):e},_getItemMetaFlags:function(t){var e=t._meta&&t._meta.flags;return e?Array.isArray(e)?e:e.split(","):[]},_getLabel:function(t){return this.layoutManager.base_userLabels?this.layoutManager.base_userLabels[t]:null},_getItemChecked:function(t){return this.selectedAtoms.findIndex((function(e){return e.atomId===t.atomId}))>-1},_renderListItem:function(t){var e,a=this,n=this.$createElement,r=n("div",{slot:"root-start",class:"header"},[n("div",{class:"mediaLabel"},[n("span",[this._getItemMetaMediaLabel(t)])]),n("div",{class:"date"},[t.star>0&&n("span",["⭐"]),t.attachmentCount>0&&n("span",["🧷"]),t.attachmentCount>1&&n("span",["".concat(t.attachmentCount)]),t.commentCount>0&&n("span",["💬"]),t.commentCount>1&&n("span",["".concat(t.commentCount)]),n("span",[this.$meta.util.formatDateTimeRelative(t.atomUpdatedAt)])])]),o=n("div",{slot:"title",class:"title"},[n("div",[t.atomName])]),i=n("div",{slot:"root-end",class:"summary"},[this._getItemMetaSummary(t)]),s=[],l=M(this._getItemMetaFlags(t));try{for(l.s();!(e=l.n()).done;){var u=e.value;s.push(n("f7-badge",{key:"flag"},[u]))}}catch(t){l.e(t)}finally{l.f()}var c=[];if(t.labels&&this.layoutManager.base_userLabels){var m,f=M(JSON.parse(t.labels));try{for(f.s();!(m=f.n()).done;){var d=m.value,h=this._getLabel(d);c.push(n("f7-badge",{key:d,style:{backgroundColor:h.color}},[h.text]))}}catch(t){f.e(t)}finally{f.f()}}var p=n("div",{slot:"after",class:"after"},[s,c]);return n("eb-list-item",{class:"item",key:t.atomId,attrs:{name:this.radioName,radio:"single"===this.layoutManager.container.params.selectMode,checkbox:"multiple"===this.layoutManager.container.params.selectMode,checked:this._getItemChecked(t),swipeout:!0},on:{change:function(e){return a.onItemChange(e,t)}}},[r,o,i,p,this._renderListItemContextMenu(t)])},_renderListItemContextMenu:function(t){var e=this,a=this.$createElement;return a("eb-context-menu",[a("div",{slot:"right"},[a("div",{attrs:{color:"teal"},props:{onPerform:function(a){return e.onActionView(a,t)}}},[this.$text("View")])])])},_renderList:function(){var t,e=this.$createElement,a=[],n=M(this.layout.items);try{for(n.s();!(t=n.n()).done;){var r=t.value;a.push(this._renderListItem(r))}}catch(t){n.e(t)}finally{n.f()}return e("f7-list",[a])}},render:function(){var t=arguments[0];return t("div",[this._renderList()])}};e.default={listLayoutList:r,listLayoutTable:o,listLayoutBlockFilter:l,listLayoutBlockListTitle:u,listLayoutBlockListSubnavbar:f,listLayoutBlockListItems:p,listLayoutBlockSelectTitle:g,listLayoutBlockSelectItems:b,listLayoutBlockSelectingTitle:C,listLayoutBlockSelectingItems:A}},function(t,e,a){"use strict";function n(t,e){for(var a=[],n={},r=0;r<e.length;r++){var o=e[r],i=o[0],s={id:t+":"+r,css:o[1],media:o[2],sourceMap:o[3]};n[i]?n[i].parts.push(s):a.push(n[i]={id:i,parts:[s]})}return a}a.r(e),a.d(e,"default",(function(){return d}));var r="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!r)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var o={},i=r&&(document.head||document.getElementsByTagName("head")[0]),s=null,l=0,u=!1,c=function(){},m=null,f="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function d(t,e,a,r){u=a,m=r||{};var i=n(t,e);return h(i),function(e){for(var a=[],r=0;r<i.length;r++){var s=i[r];(l=o[s.id]).refs--,a.push(l)}e?h(i=n(t,e)):i=[];for(r=0;r<a.length;r++){var l;if(0===(l=a[r]).refs){for(var u=0;u<l.parts.length;u++)l.parts[u]();delete o[l.id]}}}}function h(t){for(var e=0;e<t.length;e++){var a=t[e],n=o[a.id];if(n){n.refs++;for(var r=0;r<n.parts.length;r++)n.parts[r](a.parts[r]);for(;r<a.parts.length;r++)n.parts.push(g(a.parts[r]));n.parts.length>a.parts.length&&(n.parts.length=a.parts.length)}else{var i=[];for(r=0;r<a.parts.length;r++)i.push(g(a.parts[r]));o[a.id]={id:a.id,refs:1,parts:i}}}}function p(){var t=document.createElement("style");return t.type="text/css",i.appendChild(t),t}function g(t){var e,a,n=document.querySelector('style[data-vue-ssr-id~="'+t.id+'"]');if(n){if(u)return c;n.parentNode.removeChild(n)}if(f){var r=l++;n=s||(s=p()),e=b.bind(null,n,r,!1),a=b.bind(null,n,r,!0)}else n=p(),e=C.bind(null,n),a=function(){n.parentNode.removeChild(n)};return e(t),function(n){if(n){if(n.css===t.css&&n.media===t.media&&n.sourceMap===t.sourceMap)return;e(t=n)}else a()}}var y,v=(y=[],function(t,e){return y[t]=e,y.filter(Boolean).join("\n")});function b(t,e,a,n){var r=a?"":n.css;if(t.styleSheet)t.styleSheet.cssText=v(e,r);else{var o=document.createTextNode(r),i=t.childNodes;i[e]&&t.removeChild(i[e]),i.length?t.insertBefore(o,i[e]):t.appendChild(o)}}function C(t,e){var a=e.css,n=e.media,r=e.sourceMap;if(n&&t.setAttribute("media",n),m.ssrId&&t.setAttribute("data-vue-ssr-id",e.id),r&&(a+="\n/*# sourceURL="+r.sources[0]+" */",a+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */"),t.styleSheet)t.styleSheet.cssText=a;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(a))}}}]);
//# sourceMappingURL=front.js.map