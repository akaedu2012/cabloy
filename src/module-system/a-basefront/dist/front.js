(()=>{var t={349:t=>{"use strict";function e(){return e=Object.assign||function(t){for(var e,n=1;n<arguments.length;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},e.apply(this,arguments)}var n=["attrs","props","domProps"],r=["class","style","directives"],a=["on","nativeOn"],o=function(t,e){return function(){t&&t.apply(this,arguments),e&&e.apply(this,arguments)}};t.exports=function(t){return t.reduce((function(t,i){for(var s in i)if(t[s])if(-1!==n.indexOf(s))t[s]=e({},t[s],i[s]);else if(-1!==r.indexOf(s)){var c=t[s]instanceof Array?t[s]:[t[s]],u=i[s]instanceof Array?i[s]:[i[s]];t[s]=c.concat(u)}else if(-1!==a.indexOf(s))for(var l in i[s])if(t[s][l]){var m=t[s][l]instanceof Array?t[s][l]:[t[s][l]],d=i[s][l]instanceof Array?i[s][l]:[i[s][l]];t[s][l]=m.concat(d)}else t[s][l]=i[s][l];else if("hook"==s)for(var f in i[s])t[s][f]=t[s][f]?o(t[s][f],i[s][f]):i[s][f];else t[s]=i[s];else t[s]=i[s];return t}),{})}},906:(t,e,n)=>{"use strict";n.d(e,{Z:()=>$t});var r=n(3),a=n.n(r);function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const s={meta:{global:!1},mixins:[a().prototype.$meta.module.get("a-base").options.mixins.ebActionBase],methods:{onAction:function(){return"atomName"===this.action.name?this.onAction_atomName():"dateRange"===this.action.name?this.onAction_dateRange():void 0},onAction_atomName:function(){var t=this.$props,e=t.ctx,n=t.item,r=n.value,a=n.operator,o=n.data;if(!r)return null;var s={op:a.op,val:r},c={__or__atomNameResource:[{"a.atomName":s}]},u=o.atomClass?e.getAtomClass(o.atomClass):null;if(u&&u.resource){var l=e.container&&e.container.resource?"m.atomNameLocale":"f.atomNameLocale";c.__or__atomNameResource.push(i({},l,s))}return c},onAction_dateRange:function(){var t=this.$props,e=t.ctx,n=t.item,r=n.key,a=n.property,s=n.value,c=a.ebSearch,u=a.ebParams.dateFormat;if(!s)return null;var l=c&&c.tableAlias;l=null===l?null:l||"f";var m,d,f=c&&c.fieldName||r,h=null===l?f:"".concat(l,".").concat(f),p=(m=s.split(","),d=2,function(t){if(Array.isArray(t))return t}(m)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,o=[],i=!0,s=!1;try{for(n=n.call(t);!(i=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);i=!0);}catch(t){s=!0,a=t}finally{try{i||null==n.return||n.return()}finally{if(s)throw a}}return o}}(m,d)||function(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}(m,d)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),v=p[0],b=p[1],g=[];if(v){var y=new Date(e.$meta.util.moment(v,u).format("YYYY-MM-DD 00:00:00"));g.push(i({},h,{op:">=",val:y}))}if(b){var x=new Date(e.$meta.util.moment(b,u).format("YYYY-MM-DD 23:59:59"));g.push(i({},h,{op:"<=",val:x}))}return 0===g.length?null:i({},"__and__".concat(f),g)}}};function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){l(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function m(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,o=[],i=!0,s=!1;try{for(n=n.call(t);!(i=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);i=!0);}catch(t){s=!0,a=t}finally{try{i||null==n.return||n.return()}finally{if(s)throw a}}return o}}(t,e)||function(t,e){if(t){if("string"==typeof t)return d(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}const f={meta:{global:!1},mixins:[a().prototype.$meta.module.get("a-base").options.mixins.ebActionBase],methods:{onAction:function(){if("dateRange"===this.action.name)return this._renderDateRange()},_renderDateRange:function(){var t=this.$props,e=t.ctx,n=t.item.context,r=n.property,a=e.getTitle(n),o=n.getValue(),i=m(this._renderDateRange_splitValue({ctx:e,context:n,value:o}),2),s=i[0],c=i[1];return[this._renderDateRange_renderProperty({ctx:e,context:n,property:r,mode:"begin",title:a,value:s}),this._renderDateRange_renderProperty({ctx:e,context:n,property:r,mode:"end",title:a,value:c})]},_renderDateRange_splitValue:function(t){var e=t.ctx,n=t.context,r=t.value,a=n.property;if(!r)return[null,null];var o=m(r.split(","),2),i=o[0],s=o[1];return[i=i?e.$meta.util.moment(i,a.ebParams.dateFormat):null,s=s?e.$meta.util.moment(s,a.ebParams.dateFormat):null]},_renderDateRange_setValue:function(t){var e=t.ctx,n=t.context,r=t.mode,a=t.value,o=n.property,i=m(this._renderDateRange_splitValue({ctx:e,context:n,value:n.getValue()}),2),s=i[0],c=i[1];"begin"===r?s=a:c=a;var u=[s=s?e.$meta.util.moment(s).format(o.ebParams.dateFormat):"",c=c?e.$meta.util.moment(c).format(o.ebParams.dateFormat):""].join(",");","===u&&(u=""),n.setValue(u)},_renderDateRange_renderProperty:function(t){var e=t.ctx,n=t.context,r=t.mode,a=t.title,o=t.value,i=n.key,s=this._renderDateRange_combineProperty({ctx:e,context:n,mode:r});return n=u(u({},n),{},{key:"".concat(i,":").concat(r),property:s}),this._renderDateRange_renderProperty2({ctx:e,context:n,mode:r,title:a,value:o})},_renderDateRange_renderProperty2:function(t){var e=this,n=t.ctx,r=t.context,a=t.mode,o=t.title,i=t.value,s=this.$createElement,c=r.key,l=r.property;return s("eb-list-input",{key:c,props:u({},{floatingLabel:!1,type:"datepicker",placeholder:n.getPlaceholder(r),resizable:!1,clearButton:!n.validate.readOnly&&!l.ebReadOnly&&!l.ebDisabled,value:i?[i]:[],readonly:!0,disabled:n.validate.readOnly||l.ebReadOnly||l.ebDisabled,calendarParams:l.ebParams}),on:{calendarChange:function(t){var o=t[0];e._renderDateRange_setValue({ctx:n,context:r,mode:a,value:o})}}},[s("div",{slot:"label",staticClass:l.ebReadOnly?"text-color-gray":""},[o]),n.__searchStates_render_list_item(r)])},_renderDateRange_combineProperty:function(t){var e=t.ctx,n=t.context,r=t.mode,a=n.property,o={type:"",ebType:"datePicker",ebDescription:"begin"===r?"Begin Date":"End Date",ebRender:null,ebSearch:{operators:"begin"===r?">=":"<="}};return e.$meta.util.extend({},a,o)}}};function h(t,e,n,r,a,o,i){try{var s=t[o](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,a)}const p={mixins:[a().prototype.$meta.module.get("a-base").options.mixins.ebAtomClasses],props:{context:{type:Object}},data:function(){return{}},created:function(){},methods:{onChooseAtom:function(){var t,e=this;return(t=regeneratorRuntime.mark((function t(){var n,r,a,o,i,s,c,u,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.context,r=n.key,a=n.property,o=n.validate,void 0===(i=a.ebParams.target)&&(i="_self"),s=a.ebParams.atomClass,c=a.ebParams.selectOptions,u="string"==typeof(u=o.host&&o.host.atomId||a.ebParams.atomId)?e.context.getValue(u):u||0,l=a.ebParams.mapper,t.abrupt("return",new Promise((function(t){e.$view.navigate("/a/basefront/atom/select",{target:i,context:{params:{selectMode:"single",selectedAtomId:u,atomClass:s,options:c},callback:function(n,a){if(200===n){if(l)for(var o in l){var i=a[l[o]];e.context.setValue(i,o)}else{var s=a[r];e.context.setValue(s,r)}t(!0)}else!1===n&&t(!1)}}})})));case 9:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(t){h(o,r,a,i,s,"next",t)}function s(t){h(o,r,a,i,s,"throw",t)}i(void 0)}))})()}},render:function(){var t=arguments[0],e=this.context,n=e.dataPath,r=e.property,a=e.validate,o=this.context.getTitle(),i=this.context.getValue();return a.readOnly||r.ebReadOnly?t("f7-list-item",{attrs:{title:o}},[t("div",{slot:"after"},[i])]):t("eb-list-item-choose",{attrs:{link:"#",dataPath:n,title:o},props:{onChoose:this.onChooseAtom}},[t("div",{slot:"after"},[i])])}};function v(t,e,n,r,a,o,i){try{var s=t[o](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,a)}const b={mixins:[a().prototype.$meta.module.get("a-base").options.mixins.ebAtomClasses],props:{context:{type:Object}},data:function(){return{}},computed:{value:function(){return this.context.getValue()},atomClass:function(){var t=this.value;return t&&"string"==typeof t?window.JSON5.parse(t):t},atomClassTitle:function(){var t=this.getAtomClass(this.atomClass);return t?t.titleLocale:null}},created:function(){},methods:{onChooseAtomClass:function(){var t,e=this;return(t=regeneratorRuntime.mark((function t(){var n,r,a,o,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.context.property,void 0===(r=e.$meta.util.getProperty(n,"ebParams.target"))&&(r="_self"),a=e.$meta.util.getProperty(n,"ebParams.optional"),o=e.$meta.util.getProperty(n,"ebParams.simple"),i=e.$meta.util.getProperty(n,"ebParams.inner"),t.abrupt("return",new Promise((function(t){e.$view.navigate("/a/basefront/atom/selectAtomClass",{target:r,context:{params:{atomClass:e.atomClass,optional:a,simple:o,inner:i},callback:function(r,a){var o;200===r?(o="string"===n.type?a?JSON.stringify(a):null:a,e.context.setValue(o),t(!0)):!1===r&&t(!1)}}})})));case 7:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(t){v(o,r,a,i,s,"next",t)}function s(t){v(o,r,a,i,s,"throw",t)}i(void 0)}))})()}},render:function(){var t=arguments[0],e=this.context,n=e.dataPath,r=e.property,a=e.validate,o=this.context.getTitle();return a.readOnly||r.ebReadOnly?t("f7-list-item",{attrs:{title:o}},[t("div",{slot:"after"},[this.atomClassTitle])]):t("eb-list-item-choose",{attrs:{link:"#",dataPath:n,title:o},props:{onChoose:this.onChooseAtomClass}},[t("div",{slot:"after"},[this.atomClassTitle])])}};function g(t,e,n,r,a,o,i){try{var s=t[o](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,a)}const y={props:{context:{type:Object}},data:function(){return{}},computed:{atomClass:function(){var t=this.context.parcel;return{module:t.data.module,atomClassName:t.data.atomClassName}},locales:function(){return this.$store.getState("a/base/locales")||[]}},created:function(){this.init()},methods:{init:function(){var t,e=this;return(t=regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("a/base/getLocales");case 2:1===(n=t.sent).length&&((r=e.context.getValue("atomLanguage"))||void 0===r||e.context.setValue(n[0].value,"atomLanguage"));case 4:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(t){g(o,r,a,i,s,"next",t)}function s(t){g(o,r,a,i,s,"throw",t)}i(void 0)}))})()}},render:function(){var t=arguments[0],e=this.context,n=e.parcel,r=e.key,a=e.property,o=this.$utils.extend({},a,{ebType:"select",ebOptions:this.locales});return t("eb-list-item-validate",{attrs:{parcel:n,dataKey:r,property:o}})}};function x(t,e,n,r,a,o,i){try{var s=t[o](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,a)}const _={props:{context:{type:Object}},data:function(){return{}},computed:{atomClass:function(){var t=this.context.parcel;return{module:t.data.module,atomClassName:t.data.atomClassName}}},created:function(){},methods:{combineAtomClassAndLanguage:function(t){var e={module:this.atomClass.module,atomClassName:this.atomClass.atomClassName};return t&&(e.language=t),e},onChooseCategory:function(t){var e,n=this;return(e=regeneratorRuntime.mark((function e(){var r,a,o,i,s,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.context.parcel,a={actionModule:"a-base",actionComponent:"action",name:"selectLocale",targetEl:t.currentTarget},!r.data.atomLanguage){e.next=6;break}o=r.data.atomLanguage,e.next=10;break;case 6:return e.next=8,n.$meta.util.performAction({ctx:n,action:a,item:r.data});case 8:(i=e.sent)&&(o=i.value,n.context.setValue(i.value,"atomLanguage"));case 10:return s=n.context.getValue("atomCategoryId"),c=[s],e.abrupt("return",new Promise((function(t){var e=n.$meta.util.combineQueries("/a/basefront/category/select",n.combineAtomClassAndLanguage(o));n.$view.navigate(e,{target:"_self",context:{params:{categoryIdStart:0,leafOnly:!0,selectedCategoryIds:c},callback:function(e,r){200===e?(r?(n.context.setValue(r.id,"atomCategoryId"),n.context.setValue(r.data.categoryName,"atomCategoryName"),n.context.setValue(r.data.categoryNameLocale,"atomCategoryNameLocale")):(n.context.setValue(0,"atomCategoryId"),n.context.setValue("","atomCategoryName"),n.context.setValue("","atomCategoryNameLocale")),t(!0)):!1===e&&t(!1)}}})})));case 13:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(t){x(o,r,a,i,s,"next",t)}function s(t){x(o,r,a,i,s,"throw",t)}i(void 0)}))})()}},render:function(){var t=arguments[0],e=this.context,n=e.parcel,r=e.dataPath,a=e.property,o=e.validate,i=this.context.getTitle(),s=n.data.atomCategoryNameLocale||n.data.atomCategoryName;return o.readOnly||a.ebReadOnly?t("f7-list-item",{attrs:{title:i}},[t("div",{slot:"after"},[s])]):t("eb-list-item-choose",{attrs:{link:"#",dataPath:r,title:i},props:{onChoose:this.onChooseCategory}},[t("div",{slot:"after"},[s])])}};function C(t,e,n,r,a,o,i){try{var s=t[o](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,a)}const w={props:{context:{type:Object}},data:function(){return{}},computed:{atomClass:function(){var t=this.context.parcel;return{module:t.data.module,atomClassName:t.data.atomClassName}}},created:function(){},methods:{combineAtomClassAndLanguage:function(t){var e={module:this.atomClass.module,atomClassName:this.atomClass.atomClassName};return t&&(e.language=t),e},onChooseCategory:function(t){var e,n=this;return(e=regeneratorRuntime.mark((function e(){var r,a,o,i,s,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.context.parcel,a={actionModule:"a-base",actionComponent:"action",name:"selectResourceType",targetEl:t.currentTarget},!r.data.resourceType){e.next=6;break}o=r.data.resourceType,e.next=10;break;case 6:return e.next=8,n.$meta.util.performAction({ctx:n,action:a,item:r.data});case 8:(i=e.sent)&&n.context.setValue(i,"resourceType");case 10:return e.next=12,n.$api.post("/a/base/category/child",{atomClass:n.atomClass,categoryId:0,categoryName:o});case 12:return s=e.sent,c=s.id,e.abrupt("return",new Promise((function(t){var e=n.$meta.util.combineQueries("/a/basefront/category/select",n.atomClass);n.$view.navigate(e,{target:"_self",context:{params:{categoryIdStart:c,leafOnly:!0,setLocale:!0},callback:function(e,r){200===e?(r?(n.context.setValue(r.id,"atomCategoryId"),n.context.setValue(r.data.categoryName,"atomCategoryName"),n.context.setValue(r.data.categoryNameLocale,"atomCategoryNameLocale")):(n.context.setValue(0,"atomCategoryId"),n.context.setValue("","atomCategoryName"),n.context.setValue("","atomCategoryNameLocale")),t(!0)):!1===e&&t(!1)}}})})));case 15:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(t){C(o,r,a,i,s,"next",t)}function s(t){C(o,r,a,i,s,"throw",t)}i(void 0)}))})()}},render:function(){var t=arguments[0],e=this.context,n=e.parcel,r=e.dataPath,a=e.property,o=e.validate,i=this.context.getTitle(),s=n.data.atomCategoryNameLocale||n.data.atomCategoryName;return o.readOnly||a.ebReadOnly?t("f7-list-item",{attrs:{title:i}},[t("div",{slot:"after"},[s])]):t("eb-list-item-choose",{attrs:{link:"#",dataPath:r,title:i},props:{onChoose:this.onChooseCategory}},[t("div",{slot:"after"},[s])])}};function k(t,e,n,r,a,o,i){try{var s=t[o](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,a)}function A(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(t){k(o,r,a,i,s,"next",t)}function s(t){k(o,r,a,i,s,"throw",t)}i(void 0)}))}}const $={props:{context:{type:Object}},data:function(){return{tagsAll:null}},computed:{atomClass:function(){var t=this.context.parcel;return{module:t.data.module,atomClassName:t.data.atomClassName}}},created:function(){var t=this.context.parcel;this.loadTagsAll(t.data.atomLanguage)},methods:{combineAtomClassAndLanguage:function(t){var e={module:this.atomClass.module,atomClassName:this.atomClass.atomClassName};return t&&(e.language=t),e},loadTagsAll:function(t){var e=this;return A(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.$store.dispatch("a/base/getTags",{atomClass:e.atomClass,language:t});case 2:e.tagsAll=n.sent;case 3:case"end":return n.stop()}}),n)})))()},adjustTags:function(t){var e=this;return this.tagsAll&&t?(t=(t=JSON.parse(t)).map((function(t){var n=e.tagsAll.find((function(e){return e.id===t}));return n?n.tagName:""}))).join(","):""},onChooseTags:function(t){var e=this;return A(regeneratorRuntime.mark((function n(){var r,a,o,i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=e.context.parcel,a={actionModule:"a-base",actionComponent:"action",name:"selectLocale",targetEl:t.currentTarget},!r.data.atomLanguage){n.next=6;break}o=r.data.atomLanguage,n.next=10;break;case 6:return n.next=8,e.$meta.util.performAction({ctx:e,action:a,item:r.data});case 8:(i=n.sent)&&(o=i.value,e.context.setValue(i.value,"atomLanguage"));case 10:if(!o){n.next=13;break}return n.next=13,e.loadTagsAll(o);case 13:return n.abrupt("return",new Promise((function(t){var n=e.$meta.util.combineQueries("/a/basefront/tag/select",e.combineAtomClassAndLanguage(o));e.$view.navigate(n,{target:"_self",context:{params:{selectedTags:r.data.atomTags,multiple:!0},callback:function(n,r){200===n?(e.context.setValue(r?JSON.stringify(r):null,"atomTags"),t(!0)):!1===n&&t(!1)}}})})));case 14:case"end":return n.stop()}}),n)})))()}},render:function(){var t=arguments[0],e=this.context,n=e.parcel,r=e.dataPath,a=e.property,o=e.validate,i=this.context.getTitle();return o.readOnly||a.ebReadOnly?t("f7-list-item",{attrs:{title:i}},[t("div",{slot:"after"},[this.adjustTags(n.data.atomTags)])]):t("eb-list-item-choose",{attrs:{link:"#",dataPath:r,title:i},props:{onChoose:this.onChooseTags}},[t("div",{slot:"after"},[this.adjustTags(n.data.atomTags)])])}},I={props:{context:{type:Object}},data:function(){return{}},computed:{resourceTypes:function(){var t=this.$store.getState("a/base/resourceTypes");return t?Object.keys(t).map((function(e){return{title:t[e].titleLocale,value:e}})):[]}},created:function(){this.$store.dispatch("a/base/getResourceTypes")},methods:{},render:function(){var t=arguments[0],e=this.context,n=e.parcel,r=e.key,a=e.property,o=this.$utils.extend({},a,{ebType:"select",ebOptions:this.resourceTypes});return t("eb-list-item-validate",{attrs:{parcel:n,dataKey:r,property:o}})}},P={meta:{global:!1},mixins:[a().prototype.$meta.module.get("a-base").options.mixins.ebRenderTableCellFormat],props:{layoutManager:{type:Object},layout:{type:Object},layoutItems:{type:Object},info:{type:Object},expression:{type:String}},data:function(){return{}},methods:{},render:function(){var t=arguments[0],e=this.info,n=e.text,r=e.column,a=this.formatText({text:n,column:r});return t("div",{class:"eb-antdv-table-cell",attrs:{title:a}},[a])}};function S(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return O(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){s=!0,o=t},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function O(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var R=a().prototype.$meta.module.get("a-base").options.mixins.ebRenderTableCellFormat,L=["info.record","info.index"];const N={meta:{global:!1},mixins:[R],props:{layoutManager:{type:Object},layout:{type:Object},layoutItems:{type:Object},info:{type:Object},expression:{type:String}},data:function(){return{value:null}},created:function(){var t=this;this.evaluate(),this._unwatches=[];var e,n=S(L);try{for(n.s();!(e=n.n()).done;){var r=e.value,a=this.$watch(r,(function(){t.evaluate()}));this._unwatches.push(a)}}catch(t){n.e(t)}finally{n.f()}},beforeDestroy:function(){if(this._unwatches){var t,e=S(this._unwatches);try{for(e.s();!(t=e.n()).done;)(0,t.value)()}catch(t){e.e(t)}finally{e.f()}this._unwatches=null}},methods:{evaluate:function(){var t=this,e=this.info,n=e.text,r=e.record,a=e.index,o=e.column;r.children&&(r=Object.assign({},r,{children:void 0}));var i={text:n,record:r,index:a,params:o.params,options:o.component&&o.component.options};this.$meta.util.sandbox.evaluate(this.expression,i).then((function(e){t.value=t.formatText({text:e,column:o})})).catch((function(t){throw t}))}},render:function(){var t=arguments[0];return t("div",{class:"eb-antdv-table-cell",attrs:{title:this.value}},[this.value])}};function T(t){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},T(t)}const j={meta:{global:!1},props:{layoutManager:{type:Object},layout:{type:Object},layoutItems:{type:Object},info:{type:Object},dateFormat:{type:Object}},data:function(){return{}},methods:{_renderDateEmpty:function(){var t=this.info.column;return{title:"",value:t.params&&t.params.default||""}},_renderDateDefault:function(){var t,e=this.info.text,n=this.dateFormat.default;return!0===n&&(n=null),{title:t="object"===T(e)&&e instanceof Date?this.$meta.util.formatDateTime(e,n):e,value:t}},_renderDateLines:function(){var t=this.$createElement,e=this.info.text,n=[],r=this.$meta.util.formatDate(null,this.dateFormat.dateSeparator),a=this.$meta.util.formatDate(e,this.dateFormat.dateSeparator),o=this.$meta.util.formatTime(e,this.dateFormat.timeSeparator);r!==a&&n.push(t("div",{key:"date:one"},[a])),n.push(t("div",{key:"date:two"},[o]));var i=t("div",{class:"date-lines"},[n]);return{title:"".concat(a," ").concat(o),value:i}}},render:function(){var t=arguments[0],e=this.info.text,n=this.dateFormat.lines,r=e?n?this._renderDateLines():this._renderDateDefault():this._renderDateEmpty(),a=r.title,o=r.value;return t("div",{class:"eb-antdv-table-cell",attrs:{title:a}},[o])}};function M(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function D(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function E(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?D(Object(n),!0).forEach((function(e){F(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function F(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const B={meta:{global:!1},mixins:[a().prototype.$meta.module.get("a-base").options.mixins.ebRenderTableCellFormat],props:{layoutManager:{type:Object},layout:{type:Object},layoutItems:{type:Object},info:{type:Object},link:{type:Object},links:{type:Array}},data:function(){return{}},methods:{_renderLink:function(t){var e=this.$createElement,n=this.info,r=n.text,a=n.record,o=n.column,i={},s=this.$meta.util.replaceTemplate(t.text,a)||r||"";return s=this.formatText({text:s,column:o}),t.href&&(i.ebHref=this.$meta.util.replaceTemplate(t.href,a)),!0===t.external?(i.link=!1,i.externalLink=!1,i.external=!0,i.target=t.target):(i.link=!0,i.externalLink=!0,i.external=!1,i.ebTarget=t.target),e("eb-link",{key:s,props:E({},i)},[s])},_renderLinks:function(t){var e,n=[],r=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return M(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?M(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){s=!0,o=t},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}(t);try{for(r.s();!(e=r.n()).done;){var a=e.value;n.push(this._renderLink(a))}}catch(t){r.e(t)}finally{r.f()}return n}},render:function(){var t=arguments[0];return this.link||this.links?this.link?t("div",{class:"eb-antdv-table-cell eb-antdv-table-cell-link"},[this._renderLink(this.link)]):t("div",{class:"eb-antdv-table-cell eb-antdv-table-cell-links"},[this._renderLinks(this.links)]):t("div")}};function U(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function V(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Z(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?V(Object(n),!0).forEach((function(e){H(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function H(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const K={meta:{global:!1},mixins:[a().prototype.$meta.module.get("a-base").options.mixins.ebRenderTableCellFormat],props:{layoutManager:{type:Object},layout:{type:Object},layoutItems:{type:Object},info:{type:Object},button:{type:Object},buttons:{type:Array}},data:function(){return{}},methods:{onPerformClick:function(t,e){var n=this.info.record;return this.$meta.util.performAction({ctx:this.layoutManager,action:e.onPerform,item:n})},_renderButton:function(t){var e=this,n=this.$createElement,r=this.info,a=r.text,o=r.record,i=r.column,s=this.$meta.util.replaceTemplate(t.text,o)||a||"";return n("eb-button",{key:s=this.formatText({text:s,column:i}),props:Z(Z({},Object.assign({},t.props)),{},{onPerform:function(n){return e.onPerformClick(n,t)}})},[s])},_renderButtons:function(t){var e,n=this.$createElement,r=[],a=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return U(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?U(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){s=!0,o=t},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}(t);try{for(a.s();!(e=a.n()).done;){var o=e.value,i=this._renderButton(o);r.push(n("f7-col",{key:i.key},[i]))}}catch(t){a.e(t)}finally{a.f()}return n("f7-row",[r])}},render:function(){var t=arguments[0];return this.button||this.buttons?this.button?t("div",{class:"eb-antdv-table-cell eb-antdv-table-cell-button"},[this._renderButton(this.button)]):t("div",{class:"eb-antdv-table-cell eb-antdv-table-cell-buttons"},[this._renderButtons(this.buttons)]):t("div")}};function J(t,e,n,r,a,o,i){try{var s=t[o](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,a)}const z={props:{context:{type:Object}},data:function(){return{}},computed:{userLabels:function(){return this.$store.getters["a/base/userLabels"]}},created:function(){this.$store.dispatch("a/base/getLabels")},methods:{getLabel:function(t){return this.userLabels?this.userLabels[t]:null},getLabelCurrent:function(){var t=this.context.getValue();return this.getLabel(t)},onChooseLabel:function(t){var e,n=this;return(e=regeneratorRuntime.mark((function e(){var r,a,o,i,s,c,u,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.userLabels){e.next=2;break}return e.abrupt("return");case 2:for(s in r=n,a=n.context.property,o=n.$meta.util.getProperty(a,"ebParams.optional"),i=[],o&&i.push({text:"",data:0}),n.userLabels)c=n.userLabels[s],i.push({color:c.color,text:c.text,data:parseInt(s)});return u={targetEl:t.currentTarget,buttons:i},e.next=11,n.$view.actions.choose(u);case 11:return l=e.sent,r.context.setValue(l.data),e.abrupt("return",!0);case 14:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(t){J(o,r,a,i,s,"next",t)}function s(t){J(o,r,a,i,s,"throw",t)}i(void 0)}))})()},_renderAfterLabel:function(){var t=this.$createElement,e=this.getLabelCurrent();return e?t("f7-badge",{attrs:{color:e.color}},[e.text]):null}},render:function(){var t=arguments[0],e=this.context,n=e.dataPath,r=e.property,a=e.validate,o=this.context.getTitle(),i=this._renderAfterLabel();return a.readOnly||r.ebReadOnly?t("f7-list-item",{attrs:{title:o}},[t("div",{slot:"after"},[i])]):t("eb-list-item-choose",{attrs:{link:"#",dataPath:n,title:o},props:{onChoose:this.onChooseLabel}},[t("div",{slot:"after"},[i])])}};function q(t,e,n,r,a,o,i){try{var s=t[o](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,a)}const Q={props:{context:{type:Object}},data:function(){return{}},created:function(){},methods:{onChooseUser:function(){var t,e=this;return(t=regeneratorRuntime.mark((function t(){var n,r,a,o,i,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.context,r=n.key,a=n.property,void 0===(o=a.ebParams.target)&&(o="_self"),i=a.ebParams.mapper,s=a.ebParams.apiFetchUsers,t.abrupt("return",new Promise((function(t){e.$view.navigate("/a/baseadmin/user/select",{target:o,context:{params:{apiFetchUsers:s,buttonClearUser:!0},callback:function(n,a){if(200===n){if(i)for(var o in i){var s=a[i[o]];e.context.setValue(s,o)}else{var c=a[r];e.context.setValue(c,r)}t(!0)}else!1===n&&t(!1)}}})})));case 6:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(t){q(o,r,a,i,s,"next",t)}function s(t){q(o,r,a,i,s,"throw",t)}i(void 0)}))})()}},render:function(){var t=arguments[0],e=this.context,n=e.dataPath,r=e.property,a=e.validate,o=this.context.getTitle(),i=this.context.getValue();return a.readOnly||r.ebReadOnly?t("f7-list-item",{attrs:{title:o}},[t("div",{slot:"after"},[i])]):t("eb-list-item-choose",{attrs:{link:"#",dataPath:n,title:o},props:{onChoose:this.onChooseUser}},[t("div",{slot:"after"},[i])])}};function W(t,e,n,r,a,o,i){try{var s=t[o](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,a)}const G={props:{context:{type:Object}},data:function(){return{}},created:function(){},methods:{onChooseRole:function(){var t,e=this;return(t=regeneratorRuntime.mark((function t(){var n,r,a,o,i,s,c,u,l,m,d,f,h;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.context,r=n.key,a=n.property,o=n.validate,void 0===(i=a.ebParams.target)&&(i="_self"),s=a.ebParams.mapper,c=a.ebParams.roleIdStart,u=a.ebParams.multiple,l=a.ebParams.catalogOnly,m=a.ebParams.leafOnly,d=a.ebParams.roleTypes,f=a.ebParams.titleAlias,h=o.host&&o.host.immediate,t.abrupt("return",new Promise((function(t){e.$view.navigate("/a/baseadmin/role/select",{target:i,context:{params:{titleAlias:f,roleIdStart:c,multiple:u,catalogOnly:l,leafOnly:m,buttonClearRole:!0,immediate:h,roleTypes:d},callback:function(n,a){if(200===n){if(s)for(var o in s){var i=a[s[o]];e.context.setValue(i,o)}else{var c=a[r];e.context.setValue(c,r)}t(!0)}else!1===n&&t(!1)}}})})));case 12:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(t){W(o,r,a,i,s,"next",t)}function s(t){W(o,r,a,i,s,"throw",t)}i(void 0)}))})()},_getMapperKey:function(t){var e=this.context.property,n=this.$meta.util.getProperty(e,"ebParams.mapper");return n?Object.keys(n).find((function(e){return n[e]===t})):null},_getMapperRoleName:function(){var t=this._getMapperKey("atomNameLocale")||this._getMapperKey("atomName");return t?this.context.getValue(t):this.context.getValue()}},render:function(){var t=arguments[0],e=this.context,n=e.dataPath,r=e.property,a=e.validate,o=this.context.getTitle(),i=this._getMapperRoleName();return a.readOnly||r.ebReadOnly?t("f7-list-item",{attrs:{title:o}},[t("div",{slot:"after"},[i])]):t("eb-list-item-choose",{attrs:{link:"#",dataPath:n,title:o},props:{onChoose:this.onChooseRole}},[t("div",{slot:"after"},[i])])}};var Y=n(28),X=n(276),tt=n(592);function et(t,e,n,r,a,o,i){try{var s=t[o](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,a)}function nt(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(t){et(o,r,a,i,s,"next",t)}function s(t){et(o,r,a,i,s,"throw",t)}i(void 0)}))}}const rt={props:{layoutManager:{type:Object}},data:function(){return{providerName:null,providers:{}}},computed:{providerCurrent:function(){return this.providers[this.providerName]}},beforeDestroy:function(){for(var t in this.providers)this.providers[t].$destroy();this.providers={}},methods:{providerSwitch:function(t){var e=this;return nt(regeneratorRuntime.mark((function n(){var r,a,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=t.providerName,a=e.providers[r]){n.next=9;break}return n.next=5,e.providerCreate(r);case 5:if(a=n.sent){n.next=8;break}throw new Error("not found list layout data provider: ".concat(r));case 8:e.$set(e.providers,r,a);case 9:return n.next=11,a.switch(t);case 11:if(o=n.sent,e.providerName=r,!e.layoutManager.data_adapter_onProviderSwitch){n.next=16;break}return n.next=16,e.layoutManager.data_adapter_onProviderSwitch(t);case 16:return n.abrupt("return",o);case 17:case"end":return n.stop()}}),n)})))()},providerCreate:function(t){var e=this;return nt(regeneratorRuntime.mark((function n(){var r,a,o,i,s;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=e.getProviderConfig(t)){n.next=3;break}throw new Error("adapter provider not found: ".concat(t));case 3:return a=r.component,n.next=6,e.$meta.module.use(a.module);case 6:return o=n.sent,i={propsData:{layoutManager:e.layoutManager,providerConfig:r}},s=o.options.components[a.name],n.abrupt("return",e.$meta.util.createComponentInstance(s,i));case 10:case"end":return n.stop()}}),n)})))()},getProviderConfig:function(t){return this.$meta.util.getProperty(this.layoutManager.layout.configFull,"info.data.adapter.providers.".concat(t))},_callMethod:function(t){var e=this.providerCurrent;if(!e)return null;for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return this._callMethodProvider.apply(this,[e,t].concat(r))},_callMethodProvider:function(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return t[e].apply(t,r)},_loopProviders:function(t){var e=this;return nt(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:n.t0=regeneratorRuntime.keys(e.providers);case 1:if((n.t1=n.t0()).done){n.next=8;break}return r=n.t1.value,a=e.providers[r],n.next=6,t(a);case 6:n.next=1;break;case 8:case"end":return n.stop()}}),n)})))()},onPageRefresh:function(t){return this._callMethod("onPageRefresh",t)},onPageInfinite:function(){return this._callMethod("onPageInfinite")},onPageClear:function(){return this._callMethod("onPageClear")},getItems:function(){return this._callMethod("getItems")||[]},getItemsAll:function(){return this._callMethod("getItemsAll")||[]},getLoading:function(){return this._callMethod("getLoading")},getPageInfo:function(){return this._callMethod("getPageInfo")},gotoPage:function(t){return this._callMethod("gotoPage",t)},findItem:function(t){return this._callMethod("findItem",t)||{pageNum:null,items:null,index:-1,item:null}},findItemProvier:function(t,e){return this._callMethodProvider(t,"findItem",e)||{pageNum:null,items:null,index:-1,item:null}},spliceItem:function(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return this._callMethod.apply(this,["spliceItem",t,e].concat(r))},replaceItem:function(t,e){return this._callMethod("replaceItem",t,e)},renderLoadMore:function(){return this._callMethod("renderLoadMore")}}};function at(t,e,n,r,a,o,i){try{var s=t[o](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,a)}function ot(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(t){at(o,r,a,i,s,"next",t)}function s(t){at(o,r,a,i,s,"throw",t)}i(void 0)}))}}const it={props:{layoutManager:{type:Object}},data:function(){return{inited:!1,info:{pageCurrent:0,pageSize:20,total:0},items:[],loading:!1}},computed:{itemKey:function(){return this.layoutManager.data.provider.itemKey}},beforeDestroy:function(){},methods:{switch:function(t){var e=this;return ot(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.inited){n.next=2;break}return n.abrupt("return");case 2:e.inited=!0,t.autoInit&&e.onPageRefresh();case 4:case"end":return n.stop()}}),n)})))()},onPageRefresh:function(){return this.onPageClear(),this.loadItemsAll()},onPageInfinite:function(){},onPageClear:function(){this.items=[],this.info={pageCurrent:0,pageSize:20,total:0},this.loading=!1,this.layoutManager.data_provider_onItemsClear&&this.layoutManager.data_provider_onItemsClear()},loadItemsAll:function(){var t=this;return ot(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,t.layoutManager.data_provider_onLoadItemsAll();case 4:return n=e.sent,t.items=n.list,t.info={pageCurrent:1,pageSize:t.items.length,total:t.items.length},t.loading=!1,e.abrupt("return",n);case 11:e.prev=11,e.t0=e.catch(1),t.layoutManager.$view.toast.show({text:e.t0.message}),t.loading=!1;case 15:case"end":return e.stop()}}),e,null,[[1,11]])})))()},getItems:function(){return this.items},getItemsAll:function(){return this.getItems()},getLoading:function(){return this.loading},getPageInfo:function(){return this.info},gotoPage:function(){},findItem:function(t){var e=this,n=this.items.findIndex((function(n){return n[e.itemKey]===t})),r=-1===n?null:this.items[n];return{pageNum:1,items:this.items,index:n,item:r}},spliceItem:function(t,e){var n;void 0===e&&(e=1);for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];return(n=t.items).splice.apply(n,[t.index,e].concat(a))},replaceItem:function(t,e){this.$set(t.items,t.index,e)},renderLoadMore:function(){return null}}};function st(t,e,n,r,a,o,i){try{var s=t[o](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,a)}function ct(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(t){st(o,r,a,i,s,"next",t)}function s(t){st(o,r,a,i,s,"throw",t)}i(void 0)}))}}var ut=a().prototype.$meta.module.get("a-components").options.components.ebLoadMore;const lt={props:{layoutManager:{type:Object}},data:function(){return{inited:!1,loadMoreComponent:null,items:[]}},computed:{itemKey:function(){return this.layoutManager.data.provider.itemKey}},beforeDestroy:function(){this.loadMoreComponent&&(this.loadMoreComponent.$destroy(),this.loadMoreComponent=null)},methods:{switch:function(t){var e=this;return ct(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.inited){n.next=2;break}return n.abrupt("return");case 2:r={propsData:{onLoadClear:e.onLoadClear,onLoadMore:e.onLoadMore,autoInit:t.autoInit}},e.loadMoreComponent=e.$meta.util.createComponentInstance(ut,r),e.inited=!0;case 5:case"end":return n.stop()}}),n)})))()},onPageRefresh:function(t){this.loadMoreComponent.reload(t)},onPageInfinite:function(){this.loadMoreComponent.loadMore()},onPageClear:function(){this.loadMoreComponent.clear()},onLoadClear:function(t){this.items=[],this.layoutManager.data_provider_onItemsClear&&this.layoutManager.data_provider_onItemsClear(),t()},onLoadMore:function(t){var e=this;return ct(regeneratorRuntime.mark((function n(){var r,a,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.index,a={index:r},n.next=4,e.layoutManager.data_provider_onLoadItemsPage({page:a});case 4:return o=n.sent,e.items=e.items.concat(o.list),n.abrupt("return",o);case 7:case"end":return n.stop()}}),n)})))()},getItems:function(){return this.items},getLoading:function(){return!1},getPageInfo:function(){},gotoPage:function(){},findItem:function(t){var e=this,n=this.items.findIndex((function(n){return n[e.itemKey]===t})),r=-1===n?null:this.items[n];return{pageNum:1,items:this.items,index:n,item:r}},spliceItem:function(t,e){var n;void 0===e&&(e=1);for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];return(n=t.items).splice.apply(n,[t.index,e].concat(a))},replaceItem:function(t,e){this.$set(t.items,t.index,e)},renderLoadMore:function(){return this.loadMoreComponent?this.loadMoreComponent.renderContent():null}}};function mt(t,e,n,r,a,o,i){try{var s=t[o](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,a)}function dt(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(t){mt(o,r,a,i,s,"next",t)}function s(t){mt(o,r,a,i,s,"throw",t)}i(void 0)}))}}const ft={props:{layoutManager:{type:Object}},data:function(){return{inited:!1,info:{pageCurrent:0,pageSize:20,total:0},itemsPages:{},loading:!1}},computed:{itemKey:function(){return this.layoutManager.data.provider.itemKey},dataSource:function(){return this.itemsPages[this.info.pageCurrent]}},methods:{switch:function(t){var e=this;return dt(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.inited){n.next=2;break}return n.abrupt("return");case 2:e.inited=!0,t.autoInit&&e.onPageRefresh();case 4:case"end":return n.stop()}}),n)})))()},onPageRefresh:function(){this.onPageClear(),this._loadTotal()},onPageInfinite:function(){},onPageClear:function(){this.loading=!1,this.itemsPages={},this.info={pageCurrent:0,pageSize:20,total:0},this._changePageCurrent(0)},getItems:function(){return this.dataSource||[]},getLoading:function(){return this.loading},getPageInfo:function(){return this.info},findItem:function(t){var e=this;for(var n in this.itemsPages){var r=this.itemsPages[n],a=r.findIndex((function(n){return n[e.itemKey]===t})),o=-1===a?null:r[a];if(-1!==a)return{pageNum:parseInt(n),items:r,index:a,item:o}}return{pageNum:null,items:null,index:-1,item:null}},spliceItem:function(t,e){var n;void 0===e&&(e=1);for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];return this.info.total-=e-a.length,(n=t.items).splice.apply(n,[t.index,e].concat(a))},replaceItem:function(t,e){this.$set(t.items,t.index,e)},renderLoadMore:function(){return null},gotoPage:function(t){var e=this;if(this.info.pageCurrent!==t)if(this.itemsPages[t])this._changePageCurrent(t);else{var n=(t-1)*this.info.pageSize;this.loading=!0,this._loadMore({index:n,size:this.info.pageSize}).then((function(n){e.loading=!1,e.$set(e.itemsPages,t,n),e._changePageCurrent(t)})).catch((function(t){e.loading=!1,e.layoutManager.$view.toast.show({text:t.message})}))}},_loadTotal:function(){var t=this;return dt(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,t.layoutManager.data_provider_onLoadItemsCount();case 4:if(n=e.sent,t.loading=!1,t.info.total=n,0!==t.info.total){e.next=9;break}return e.abrupt("return");case 9:t.gotoPage(1),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),t.layoutManager.$view.toast.show({text:e.t0.message}),t.loading=!1;case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))()},_loadMore:function(t){var e=this;return dt(regeneratorRuntime.mark((function n(){var r,a,o,i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.index,a=t.size,o={index:r,size:a},n.next=4,e.layoutManager.data_provider_onLoadItemsPage({page:o});case 4:return i=n.sent,n.abrupt("return",i.list);case 6:case"end":return n.stop()}}),n)})))()},_changePageCurrent:function(t){this.info.pageCurrent=t,this.layoutManager.data_provider_onPageCurrentChanged&&this.layoutManager.data_provider_onPageCurrentChanged(this.info),this.layoutManager.$emit("providerPaged:pageCurrentChanged",this.info)}}};function ht(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function pt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ht(Object(n),!0).forEach((function(e){vt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ht(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function vt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function gt(t,e,n,r,a,o,i){try{var s=t[o](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,a)}function yt(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(t){gt(o,r,a,i,s,"next",t)}function s(t){gt(o,r,a,i,s,"throw",t)}i(void 0)}))}}var xt=a().prototype.$meta.module.get("a-components").options.components.ebTreeviewData;const _t={props:{layoutManager:{type:Object},providerConfig:{type:Object}},data:function(){return{inited:!1,treeviewData:null}},computed:{itemKey:function(){return this.layoutManager.data.provider.itemKey}},beforeDestroy:function(){this.treeviewData&&(this.treeviewData.$destroy(),this.treeviewData=null,this.treeviewRoot=null)},methods:{switch:function(t){var e=this;return yt(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.inited){n.next=2;break}return n.abrupt("return",{treeviewData:e.treeviewData});case 2:return n.next=4,e._start(t);case 4:return e.inited=!0,n.abrupt("return",{treeviewData:e.treeviewData});case 6:case"end":return n.stop()}}),n)})))()},_start:function(t){var e=this;return yt(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r={propsData:{}},e.treeviewData=e.$meta.util.createComponentInstance(xt,r),e.treeviewRoot=e.providerConfig.treeviewRoot,n.next=5,e._createTreeviewAdapter();case 5:if(a=n.sent,e.treeviewData.setAdapter(a),!t.autoInit){n.next=10;break}return n.next=10,e.treeviewData.load(e.treeviewRoot);case 10:case"end":return n.stop()}}),n)})))()},_createTreeviewAdapter:function(){var t=this;return yt(regeneratorRuntime.mark((function e(){var n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.providerConfig.dataSourceAdapter){e.next=3;break}throw new Error("treeview adapter not found");case 3:return r={actionModule:n.component.module,actionComponent:n.component.name,name:"createTreeviewAdapter"},a={layoutManager:t.layoutManager,providerConfig:t.providerConfig,dataSourceAdapterConfig:n},e.next=7,t.$meta.util.performAction({ctx:t,action:r,item:a});case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})))()},onPageRefresh:function(){this.treeviewData.load(this.treeviewRoot)},onPageInfinite:function(){},onPageClear:function(){this.layoutManager.data_provider_onItemsClear&&this.layoutManager.data_provider_onItemsClear()},getTreeviewData:function(){return this.treeviewData},getItems:function(){return this._getItems(this.treeviewData.treeviewRoot)},_getItems:function(t){if(!t.attrs.loadChildren)return null;var e,n=[],r=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return bt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bt(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){s=!0,o=t},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}(t.children);try{for(r.s();!(e=r.n()).done;){var a=e.value,o=Object.assign({},a,{parent:void 0,children:void 0,data:void 0}),i=pt(pt({},a.data),{},{_treeviewNode:o}),s=this._getItems(a);s&&(i.children=s),n.push(i)}}catch(t){r.e(t)}finally{r.f()}return n},getLoading:function(){return!1},getPageInfo:function(){},gotoPage:function(){},findItem:function(t){var e=this._findNodeByKey(t);return{item:e?e.data:null}},spliceItem:function(t){var e=t.item,n=this._findNodeByKey(e[this.itemKey]),r=n.parent;n&&this.treeviewData.removeNode(n),0===r.children.length&&this._reloadNode(r,{attrs:{toggle:!1,loadChildren:!1}})},replaceItem:function(t,e){var n=this,r=this.treeviewData.find(null,(function(t){return t.data[n.itemKey]===e[n.itemKey]}));if(r){var a=r.data;this._replaceItemSorting(a,e)?this._reloadNode(r.parent):r.data=e}},renderLoadMore:function(){return null},_replaceItemSorting:function(t,e){var n=this.providerConfig.fields&&this.providerConfig.fields.sorting;return!!n&&t[n]!==e[n]},addChildNode:function(t){var e=t.node;this._addChild(e.parentId)},moveNode:function(t){var e=t.key,n=t.node,r=this.findItem(e[this.itemKey]);this.spliceItem(r),this.addChildNode({key:e,node:n})},_addChild:function(t){var e=this._findNodeByNodeId(t);this._reloadNode(e,{attrs:{toggle:!0,loadChildren:!0}})},_reloadNode:function(t,e){t&&this.treeviewData.reloadNode(t,e)},_findNodeByKey:function(t){var e=this;return t?this.treeviewData.find(null,(function(n){return n.data[e.itemKey]===t})):null},_findNodeByNodeId:function(t){return void 0===t?null:this.treeviewData.find(null,(function(e){return e.id===t}))}}};function Ct(t,e,n,r,a,o,i){try{var s=t[o](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,a)}function wt(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(t){Ct(o,r,a,i,s,"next",t)}function s(t){Ct(o,r,a,i,s,"throw",t)}i(void 0)}))}}var kt;const At={meta:{global:!1},mixins:[a().prototype.$meta.module.get("a-base").options.mixins.ebActionBase],methods:{onAction:function(){var t=this;return wt(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("initialize"!==t.action.name){e.next=4;break}return e.next=3,t._onActioninitialize();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))()},_onActioninitialize:function(){var t=this;return wt(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!kt){e.next=2;break}return e.abrupt("return");case 2:t.$props.ctx.$meta.util.requirejs.require(["api/static/a/base/js/developerTool"],(function(t){kt=new t}));case 4:case"end":return e.stop()}}),e)})))()}}},$t={combineSearch:s,componentAction:f,renderAtom:p,renderAtomClass:b,renderLanguage:y,renderCategory:_,renderCategoryResource:w,renderTags:$,renderResourceType:I,renderTableCellDefault:P,renderTableCellComputed:N,renderTableCellDatetime:j,renderTableCellLink:B,renderTableCellButton:K,renderUserLabel:z,renderUser:Q,renderRole:G,categorySelect:Y.Z,tagSelect:X.Z,atomTab:tt.Z,listLayoutDataAdapter:rt,listLayoutDataProviderAll:it,listLayoutDataProviderContinuous:lt,listLayoutDataProviderPaged:ft,listLayoutDataProviderTree:_t,developerTool:At}},788:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const r={}},933:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const r={OpenLinkTitleRedirect:"Redirect",PleaseInputText:"Please Input text",ShowAllComments:"Show All Comments",SharingCompleted:"Sharing Completed",DraftsFlowingMineTab:"Flowings",CabloyAboutTip1:"CabloyJS - The Ultimate NodeJS Full Stack Business Development Platform",CabloyAboutTip2:"The frontend of CabloyJS uses VueJS + Framework7 + Webpack, while the backend uses KoaJS + EggJS, and the database uses MySQL",CabloyAboutTip3:"Vertically, CabloyJS make the frontend and the backend work together to form an organic wholeness, so as to avoid working independently between them",CabloyAboutTip4:"Horizontally, CabloyJS has refined a code organization mode called “business modularity”, which could offer a powerful basic framework for the continually growing business demands of large-scale web applications through different module combinations"}},978:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const r={About:"关于",Documentation:"文档",Community:"社区",PleaseInputText:"请输入文本",ShowAllComments:"显示所有评论",SharingCompleted:"分享已完成",DraftsFlowingMineTab:"流转中",OpenLinkTitleRedirect:"跳转",CabloyAboutTip1:"CabloyJS - 是一款顶级NodeJS全栈业务开发框架",CabloyAboutTip2:"前端采用VueJS + Framework7 + Webpack，后端采用KoaJS + EggJS，数据库采用MySQL",CabloyAboutTip3:"在纵向上，将前端和后端打通，形成一个有机的整体，避免前端和后端各自为政的状况",CabloyAboutTip4:"在横向上，提炼出“业务模块化”的代码组织模式，通过不同的模块组合实现业务开发，也为大型Web应用不断增长的业务需求提供有力的基础架构","Welcome to CabloyJS":"欢迎使用CabloyJS","Open Link":"打开链接"}},137:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const r={"en-us":n(933).Z,"zh-cn":n(978).Z}},751:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});var r=n(930),a=n(902);const o={listLayoutManager:r.Z,itemLayoutManager:a.Z}},644:(t,e,n)=>{"use strict";function r(t){return n(142)("./".concat(t,".vue")).default}function a(t){return n(990)("./".concat(t,".jsx")).default}n.d(e,{Z:()=>o});const o=[{path:"atom/list",component:a("atom/list")},{path:"atom/searchQuick",component:a("atom/searchQuick")},{path:"atom/labels",component:r("atom/labels")},{path:"atom/item",component:a("atom/item")},{path:"atom/selectAtomClass",component:r("atom/selectAtomClass")},{path:"atom/select",component:a("atom/select")},{path:"atom/selecting",component:a("atom/selecting")},{path:"atom/autoStar",component:r("atom/autoStar"),meta:{auth:!0}},{path:"atom/starTabs",component:r("atom/starTabs")},{path:"atom/draftTabs",component:r("atom/draftTabs")},{path:"comment/list",component:r("comment/list")},{path:"comment/item",component:r("comment/item"),meta:{auth:!0}},{path:"comment/all",component:r("comment/all")},{path:"comment/autoHeart",component:r("comment/autoHeart"),meta:{auth:!0}},{path:"attachment/list",component:r("attachment/list")},{path:"attachment/all",component:r("attachment/all")},{path:"base/alert",component:r("base/alert")},{path:"base/about",component:r("base/about")},{path:"base/openLink",component:r("base/openLink")},{path:"category/select",component:r("category/categorySelect")},{path:"tag/select",component:r("tag/tagSelect")},{path:"resource/authorize",component:r("resource/authorize")},{path:"resource/select",component:r("resource/resourceSelect")}]},81:(t,e,n)=>{"use strict";function r(t){return{state:{},getters:{},mutations:{},actions:{}}}n.d(e,{Z:()=>r})},902:(t,e,n)=>{"use strict";n.d(e,{Z:()=>w});var r=n(3),a=n.n(r);function o(t,e,n,r,a,o,i){try{var s=t[o](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,a)}function i(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var i=t.apply(e,n);function s(t){o(i,r,a,s,c,"next",t)}function c(t){o(i,r,a,s,c,"throw",t)}s(void 0)}))}}const s={data:function(){return{base:{configAtomBase:null,configAtomCms:null,configAtom:null,item:null,atomClass:null,module:null,validateParams:null}}},computed:{base_ready:function(){return this.base.ready&&this.base_userLabels&&this.atomClassesAll&&this.actionsAll},base_userLabels:function(){return this.$store.getters["a/base/userLabels"]}},created:function(){this.$store.dispatch("a/base/getLabels")},mounted:function(){this.$meta.eventHub.$on("atom:star",this.base_onStarChanged),this.$meta.eventHub.$on("atom:labels",this.base_onLabelsChanged),this.$meta.eventHub.$on("atom:action",this.base_onActionChanged),this.$meta.eventHub.$on("atom:actions",this.base_onActionsChanged),this.$meta.eventHub.$on("comment:action",this.base_onCommentChanged),this.$meta.eventHub.$on("attachment:action",this.base_onAttachmentChanged)},beforeDestroy:function(){this.$meta.eventHub.$off("atom:star",this.base_onStarChanged),this.$meta.eventHub.$off("atom:labels",this.base_onLabelsChanged),this.$meta.eventHub.$off("atom:action",this.base_onActionChanged),this.$meta.eventHub.$off("atom:actions",this.base_onActionsChanged),this.$meta.eventHub.$off("comment:action",this.base_onCommentChanged),this.$meta.eventHub.$off("attachment:action",this.base_onAttachmentChanged)},methods:{base_onInit:function(){var t=this;return i(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("a/base/getAtomClasses");case 2:case"end":return e.stop()}}),e)})))()},base_loadItem:function(){var t=this;return i(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.base_prepareReadOptions(),e.next=4,t.$api.post("/a/base/atom/read",{key:{atomId:t.container.atomId},options:n});case 4:return t.base.item=e.sent,t.base.atomClass={id:t.base.item.atomClassId,module:t.base.item.module,atomClassName:t.base.item.atomClassName},e.next=8,t.$meta.module.use(t.base.item.module);case 8:return t.base.module=e.sent,e.next=11,t.$api.post("/a/base/atom/validator",{atomClass:{id:t.base.item.atomClassId}});case 11:return r=e.sent,t.base.validateParams={module:r.module,validator:r.validator},e.next=15,t.actions_fetchActions();case 15:return t.base.notfound=!1,e.abrupt("return",!0);case 19:return e.prev=19,e.t0=e.catch(0),t.base.notfound=!0,e.abrupt("return",!1);case 23:case"end":return e.stop()}}),e,null,[[0,19]])})))()},base_prepareReadOptions:function(){var t={};return t.layout=this.layout.current,t},base_getCurrentStage:function(){if(!this.base.item)return null;var t=this.base.item.atomStage;return void 0!==t?this.base_stageToString(t):void 0},base_stageToString:function(t){return 0===t?"draft":1===t?"formal":"history"},base_onActionChanged:function(t){var e=this;return i(regeneratorRuntime.mark((function n(){var r,a,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=t.key,a=t.action,e.base_ready){n.next=4;break}return n.abrupt("return");case 4:if(e.base.item.atomId===r.atomId){n.next=6;break}return n.abrupt("return");case 6:if("save"!==a.name||"edit"!==e.container.mode||!e.page_getDirty()){n.next=25;break}if(t.actionSource!==e){n.next=11;break}e.base.item.atomUpdatedAt=new Date,n.next=24;break;case 11:return o=e.base.item.atomNameLocale||e.base.item.atomName,n.prev=12,n.next=15,e.$view.dialog.confirm(e.$text("DataChangedReloadConfirm"),o);case 15:if(!e.page_getDirty()){n.next=19;break}return n.next=18,e.base_loadItem();case 18:e.page_setDirty(!1);case 19:n.next=24;break;case 21:n.prev=21,n.t0=n.catch(12),e.base.item.atomUpdatedAt=new Date;case 24:return n.abrupt("return");case 25:if("create"!==a.name){n.next=27;break}return n.abrupt("return");case 27:if("delete"!==a.name){n.next=33;break}if(0===e.base.item.atomStage&&0!==e.base.item.atomIdFormal){n.next=33;break}return e.base.item=null,e.base.notfound=!0,e.base.ready=!1,n.abrupt("return");case 33:return n.next=35,e.base_loadItem();case 35:case"end":return n.stop()}}),n,null,[[12,21]])})))()},base_onActionsChanged:function(t){var e=this;return i(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=t.key,e.base_ready){n.next=3;break}return n.abrupt("return");case 3:if(e.base.item.atomId===r.atomId){n.next=5;break}return n.abrupt("return");case 5:return n.next=7,e.actions_fetchActions();case 7:case"end":return n.stop()}}),n)})))()},base_onOpenDrafted:function(t){var e=this;return i(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=t.key,e.base_ready){n.next=3;break}return n.abrupt("return");case 3:if(e.base.item.atomId===r.atomId){n.next=5;break}return n.abrupt("return");case 5:return n.next=7,e.actions_fetchActions();case 7:case"end":return n.stop()}}),n)})))()},base_onCommentChanged:function(t){this.base.item&&t.atomId===this.container.atomId&&("create"===t.action&&(this.base.item.commentCount+=1),"delete"===t.action&&(this.base.item.commentCount-=1))},base_onAttachmentChanged:function(t){this.base.item&&t.atomId===this.container.atomId&&("create"===t.action&&(this.base.item.attachmentCount+=1),"delete"===t.action&&(this.base.item.attachmentCount-=1))},base_onStarChanged:function(t){this.base.item&&t.key.atomId===this.container.atomId&&(this.base.item.star=t.star)},base_onLabelsChanged:function(t){this.base.item&&t.key.atomId===this.container.atomId&&(this.base.item.labels=JSON.stringify(t.labels))}}};function c(t,e,n,r,a,o,i){try{var s=t[o](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,a)}const u={data:function(){return{}},methods:{layout_onGetLayoutConfigKeyCurrent:function(){var t="".concat(this.base.atomClass.module,"_").concat(this.base.atomClass.atomClassName);return"atom.".concat(t,".render.item.layout.current.").concat(this.container.mode,".").concat(this.$view.size)},layout_onPrepareConfigFull:function(){var t,e=this;return(t=regeneratorRuntime.mark((function t(){var n,r,a,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.base.atomClass,r=e.getAtomClass(n),t.next=4,e.$store.dispatch("a/baselayout/getLayoutItem",{layoutKey:"a-basefront:layoutAtomItemBase"});case 4:if(a=t.sent,e.base.configAtomBase=a.content,!r.cms){t.next=11;break}return t.next=9,e.$store.dispatch("a/baselayout/getLayoutItem",{layoutKey:"a-cms:layoutAtomItemCms"});case 9:a=t.sent,e.base.configAtomCms=a.content;case 11:if(o=e.$meta.util.getProperty(r,"layout.config.atomItem"),!(o=e.$meta.util.normalizeResourceKey(o,n.module))){t.next=18;break}return t.next=16,e.$store.dispatch("a/baselayout/getLayoutItem",{layoutKey:o});case 16:a=t.sent,e.base.configAtom=a.content;case 18:return t.abrupt("return",e.$meta.util.extend({},e.base.configAtomBase,e.base.configAtomCms,e.base.configAtom));case 19:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(t){c(o,r,a,i,s,"next",t)}function s(t){c(o,r,a,i,s,"throw",t)}i(void 0)}))})()}}};function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}const m={data:function(){return{}},methods:{info_onLabel:function(){var t=this;if(this.base_user.anonymous)this.$view.dialog.confirm(this.$text("Please Sign In")).then((function(){t.$meta.vueLayout.openLogin()}));else{var e=this.base.item;this.$view.navigate("/a/basefront/atom/labels?atomId=".concat(e.atomId),{})}},info_onStarSwitch:function(){var t=this.base.item.star?0:1;return this._info_onStarSwitch(t)},_info_onStarSwitch:function(t){var e=this,n=this.base.item;if(!this.base_user.anonymous){var r={atomId:n.atomId,itemId:n.itemId};return this.$api.post("/a/base/atom/star",{key:r,atom:{star:t}}).then((function(t){e.$meta.eventHub.$emit("atom:star",{key:r,star:t.star,starCount:t.starCount})}))}this.$view.dialog.confirm(this.$text("Please Sign In")).then((function(){e.$meta.vueLayout.openLogin()}))},info_getLabel:function(t){return this.base_userLabels[t]},info_getItemMetaMedia:function(t){var e=t||this.$meta.config.modules["a-base"].user.avatar.default;return this.$meta.util.combineImageUrl(e,16)},info_renderActionsLeft:function(){var t=this.$createElement;if(this.base_ready){var e=this.base.item,n=[];if((0===e.atomStage||this.layout.configFull.info.comment)&&n.push(t("eb-link",{key:"actionsLeft:comment",attrs:{iconF7:"::comment-dots",iconBadge:e.commentCount,tooltip:this.$text("Comments"),"eb-href":"/a/basefront/comment/list?atomId=".concat(e.atomId)}})),this.layout.configFull.info.attachment&&n.push(t("eb-link",{key:"actionsLeft:attachment",attrs:{iconF7:"::attachment-line",iconBadge:e.attachmentCount,tooltip:this.$text("Attachments"),"eb-href":"/a/basefront/attachment/list?atomId=".concat(e.atomId)}})),1===e.atomStage&&n.push(t("eb-link",{key:"actionsLeft:star",attrs:{iconF7:e.star?"::star":":outline:star-outline",tooltip:this.$text("UserStar")},props:{onPerform:this.info_onStarSwitch}})),1===e.atomStage){var r=e.labels?JSON.parse(e.labels):[];if(r.length>0){var a,o=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){s=!0,o=t},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}(r);try{for(o.s();!(a=o.n()).done;){var i=a.value,s=this.info_getLabel(i);n.push(t("eb-link",{key:i,attrs:{text:s.text,tooltip:this.$text("UserLabel")},style:{color:s.color},props:{onPerform:this.info_onLabel}}))}}catch(t){o.e(t)}finally{o.f()}}else n.push(t("eb-link",{key:"actionsLeft:label",attrs:{iconF7:":outline:label-outline",tooltip:this.$text("UserLabels")},props:{onPerform:this.info_onLabel}}))}return n}},info_renderAvatar:function(){var t=this.$createElement,e=this.base.item,n=[],r=!1;return e.userIdCreated!==e.userIdUpdated&&(r=!0,n.push(t("img",{key:"avatar:one",class:"avatar ".concat(r?"avatar12":"avatar16"),attrs:{src:this.info_getItemMetaMedia(e.avatarUpdated),title:e.userName}}))),n.push(t("img",{key:"avatar:two",class:"avatar ".concat(r?"avatar12":"avatar16"),attrs:{src:this.info_getItemMetaMedia(e.avatar),title:e.userName}})),t("div",{key:"avatar",class:"info-avatar"},[n])},info_renderDate:function(){var t=this.$createElement,e=this.base.item,n=[],r=this.$meta.util.formatDateTime(e.atomCreatedAt),a=this.$meta.util.formatDateTime(e.atomUpdatedAt),o=!1;return r!==a&&(o=!0,n.push(t("div",{key:"date:one"},[a]))),o?n.push(t("div",{key:"date:two"},[r])):(n.push(t("div",{key:"date:one2"},[this.$meta.util.formatDate(e.atomCreatedAt)])),n.push(t("div",{key:"date:two2"},[this.$meta.util.formatTime(e.atomCreatedAt)]))),t("div",{key:"date",class:"info-date"},[n])},info_renderActionsRight:function(){var t=this.$createElement;if(this.base_ready){var e=this.base.item,n=[];return 0===e.atomStage&&1===e.atomClosed&&n.push(t("f7-badge",{key:"atomClosed",attrs:{color:"orange"}},[this.$text("Closed")])),0===e.atomStage&&e.flowNodeNameCurrentLocale&&n.push(t("f7-badge",{key:"flowNodeNameCurrent",attrs:{color:"orange"}},[e.flowNodeNameCurrentLocale])),n.push(this.info_renderAvatar()),n.push(this.info_renderDate()),n}}}};function d(t,e,n,r,a,o,i){try{var s=t[o](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,a)}function f(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){s=!0,o=t},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}const p={data:function(){return{actions:{list:null,popoverId:a().prototype.$meta.util.nextId("popover")}}},computed:{actions_listPopover:function(){var t=this;if(!this.base_ready)return null;var e,n=[],r=f(this.actions.list);try{for(r.s();!(e=r.n()).done;){var a=e.value;if("layout"!==a.name&&!("write"===a.name&&this.base.item.atomStage===this.base.item.atomSimple||"read"===a.name&&"view"===this.container.mode)){var o=this.getAction(a);if(o.stage&&!o.stage.split(",").some((function(e){return t.$meta.config.modules["a-base"].stage[e]===t.base.item.atomStage})))continue;n.push(a)}}}catch(t){r.e(t)}finally{r.f()}return this.base.item.atomIdFormal&&n.push({module:this.base.atomClass.module,atomClassName:this.base.atomClass.atomClassName,name:"formal"}),(this.base.item.atomIdFormal||1===this.base.item.atomStage)&&!1!==this.getAtomClass(this.base.atomClass).history&&n.push({module:this.base.atomClass.module,atomClassName:this.base.atomClass.atomClassName,name:"history"}),0===this.base.item.atomStage&&this.base.item.atomFlowId>0&&n.push({module:this.base.atomClass.module,atomClassName:this.base.atomClass.atomClassName,name:"workflow"}),n.length>0?n:null}},methods:{actions_fetchActions:function(){var t,e=this;return(t=regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$api.post("/a/base/atom/actions",{key:{atomId:e.container.atomId}});case 2:e.actions.list=t.sent;case 3:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(t){d(o,r,a,i,s,"next",t)}function s(t){d(o,r,a,i,s,"throw",t)}i(void 0)}))})()},actions_findAction:function(t){return this.actions.list?this.actions.list.find((function(e){return e.name===t})):null},actions_onSubmit:function(){this.$refs.buttonSave.onClick()},actions_submit:function(t,e){var n={action:e},r=this.validate_getInstance();return r?r.perform(t,n):this.validate_onPerformValidateWrapper(t,n)},actions_onAction:function(t,e){if("save"===e||"submit"===e)return this.actions_submit(t,e);if("submit"===e.name)return this.actions_submit(t,e.name);"string"==typeof e&&(e={module:this.base.atomClass.module,atomClassName:this.base.atomClass.atomClassName,name:e});var n=this.getAction(e);return n?(n=this.$utils.extend({},n,{targetEl:t.currentTarget}),"write"===e.name&&(n=this.$utils.extend({},n,{navigateOptions:{target:"_self"}})),this.$meta.util.performAction({ctx:this,action:n,item:this.base.item})):void 0},actions_getActionTitle:function(t){return this.getActionTitle(t,this.base.item)},actions_renderButtonSave:function(){var t=this,e=this.$createElement,n=1===this.base.item.atomClosed;if(this.actions_findAction("write")&&this.base.item.atomStage===this.base.item.atomSimple&&!n){var r=this.container.mode,a="edit"===r?"save":"write",o="edit"===r?"Save":"Edit";return e("eb-link",{key:a,ref:"buttonSave",attrs:{iconF7:"edit"===r?"::save":"::edit",tooltip:this.$text(o)},props:{onPerform:function(e){return t.actions_onAction(e,a)}}})}return null},actions_renderButtonSubmit:function(){var t=this,e=this.$createElement,n=1===this.base.item.atomClosed;if(this.actions_findAction("write")&&0===this.base.item.atomStage&&!n){var r="submit";return e("eb-link",{key:r,ref:"buttonSubmit",attrs:{iconF7:"::done",tooltip:this.$text("Submit")},props:{onPerform:function(e){return t.actions_onAction(e,r)}}})}return null},actions_render:function(){var t=this,e=this.$createElement;if(!this.base_ready)return null;var n=[];if(this.actions_findAction("layout")){var r="layout";n.push(e("eb-link",{key:r,ref:"buttonLayout",attrs:{iconF7:"::view-list",tooltip:this.$text("Layout")},props:{onPerform:function(e){return t.actions_onAction(e,r)}}}))}var a=this.actions_renderButtonSave();a&&n.push(a);var o=this.actions_renderButtonSubmit();return o&&n.push(o),this.actions_listPopover&&n.push(e("f7-link",{key:"actionsPopover",attrs:{iconF7:"::more-horiz","popover-open":"#".concat(this.actions.popoverId)}})),n},actions_renderPopover:function(){var t,e=this,n=this.$createElement,r=this.actions_listPopover;if(r){var a,o=[],i=f(r);try{var s=function(){var t=a.value,r=e.getAction(t);o.push(n("eb-list-item",{key:t.id,attrs:{link:"#","popover-close":!0},props:{onPerform:function(n){return e.actions_onAction(n,t)}}},[n("f7-icon",{slot:"media",attrs:{material:r.icon&&r.icon.material,f7:r.icon&&r.icon.f7}}),n("div",{slot:"title"},[e.actions_getActionTitle(t)])]))};for(i.s();!(a=i.n()).done;)s()}catch(t){i.e(t)}finally{i.f()}t=n("f7-list",{attrs:{inset:!0}},[o])}return n("f7-popover",{attrs:{id:this.actions.popoverId}},[t])}}};function v(t,e,n,r,a,o,i){try{var s=t[o](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,a)}function b(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(t){v(o,r,a,i,s,"next",t)}function s(t){v(o,r,a,i,s,"throw",t)}i(void 0)}))}}const g={data:function(){return{validate:{errors:null}}},computed:{validate_host:function(){return{stage:this.base_getCurrentStage(),mode:this.container.mode,atomId:this.container.atomId}}},methods:{validate_getInstance:function(){return this.$refs.validate},validate_onSubmit:function(){this.actions_onSubmit()},validate_onPerformValidateWrapper:function(t,e){var n=this;return b(regeneratorRuntime.mark((function r(){var a,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,n.validate_onPerformValidate(t,e);case 3:!0===(a=r.sent)?n.$view.toast.show({text:n.$text("Operation Succeeded")}):"string"==typeof a&&n.$view.toast.show({text:a}),r.next=18;break;case 7:if(r.prev=7,r.t0=r.catch(0),422!==r.t0.code){r.next=15;break}return n.validate.errors=r.t0.message,o=n.$text("Data Validation Error"),n.$view.toast.show({text:o}),n.$nextTick((function(){n.layout_switchLayout("default")})),r.abrupt("return");case 15:if(!r.t0.message){r.next=18;break}throw n.$view.toast.show({text:r.t0.message}),r.t0;case 18:case"end":return r.stop()}}),r,null,[[0,7]])})))()},validate_onPerformValidate:function(t,e){var n=this;return b(regeneratorRuntime.mark((function t(){var r,a,o,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e&&e.action,a=n.$utils.extend({},n.actions_findAction("write"),{name:r}),o=n.getAction(a),t.next=5,n.$meta.util.performAction({ctx:n,action:o,item:n.base.item});case 5:return i=t.sent,"save"!==r&&"submit"!==r||n.page_setDirty(!1),t.abrupt("return",i);case 8:case"end":return t.stop()}}),t)})))()},validate_onValidateItemChange:function(){"edit"===this.container.mode&&this.page_setDirty(!0)},validate_errorsSet:function(t){this.validate.errors=t},validate_errorsReset:function(){this.validate.errors=null},validate_render:function(t){var e=this.$createElement;return t=t||{},this.base_ready?e("eb-validate",{ref:"validate",attrs:{host:this.validate_host,readOnly:"edit"!==this.container.mode,auto:!0,data:this.base.item,params:this.base.validateParams,errors:this.validate.errors},props:{onPerform:this.validate_onPerformValidate},on:{submit:t.validate_onSubmit||this.validate_onSubmit,validateItemChange:this.validate_onValidateItemChange,errorsSet:this.validate_errorsSet,errorsReset:this.validate_errorsReset}}):null}}};function y(t,e,n,r,a,o,i){try{var s=t[o](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,a)}function x(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(t){y(o,r,a,i,s,"next",t)}function s(t){y(o,r,a,i,s,"throw",t)}i(void 0)}))}}const _={data:function(){return{}},methods:{share_createLink:function(t){var e=this;return x(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.capability,n.next=3,e.$api.post("/a/share/share/generate",{host:r.host,atomId:e.container.atomId,url:e.$pageRoute.url});case 3:return a=n.sent,n.abrupt("return",a.link);case 5:case"end":return n.stop()}}),n)})))()},share_updateLink:function(){var t=this;return x(regeneratorRuntime.mark((function e(){var n,r,a,o,i,s,c,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1===t.base.item.atomStage&&!t.base_user.anonymous){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,n={actionModule:"a-host",actionComponent:"capabilities",name:"lookup"},e.next=6,t.$meta.util.performAction({ctx:t,action:n,item:{name:"shareLink"}});case 6:if(r=e.sent){e.next=9;break}return e.abrupt("return");case 9:return n={actionModule:"a-host",actionComponent:"capabilities",name:"invoke"},a=t.base.item.atomName||"",o=t.base.item.description||t.base.item.summary||"",e.next=14,t.share_createLink({capability:r});case 14:return i=e.sent,(s=t.base.item.imageCover||t.base.item.imageFirst)||(c=t.$meta.config.modules["a-base"],s=t.$meta.util.combineFetchStaticPath(c.site.cover)),u={name:"shareLink",options:{title:a,desc:o,link:i,imgUrl:s,success:function(){t.$view.toast.show({text:t.$text("SharingCompleted")})}}},e.next=20,t.$meta.util.performAction({ctx:t,action:n,item:u});case 20:e.next=24;break;case 22:e.prev=22,e.t0=e.catch(2);case 24:case"end":return e.stop()}}),e,null,[[2,22]])})))()}}};function C(t,e,n,r,a,o,i){try{var s=t[o](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,a)}const w={mixins:[a().prototype.$meta.module.get("a-base").options.mixins.ebLayoutManagerBase,a().prototype.$meta.module.get("a-base").options.mixins.ebAtomClasses,a().prototype.$meta.module.get("a-base").options.mixins.ebAtomActions,a().prototype.$meta.module.get("a-components").options.mixins.ebPageDirty,s,{data:function(){return{}},methods:{page_onGetTitle:function(){var t;return t=this.base.item?this.base.item.atomName:"edit"===this.container.mode?this.$text("Edit"):this.$text("View"),this.page_getDirtyTitle(t)},page_onGetTitleSub:function(){var t=this.base_getCurrentStage();return t&&"formal"!==t?this.$text(t.replace(t[0],t[0].toUpperCase())):""}}},u,m,p,g,_],data:function(){return{}},created:function(){this.index_load()},methods:{index_load:function(){var t,e=this;return(t=regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.base_init();case 2:return t.next=4,e.base_loadItem();case 4:if(t.sent){t.next=7;break}return t.abrupt("return");case 7:return t.next=9,e.layout_prepareConfigLayout();case 9:return t.next=11,e.share_updateLink();case 11:e.base.ready=!0;case 12:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(t){C(o,r,a,i,s,"next",t)}function s(t){C(o,r,a,i,s,"throw",t)}i(void 0)}))})()}}}},930:(t,e,n)=>{"use strict";n.d(e,{Z:()=>Q});var r=n(3),a=n.n(r);function o(t,e,n,r,a,o,i){try{var s=t[o](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,a)}const i={data:function(){return{base:{configAtomBase:null,configAtomCms:null,configAtom:null}}},computed:{base_userLabels:function(){return this.$store.getters["a/base/userLabels"]}},created:function(){this.$store.dispatch("a/base/getLabels")},methods:{base_onInit:function(){var t,e=this;return(t=regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("a/base/getAtomClasses");case 2:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,a){var i=t.apply(e,n);function s(t){o(i,r,a,s,c,"next",t)}function c(t){o(i,r,a,s,c,"throw",t)}s(void 0)}))})()},base_prepareReadOptions:function(){var t={};return t.layout=this.layout.current,this.container.resource&&(t.resource=1,t.resourceLocale=this.$meta.util.getLocale()),t},base_prepareSelectOptions:function(){var t={where:{}};return t.layout=this.layout.current,this.container.resource&&(t.resource=1,t.resourceLocale=this.$meta.util.getLocale()),this.search.query&&(t.where["a.atomName"]={val:this.search.query,op:"like"}),"select"===this.container.scene&&(t.where["a.id"]=this.container.params.selectedAtomIds.length>0?this.container.params.selectedAtomIds:null),this.container.options&&(t=this.$utils.extend({},t,this.container.options)),t},base_prepareSelectParams:function(t){var e=!t||!1!==t.setOrder,n=this.base_prepareSelectOptions(),r={atomClass:this.container.atomClass,options:n},a=this.filter_prepareSelectParams();if(a&&(r=this.$utils.extend({},r,a)),e){var o=this.order.selected||this.order_default(r);r.options.orders=[[this.order_getKey(o),o.by]]}return r},base_getItems:function(){return this.data_getItems()},base_getCurrentStage:function(){var t=this.$meta.util.getProperty(this.filter.data,"form.stage");return t||(t=this.container.options&&this.container.options.stage),t||(t="formal"),t},base_stageToString:function(t){return 0===t?"draft":1===t?"formal":"history"},base_getExportFields:function(){return this.$meta.util.getProperty(this.layout.configFull,"info.export.fields")}}};function s(t,e,n,r,a,o,i){try{var s=t[o](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,a)}const c={data:function(){return{}},methods:{layout_onGetLayoutConfigKeyCurrent:function(){var t=this.container.atomClass?"".concat(this.container.atomClass.module,"_").concat(this.container.atomClass.atomClassName):null;return"atom.".concat(t,".render.list.layout.current.").concat(this.$view.size)},layout_onSwipeoutOpened:function(t,e){this.actions_fetchActions(e)},layout_onColumnNameEqualOrder:function(t,e){var n=this.order_getKey(t);return n==="a.".concat(e)||n==="f.".concat(e)||n===e},layout_onPrepareConfigFull:function(){var t,e=this;return(t=regeneratorRuntime.mark((function t(){var n,r,a,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.container.atomClass,r=n?e.getAtomClass(n):null,t.next=4,e.$store.dispatch("a/baselayout/getLayoutItem",{layoutKey:"a-basefront:layoutAtomListBase"});case 4:if(a=t.sent,e.base.configAtomBase=a.content,!n||!r.cms){t.next=11;break}return t.next=9,e.$store.dispatch("a/baselayout/getLayoutItem",{layoutKey:"a-cms:layoutAtomListCms"});case 9:a=t.sent,e.base.configAtomCms=a.content;case 11:if(!n){t.next=19;break}if(o=e.$meta.util.getProperty(r,"layout.config.atomList"),!(o=e.$meta.util.normalizeResourceKey(o,n.module))){t.next=19;break}return t.next=17,e.$store.dispatch("a/baselayout/getLayoutItem",{layoutKey:o});case 17:a=t.sent,e.base.configAtom=a.content;case 19:return t.abrupt("return",e.$meta.util.extend({},e.base.configAtomBase,e.base.configAtomCms,e.base.configAtom));case 20:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(t){s(o,r,a,i,c,"next",t)}function c(t){s(o,r,a,i,c,"throw",t)}i(void 0)}))})()}}};function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function l(t,e,n,r,a,o,i){try{var s=t[o](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,a)}function m(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(t){l(o,r,a,i,s,"next",t)}function s(t){l(o,r,a,i,s,"throw",t)}i(void 0)}))}}const d={data:function(){return{bulk:{actions:null,selectedAtoms:[],selecting:!1}}},methods:{bulk_actionsInit:function(){var t=this;return m(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.container.atomClass||"select"===t.container.scene||"selecting"===t.container.scene){e.next=3;break}return e.next=3,t.bulk_loadActions();case 3:case"end":return e.stop()}}),e)})))()},bulk_onAction:function(t,e){this.$f7.tooltip.hide(t.currentTarget);var n=this.getAction(e);if(n){n=this.$utils.extend({},n,{targetEl:t.currentTarget});var r={atomClassId:e.atomClassId,module:e.module,atomClassName:e.atomClassName,atomClassIdParent:e.atomClassIdParent};if("create"===n.name){var a=this.$meta.util.getProperty(this.container.params,"createParams");a&&(r=this.$utils.extend({},r,a));var o=this.base_prepareSelectParams({setOrder:!1});o.options.language&&(r.atomLanguage=o.options.language),o.options.category&&(r.atomCategoryId=o.options.category)}return this.$meta.util.performAction({ctx:this,action:n,item:r})}},bulk_loadActions:function(){var t=this;return m(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.bulk.actions){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.$api.post("/a/base/atom/actionsBulk",{atomClass:t.container.atomClass,stage:t.base_getCurrentStage()});case 4:t.bulk.actions=e.sent;case 5:case"end":return e.stop()}}),e)})))()},bulk_clearSelectedAtoms:function(){this.bulk.selectedAtoms=[]},bulk_closeSelecting:function(){this.bulk.selecting=!1,this.bulk_clearSelectedAtoms()},bulk_onSelectingSwitch:function(){this.bulk.selecting=!this.bulk.selecting,this.bulk.selecting||this.bulk_clearSelectedAtoms()},bulk_onItemChange:function(t,e){var n=this.bulk.selectedAtoms,r=n.findIndex((function(t){return t.atomId===e.atomId}));t.currentTarget.checked&&-1===r?n.push(e):!t.currentTarget.checked&&r>-1&&n.splice(r,1)},bulk_onSelectingChecking:function(){var t=this.base_getItems();this.bulk.selectedAtoms.length>=t.length?this.bulk.selectedAtoms=[]:this.bulk.selectedAtoms=t.concat()},bulk_renderActionsLeft:function(){var t=this.$createElement,e=[],n=this.base_getItems(),r=this.bulk.selectedAtoms;return(n.length>0||this.bulk.selecting)&&e.push(t("eb-link",{key:"actionsLeft:select",attrs:{iconF7:"::grading",tooltip:this.$text("Select")},props:{onPerform:this.bulk_onSelectingSwitch}})),this.bulk.selecting&&e.push(t("eb-link",{key:"actionsLeft:selectChecking",attrs:{iconF7:0===r.length?":outline:checkbox-outline":"::checkbox-checked",iconBadge:r.length.toString()},props:{onPerform:this.bulk_onSelectingChecking}})),e},bulk_renderActionsLeftB:function(){var t=this.$createElement,e=[],n=this.bulk.selectedAtoms;return e.push(t("eb-link",{key:"actionsLeftB:select",attrs:{iconF7:"::grading",iconBadge:this.bulk.selecting?n.length.toString():0,tooltip:this.$text("Select")},props:{onPerform:this.bulk_onSelectingSwitch}})),e},bulk_renderActionsRight:function(){var t=this,e=this.$createElement,n=[],r=this.base_getCurrentStage(),a=this.bulk.selectedAtoms;if(this.bulk.actions&&this.actionsAll){var o,i=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){s=!0,o=t},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}(this.bulk.actions);try{var s=function(){var i=o.value,s=t.getAction(i);if(s.stage&&!s.stage.split(",").some((function(t){return t===r})))return"continue";(void 0===s.select||null===s.select||!0===s.select&&a.length>0||!1===s.select&&!t.bulk.selecting)&&n.push(e("eb-link",{key:"actionsRight:".concat(s.name),attrs:{iconMaterial:s.icon&&s.icon.material,iconF7:s.icon&&s.icon.f7,tooltip:s.icon&&s.titleLocale},props:{onPerform:function(e){return t.bulk_onAction(e,i)}}},[!s.icon&&s.titleLocale]))};for(i.s();!(o=i.n()).done;)s()}catch(t){i.e(t)}finally{i.f()}}return n}}};function f(t,e,n,r,a,o,i){try{var s=t[o](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,a)}const h={data:function(){return{select:{selectedAtoms:[]}}},methods:{select_prepareSelectedAtoms:function(){var t,e=this;return(t=regeneratorRuntime.mark((function t(){var n,r,a,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("selecting"===e.container.scene){t.next=2;break}return t.abrupt("return");case 2:if(!e.container.params.selectedAtoms){t.next=5;break}return e.select.selectedAtoms=e.container.params.selectedAtoms,t.abrupt("return");case 5:if(!((n=e.container.params.selectedAtomIds)&&n.length>0)){t.next=15;break}return r={where:{"a.id":n}},e.container.resource&&(r.resource=1,r.resourceLocale=e.$meta.util.getLocale()),a={options:r},t.next=12,e.$api.post("/a/base/atom/select",a);case 12:return o=t.sent,e.select.selectedAtoms=o.list,t.abrupt("return");case 15:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(t){f(o,r,a,i,s,"next",t)}function s(t){f(o,r,a,i,s,"throw",t)}i(void 0)}))})()},select_getSelectedAtoms:function(){return"selecting"===this.container.scene?this.select.selectedAtoms:"select"===this.container.scene?this.base_getItems():void 0},select_onItemChange:function(t,e){if("single"===this.container.params.selectMode)t.currentTarget.checked&&(this.select.selectedAtoms=[e]);else{var n=this.select.selectedAtoms,r=n.findIndex((function(t){return t.atomId===e.atomId}));t.currentTarget.checked&&-1===r?n.push(e):!t.currentTarget.checked&&r>-1&&n.splice(r,1)}}}};function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}const v={data:function(){return{order:{selected:null}}},computed:{order_current:function(){return this.order.selected||this.order_default()},order_list:function(){var t=this.$meta.util.getProperty(this.layout.configFull,"info.ordersBase"),e=this.$meta.util.getProperty(this.layout.configFull,"info.orders");return e?t.concat(e):t}},methods:{order_default:function(t){return t||(t=this.base_prepareSelectParams({setOrder:!1})),"select"===this.container.scene?{name:"atomName",by:"asc",tableAlias:"a"}:t.options.star?{name:"updatedAt",by:"desc",tableAlias:"d"}:t.options.label?{name:"updatedAt",by:"desc",tableAlias:"e"}:this._order_default_others()},_order_default_others:function(){return this.order_list.find((function(t){return t.default}))||{name:"atomUpdatedAt",by:"desc",tableAlias:""}},order_onPerformPopover:function(t){var e=this.$refs.order_popover.$el;this.$f7.popover.open(e,t.currentTarget)},order_onPerformChange:function(t,e){var n=this.order_current;this.order_getKey(n)===this.order_getKey(e)?this.order.selected={name:n.name,tableAlias:n.tableAlias,by:"desc"===n.by?"asc":"desc"}:this.order.selected=e,this.page_onRefresh()},order_getKey:function(t){return t?""===t.tableAlias?t.name:"".concat(t.tableAlias||"f",".").concat(t.name):null},order_getStatus:function(t){var e=this.order_current;return this.order_getKey(e)===this.order_getKey(t)?"desc"===e.by?"::arrow-drop-down":"::arrow-drop-up":""},order_renderAction:function(){var t=this;return(0,this.$createElement)("eb-link",{attrs:{iconF7:"::sort",tooltip:this.$text("Sort")},props:{onPerform:function(e){return t.order_onPerformPopover(e)}}})},order_renderPopover:function(){var t=this,e=this.$createElement;if(!this.base.ready)return null;var n,r=[],a=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return p(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){s=!0,o=t},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}(this.order_list);try{var o=function(){var a=n.value;r.push(e("eb-list-item",{key:t.order_getKey(a),attrs:{popoverClose:!0,link:"#"},props:{onPerform:function(e){return t.order_onPerformChange(e,a)}}},[e("f7-icon",{slot:"media",attrs:{f7:t.order_getStatus(a)}}),e("div",{slot:"title"},[t.$text(a.title)])]))};for(a.s();!(n=a.n()).done;)o()}catch(t){a.e(t)}finally{a.f()}return e("eb-popover",{ref:"order_popover",attrs:{ready:!0}},[e("f7-list",{attrs:{inset:!0}},[r])])}}};function b(t,e,n,r,a,o,i){try{var s=t[o](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,a)}function g(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(t){b(o,r,a,i,s,"next",t)}function s(t){b(o,r,a,i,s,"throw",t)}i(void 0)}))}}const y={data:function(){return{}},methods:{filter_onPrepareData:function(){var t=this;return g(regeneratorRuntime.mark((function e(){var n,r,a,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={atomName:null,mine:t.container.options&&t.container.options.mine||0,stage:t.container.options&&t.container.options.stage||"formal",language:t.container.options&&t.container.options.language||"",category:t.container.options&&t.container.options.category||0,tag:t.container.options&&t.container.options.tag||0,star:t.container.options&&t.container.options.star||0,label:t.container.options&&t.container.options.label||0,role:t.container.options&&t.container.options.role||0,roleName:t.container.options&&t.container.options.roleName||null,roleNameLocale:t.container.options&&t.container.options.roleNameLocale||null,atomClass:t.container.atomClass},r=t.$meta.util.getProperty(t.container,"params.filter.formAtomClass")||{},e.next=4,t.filter_loadSchemaBasic();case 4:return a=e.sent,e.next=7,t.filter_loadSchemaGeneral();case 7:return o=e.sent,e.next=10,t.filter_loadSchemaSearch(t.container.atomClass);case 10:return i=e.sent,e.abrupt("return",{form:n,formAtomClass:r,schemaBasic:a,schemaGeneral:o,schemaSearch:i,searchStatesBasic:null,searchStatesGeneral:null,searchStatesSearch:null});case 12:case"end":return e.stop()}}),e)})))()},filter_loadSchemaBasic:function(){var t=this;return g(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.filter_getConfig(),r=n.tabs.basic,e.next=4,t.filter_loadSchemaAndCombineSearchClauseLoadModules({module:r.schema.module,schema:r.schema.schema});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))()},filter_loadSchemaGeneral:function(){var t=this;return g(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.filter_getConfig(),r=n.tabs.general,e.next=4,t.filter_loadSchemaAndCombineSearchClauseLoadModules({module:r.schema.module,schema:r.schema.schema});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))()},filter_loadSchemaSearch:function(t){var e=this;return g(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t){n.next=2;break}return n.abrupt("return",null);case 2:return n.next=4,e.$api.post("/a/base/atomClass/validatorSearch",{atomClass:{module:t.module,atomClassName:t.atomClassName}});case 4:return r=n.sent,n.next=7,e.filter_loadSchemaAndCombineSearchClauseLoadModules({module:r.module,validator:r.validator,schema:null});case 7:return n.abrupt("return",n.sent);case 8:case"end":return n.stop()}}),n)})))()},filter_onCombineSelectParams:function(){if(!this.filter.data)return null;var t={where:{}},e={options:t},n=this.filter.data.form;if(n){var r=this.$meta.util.combineSearchClause({ctx:this,schema:this.filter.data.schemaBasic,data:n,searchStates:this.filter.data.searchStatesBasic}),a=this.$meta.util.combineSearchClause({ctx:this,schema:this.filter.data.schemaGeneral,data:n,searchStates:this.filter.data.searchStatesGeneral}),o=Object.assign({},r,a);for(var i in o.atomClass&&(e.atomClass=o.atomClass.val,delete o.atomClass),o.__or__atomNameResource&&(t.where.__or__atomNameResource=o.__or__atomNameResource,delete o.__or__atomNameResource),o.__and__createdAt&&(t.where.__and__createdAt=o.__and__createdAt,delete o.__and__createdAt),o)t[i]=o[i].val;n.category&&(t.category=n.category),n.tag&&(t.tag=n.tag)}var s=this.filter.data.formAtomClass;if(s){var c=this.$meta.util.combineSearchClause({ctx:this,schema:this.filter.data.schemaSearch,data:s,searchStates:this.filter.data.searchStatesSearch});c&&(Object.assign(t.where,c),Object.keys(c).length>0&&(t.mode="search"))}return e}}};function x(t,e,n,r,a,o,i){try{var s=t[o](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,a)}const _={data:function(){return{}},methods:{actions_fetchActions:function(t){var e,n=this;return(e=regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t._actions){e.next=2;break}return e.abrupt("return",t._actions);case 2:return e.next=4,n.$api.post("/a/base/atom/actions",{key:{atomId:t.atomId},basic:!n.$device.desktop});case 4:return r=(r=e.sent).filter((function(t){return!n.getAction(t).disableInList})),0===t.atomStage&&t.atomFlowId>0&&r.push({module:t.module,atomClassName:t.atomClassName,name:"workflow"}),a().set(t,"_actions",r),e.abrupt("return",t._actions);case 9:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(t){x(o,r,a,i,s,"next",t)}function s(t){x(o,r,a,i,s,"throw",t)}i(void 0)}))})()}}};function C(t,e,n,r,a,o,i){try{var s=t[o](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,a)}function w(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(t){C(o,r,a,i,s,"next",t)}function s(t){C(o,r,a,i,s,"throw",t)}i(void 0)}))}}const k={data:function(){return{data:{provider:{itemKey:"atomId",selectedItemsKey:"selectedAtoms"}}}},methods:{data_adapter_onProviderSwitch:function(){var t=this;return w(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.bulk_closeSelecting();case 1:case"end":return e.stop()}}),e)})))()},data_provider_onItemsClear:function(){this.bulk_clearSelectedAtoms()},data_provider_onPageCurrentChanged:function(){this.bulk_clearSelectedAtoms()},data_provider_onLoadItemsPage:function(t){var e=this;return w(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.page,(a=e.base_prepareSelectParams()).options.page=r,n.next=5,e.$api.post("/a/base/atom/select",a);case 5:return n.abrupt("return",n.sent);case 6:case"end":return n.stop()}}),n)})))()},data_provider_onLoadItemsCount:function(){var t=this;return w(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.base_prepareSelectParams(),e.next=3,t.$api.post("/a/base/atom/count",n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))()}}};function A(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function $(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?A(Object(n),!0).forEach((function(e){I(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function I(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function P(t,e,n,r,a,o,i){try{var s=t[o](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,a)}function S(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(t){P(o,r,a,i,s,"next",t)}function s(t){P(o,r,a,i,s,"throw",t)}i(void 0)}))}}const O={created:function(){this.$meta.eventHub.$on("atom:star",this.star_onChanged)},beforeDestroy:function(){this.$meta.eventHub.$off("atom:star",this.star_onChanged)},methods:{star_onSwitch:function(t,e){var n=this;return S(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=e.star?0:1,r.next=3,n.star_onSwitch2(t,e,a,"swipeoutClose");case 3:return r.abrupt("return",r.sent);case 4:case"end":return r.stop()}}),r)})))()},star_onSwitch2:function(t,e,n,r){var a=this;return S(regeneratorRuntime.mark((function o(){var i,s;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(!a.base_user.anonymous){o.next=5;break}return o.next=3,a.$view.dialog.confirm(a.$text("Please Sign In"));case 3:return a.$meta.vueLayout.openLogin(),o.abrupt("return");case 5:return i={atomId:e.atomId,itemId:e.itemId},o.next=8,a.$api.post("/a/base/atom/star",{key:i,atom:{star:n}});case 8:s=o.sent,a.$meta.eventHub.$emit("atom:star",{key:i,star:s.star,starCount:s.starCount}),a.$meta.util[r](t.currentTarget);case 11:case"end":return o.stop()}}),o)})))()},star_onChanged:function(t){var e=this;return S(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.key.atomId,n.next=3,e.data.adapter._loopProviders(function(){var n=S(regeneratorRuntime.mark((function n(a){var o,i,s;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:o=e.data.adapter.findItemProvier(a,r),i=o.item,s=!!i,e.base_prepareSelectParams({setOrder:!1}).options.star?0===t.star&&s?e.data.adapter._callMethodProvider(a,"spliceItem",o):1!==t.star||s?s&&e.data.adapter._callMethodProvider(a,"replaceItem",o,$($({},i),{},{star:t.star})):e.data.adapter._callMethodProvider(a,"onPageRefresh"):e.data.adapter._callMethodProvider(a,"replaceItem",o,$($({},i),{},{star:t.star}));case 6:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}());case 3:case"end":return n.stop()}}),n)})))()}}};function R(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function L(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?R(Object(n),!0).forEach((function(e){N(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function N(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function T(t,e,n,r,a,o,i){try{var s=t[o](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,a)}function j(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(t){T(o,r,a,i,s,"next",t)}function s(t){T(o,r,a,i,s,"throw",t)}i(void 0)}))}}const M={created:function(){this.$meta.eventHub.$on("atom:labels",this.labels_onChanged)},beforeDestroy:function(){this.$meta.eventHub.$off("atom:labels",this.labels_onChanged)},methods:{labels_onClick:function(t,e){var n=this;return j(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n.base_user.anonymous){r.next=5;break}return r.next=3,n.$view.dialog.confirm(n.$text("Please Sign In"));case 3:return n.$meta.vueLayout.openLogin(),r.abrupt("return");case 5:a={},n.$view.inPanel()&&(a.target="_self"),n.$view.navigate("/a/basefront/atom/labels?atomId=".concat(e.atomId),a),n.$meta.util.swipeoutClose(t.currentTarget);case 9:case"end":return r.stop()}}),r)})))()},labels_onChanged:function(t){var e=this;return j(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.key.atomId,n.next=3,e.data.adapter._loopProviders(function(){var n=j(regeneratorRuntime.mark((function n(a){var o,i,s,c,u,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:o=e.data.adapter.findItemProvier(a,r),i=o.item,s=!!i,c=e.base_prepareSelectParams({setOrder:!1}),(u=c.options.label)?!(l=t.labels.indexOf(String(u))>-1)&&s?e.data.adapter._callMethodProvider(a,"spliceItem",o):l&&!s?e.data.adapter._callMethodProvider(a,"onPageRefresh"):s&&e.data.adapter._callMethodProvider(a,"replaceItem",o,L(L({},i),{},{labels:JSON.stringify(t.labels)})):e.data.adapter._callMethodProvider(a,"replaceItem",o,L(L({},i),{},{labels:JSON.stringify(t.labels)}));case 6:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}());case 3:case"end":return n.stop()}}),n)})))()}}};function D(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function E(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?D(Object(n),!0).forEach((function(e){F(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function F(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function B(t,e,n,r,a,o,i){try{var s=t[o](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,a)}function U(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(t){B(o,r,a,i,s,"next",t)}function s(t){B(o,r,a,i,s,"throw",t)}i(void 0)}))}}const V={created:function(){this.$meta.eventHub.$on("atom:action",this.event_onActionChanged),this.$meta.eventHub.$on("atom:action:ext",this.event_onActionExtChanged),this.$meta.eventHub.$on("atom:actions",this.event_onActionsChanged)},beforeDestroy:function(){this.$meta.eventHub.$off("atom:action",this.event_onActionChanged),this.$meta.eventHub.$off("atom:action:ext",this.event_onActionExtChanged),this.$meta.eventHub.$off("atom:actions",this.event_onActionsChanged)},methods:{event_onActionChanged_create:function(t){var e=this;return U(regeneratorRuntime.mark((function n(){var r,a,o,i,s;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=t.key,a=t.atom,o=e.base_prepareSelectParams({setOrder:!1}),i=o.atomClass,s=o.options.stage,e.base_stageToString(a.atomStage)===s){n.next=7;break}return n.abrupt("return");case 7:if(!i||i.module===a.module&&i.atomClassName===a.atomClassName){n.next=9;break}return n.abrupt("return");case 9:return n.next=11,e.data.adapter._loopProviders(function(){var t=U(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.data.adapter._callMethodProvider(n,"onPageRefresh",{key:r,item:a});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 11:case"end":return n.stop()}}),n)})))()},event_onActionChanged_delete:function(t){var e=this;return U(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.key,n.next=3,e.data.adapter._loopProviders(function(){var t=U(regeneratorRuntime.mark((function t(n){var a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((a=e.data.adapter.findItemProvier(n,r.atomId)).item){t.next=4;break}return t.abrupt("return");case 4:e.data.adapter._callMethodProvider(n,"spliceItem",a);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 3:case"end":return n.stop()}}),n)})))()},event_onActionChanged_others:function(t){var e=this;return U(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.key,n.next=3,e.data.adapter._loopProviders(function(){var t=U(regeneratorRuntime.mark((function t(n){var a,o,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((a=e.data.adapter.findItemProvier(n,r.atomId)).item){t.next=4;break}return t.abrupt("return");case 4:return o=e.base_prepareReadOptions(),t.next=7,e.$api.post("/a/base/atom/read",{key:r,options:o});case 7:i=t.sent,e.data.adapter._callMethodProvider(n,"replaceItem",a,i);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 3:case"end":return n.stop()}}),n)})))()},event_onActionChanged_addChildNode:function(t){var e=this;return U(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.key,a=t.node,n.next=4,e.data.adapter._loopProviders(function(){var t=U(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.data.adapter._callMethodProvider(n,"addChildNode",{key:r,node:a});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 4:case"end":return n.stop()}}),n)})))()},event_onActionChanged_moveNode:function(t){var e=this;return U(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.key,a=t.node,n.next=4,e.data.adapter._loopProviders(function(){var t=U(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.data.adapter._callMethodProvider(n,"moveNode",{key:r,node:a});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 4:case"end":return n.stop()}}),n)})))()},event_onActionChanged:function(t){var e=this;return U(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("create"!==(r=t.action).name){n.next=6;break}return n.next=4,e.event_onActionChanged_create(t);case 4:case 9:case 14:case 19:n.next=23;break;case 6:if("delete"!==r.name){n.next=11;break}return n.next=9,e.event_onActionChanged_delete(t);case 11:if("addChildNode"!==r.name){n.next=16;break}return n.next=14,e.event_onActionChanged_addChildNode(t);case 16:if("moveNode"!==r.name){n.next=21;break}return n.next=19,e.event_onActionChanged_moveNode(t);case 21:return n.next=23,e.event_onActionChanged_others(t);case 23:case"end":return n.stop()}}),n)})))()},event_onActionExtChanged:function(t){var e=this;return U(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.data.adapter._loopProviders(function(){var n=U(regeneratorRuntime.mark((function n(r){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.data.adapter._callMethodProvider(r,"onActionExt",t);case 1:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}());case 2:case"end":return n.stop()}}),n)})))()},event_onActionsChanged:function(t){var e=this;return U(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.key,n.next=3,e.data.adapter._loopProviders(function(){var t=U(regeneratorRuntime.mark((function t(n){var a,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.data.adapter.findItemProvier(n,r.atomId),o=a.item){t.next=4;break}return t.abrupt("return");case 4:e.data.adapter._callMethodProvider(n,"replaceItem",a,E(E({},o),{},{_actions:null}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 3:case"end":return n.stop()}}),n)})))()}}};function Z(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return H(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?H(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){s=!0,o=t},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function H(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function K(t,e,n,r,a,o,i){try{var s=t[o](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,a)}function J(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(t){K(o,r,a,i,s,"next",t)}function s(t){K(o,r,a,i,s,"throw",t)}i(void 0)}))}}const z={methods:{item_onAction:function(t,e,n){var r=this;return J(regeneratorRuntime.mark((function a(){var o;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(o=r.getAction(n)){a.next=3;break}return a.abrupt("return");case 3:return a.next=5,r.$meta.util.performAction({ctx:r,action:o,item:e});case 5:r.$meta.util.swipeoutClose(t.currentTarget);case 6:case"end":return a.stop()}}),a)})))()},item_onActionView:function(t,e){var n=this;return J(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.item_onAction(t,e,{module:e.module,atomClassName:e.atomClassName,name:"read"});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})))()},item_getAtomName:function(t){return t.atomNameLocale||t.atomName},item_getMetaMedia:function(t,e){var n;return(n=e?t[e]:t._meta&&t._meta.media||t.avatar)||(n=this.$meta.config.modules["a-base"].user.avatar.default),this.$meta.util.combineImageUrl(n,24)},item_getMetaMediaLabel:function(t){return t._meta&&t._meta.mediaLabel||t.userName},item_getMetaSummary:function(t){var e=[];if(!this.container.atomClass){var n=this.getAtomClass({module:t.module,atomClassName:t.atomClassName});n&&e.push(n.titleLocale)}var r=t.resourceTypeLocale;r&&e.push(r);var a=t.atomCategoryNameLocale||t.atomCategoryName;a&&e.push(a);var o=t._meta&&t._meta.summary||"";return o&&e.push(o),e.join(" / ")},item_getMetaFlags:function(t){var e=t._meta&&t._meta.flags||[];return Array.isArray(e)||(e=e.split(",")),t.atomDisabled&&(e=[this.$text("Disabled")].concat(e)),e},item_getLabel:function(t){return this.base_userLabels?this.base_userLabels[t]:null},item_getActionColor:function(t,e){return 0===e?"orange":1===e?"red":"blue"},item_getActionTitle:function(t,e){return this.getActionTitle(t,e)},item_renderContextMenu:function(t,e){var n,r=this,a=this.$createElement;if(t&&1===t.atomStage){var o;("menu"===e||!e&&this.$device.desktop)&&(o=a("div",{slot:"title"},[this.$text(t.star?"Unstar":"UserStar")]));var i,s=a("div",{attrs:{color:"teal"},props:{onPerform:function(e){return r.star_onSwitch(e,t)}}},[a("f7-icon",{slot:"media",attrs:{color:t.star?"orange":"",f7:t.star?"::star":":outline:star-outline"}}),o]);("menu"===e||!e&&this.$device.desktop)&&(i=a("div",{slot:"title"},[this.$text("UserLabels")]));var c=a("div",{attrs:{color:"blue"},props:{onPerform:function(e){return r.labels_onClick(e,t)}}},[a("f7-icon",{slot:"media",attrs:{f7:":outline:label-outline"}}),i]);n=a("div",{slot:"left"},[s,c])}var u=[];if(t&&t._actions){var l=function(n){n=parseInt(n);var o=t._actions[n],i=r.getAction(o),s=void 0;("menu"===e||!e&&r.$device.desktop)&&(s=a("div",{slot:"title"},[r.item_getActionTitle(o,t)])),u.push(a("div",{key:o.id,attrs:{color:r.item_getActionColor(o,n)},props:{onPerform:function(e){return r.item_onAction(e,t,o)}}},[a("f7-icon",{slot:"media",attrs:{material:i.icon&&i.icon.material,f7:i.icon&&i.icon.f7}}),s])),m=n};for(var m in t._actions)l(m)}var d=a("div",{slot:"right",attrs:{ready:t&&!!t._actions}},[u]);return a("eb-context-menu",{attrs:{mode:e}},[n,d])},item_renderMedia:function(t,e,n){return(0,this.$createElement)("img",{class:e||"avatar avatar24",attrs:{src:this.item_getMetaMedia(t,n)}})},item_renderStats:function(t){var e,n,r=this.$createElement,a=[];return t.star>0&&a.push(r("span",{key:"stat_star"},[r("f7-icon",{attrs:{f7:"::star",size:"14",color:"orange"}})])),t.attachmentCount>0&&(t.attachmentCount>1&&(e=r("sub",{class:"text-color-orange"},[t.attachmentCount])),a.push(r("span",{key:"stat_attachmentCount_icon"},[r("f7-icon",{attrs:{f7:"::attachment-line",size:"14",color:"orange"}}),e]))),t.commentCount>0&&(t.commentCount>1&&(n=r("sub",{class:"text-color-orange"},[t.commentCount])),a.push(r("span",{key:"stat_commentCount_icon"},[r("f7-icon",{attrs:{f7:"::comment-dots",size:"14",color:"orange"}}),n]))),a},item_renderMetaFlags:function(t){var e=this.$createElement,n=[];t.flowNodeNameCurrentLocale&&n.push(e("f7-badge",{key:"flowNodeNameCurrent",attrs:{color:"orange"}},[t.flowNodeNameCurrentLocale]));var r,a=Z(this.item_getMetaFlags(t));try{for(a.s();!(r=a.n()).done;){var o=r.value;n.push(e("f7-badge",{key:o},[o]))}}catch(t){a.e(t)}finally{a.f()}return n},item_renderLabels:function(t){var e=this.$createElement,n=[];if(t.labels&&this.base_userLabels){var r,a=Z(JSON.parse(t.labels));try{for(a.s();!(r=a.n()).done;){var o=r.value,i=this.item_getLabel(o);n.push(e("f7-badge",{key:o,style:{backgroundColor:i.color}},[i.text]))}}catch(t){a.e(t)}finally{a.f()}}return n}}};function q(t,e,n,r,a,o,i){try{var s=t[o](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,a)}const Q={mixins:[a().prototype.$meta.module.get("a-base").options.mixins.ebLayoutManagerBase,a().prototype.$meta.module.get("a-base").options.mixins.ebAtomClasses,a().prototype.$meta.module.get("a-base").options.mixins.ebAtomActions,i,{data:function(){return{}},methods:{page_ptr:function(){return!0},page_infinite:function(){return!0},page_onGetTitle:function(){var t=this.getAtomClass(this.container.atomClass),e=t&&t.titleLocale;return"select"===this.container.scene?t?"".concat(this.$text("Selected")," ").concat(e):"".concat(this.$text("Selected")," ").concat(this.$text("Atom")):"selecting"===this.container.scene?t?"".concat(this.$text("Select")," ").concat(e):"".concat(this.$text("Select")," ").concat(this.$text("Atom")):"search"===this.container.scene?t?"".concat(this.$text("Search")," ").concat(e):"".concat(this.$text("Search")," ").concat(this.$text("Atom")):t?e:this.$text("Atom")},page_onGetTitleSub:function(){var t=this.base_getCurrentStage();return t&&"formal"!==t?this.$text(t.replace(t[0],t[0].toUpperCase())):""}}},c,d,{data:function(){return{search:{query:null}}},methods:{search_onSearch:function(t){this.search.query=t,this.search.query?this.page_onRefresh():this.page_onClear()},search_onSearchDisable:function(){this.$f7router.back()},search_onSearchAdvanced:function(){this.filter_onPerform()}}},h,v,y,{data:function(){return{}},methods:{subnavbar_policyDefaultCalc:function(){var t=this.container.atomClass&&"select"!==this.container.scene&&"selecting"!==this.container.scene;return{enable:!!t&&"small"===this.$view.size,render:t}}}},_,k,O,M,V,z],data:function(){return{}},created:function(){var t=this;this.$nextTick((function(){t.index_init()}))},methods:{index_init:function(){var t,e=this;return(t=regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.base_init();case 2:return t.next=4,e.select_prepareSelectedAtoms();case 4:return t.next=6,e.layout_prepareConfigLayout();case 6:return t.next=8,e.bulk_actionsInit();case 8:return t.next=10,e.filter_prepareData();case 10:e.base.ready=!0;case 11:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(t){q(o,r,a,i,s,"next",t)}function s(t){q(o,r,a,i,s,"throw",t)}i(void 0)}))})()}}}},28:(t,e,n)=>{"use strict";n.d(e,{Z:()=>c});var r=n(349),a=n.n(r);function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function i(t,e,n,r,a,o,i){try{var s=t[o](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,a)}function s(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function s(t){i(o,r,a,s,c,"next",t)}function c(t){i(o,r,a,s,c,"throw",t)}s(void 0)}))}}const c={props:{atomClass:{},language:{},categoryIdStart:{},multiple:{},catalogOnly:{},leafOnly:{},disabledCategoryIds:{},selectedCategoryIds:{},checkbox:{default:!0},categoryHidden:{default:void 0}},data:function(){return{}},watch:{atomClass:function(){this.reload()},language:function(){this.reload()}},mounted:function(){this.init(this.selectedCategoryIds)},methods:{getInstance:function(){return this.$refs.tree},init:function(t){var e=this;return s(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r={attrs:{itemToggle:!1,selectable:!1,multiple:e.multiple,checkbox:e.checkbox,checkOnLabel:!0}},a=e.getInstance(),n.next=4,a.load(r);case 4:return n.next=6,a.checkNodes(t,!0,!0);case 6:case"end":return n.stop()}}),n)})))()},reload:function(){var t=this;return s(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.init(null);case 2:case"end":return e.stop()}}),e)})))()},_findChildren:function(t,e){var n,r=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){c=!0,i=t},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw i}}}}(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a.id===e)return a.children;if(a.children){var i=this._findChildren(a.children,e);if(i)return i}}}catch(t){r.e(t)}finally{r.f()}return null},_renderNodeLabelStart:function(t){if(0===t.id)return this.$text("Root");var e=t.data;return e.categoryNameLocale||e.categoryName||"[".concat(this.$text("New Category"),"]")},_createNodeRoot:function(t){var e=!this.leafOnly;return[{id:0,attrs:{toggle:!0,loadChildren:!0,checkbox:this.checkbox&&e,checkOnLabel:e,selectable:e,itemToggle:!e,disabled:this.disabledCategoryIds&&this.disabledCategoryIds.indexOf(0)>-1},data:{id:0,categoryCatalog:1,children:t}}]},_createNodeChildren:function(t){var e=this;if(!t)return[];var n=t.map((function(t){var n=!e.leafOnly||0===t.categoryCatalog,r=e.checkbox&&n,a=!n&&1===t.categoryCatalog,o=e.disabledCategoryIds&&e.disabledCategoryIds.indexOf(t.id)>-1;return{id:t.id,attrs:{toggle:1===t.categoryCatalog,loadChildren:1===t.categoryCatalog,checkbox:r,checkOnLabel:n,selectable:n,itemToggle:!n,folder:a,disabled:o},data:t}}));return n.filter((function(t){return!e.catalogOnly||1===t.data.categoryCatalog}))},onLoadChildren:function(t){var e=this;return s(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.root){n.next=8;break}return n.next=3,e.$store.dispatch("a/base/getCategoryTree",{atomClass:e.atomClass,language:e.language,categoryHidden:e.categoryHidden});case 3:if(r=n.sent,void 0!==e.categoryIdStart){n.next=6;break}return n.abrupt("return",e._createNodeRoot(r));case 6:return a=0===e.categoryIdStart?r:e._findChildren(r,e.categoryIdStart),n.abrupt("return",e._createNodeChildren(a));case 8:return n.abrupt("return",e._createNodeChildren(t.data.children));case 9:case"end":return n.stop()}}),n)})))()},onNodeChange:function(t){this.$emit("node:change",t),this.$emit("nodeChange",t)},onNodeSelect:function(t){this.$emit("node:select",t),this.$emit("nodeSelect",t)}},render:function(){var t=this,e=arguments[0];return e("eb-treeview",a()([{ref:"tree",attrs:{auto:!1},props:{onLoadChildren:this.onLoadChildren},on:{nodeChange:this.onNodeChange,nodeSelect:this.onNodeSelect}},{scopedSlots:{"label-start":function(e){var n=e.node;return t._renderNodeLabelStart(n)}}}]))}}},592:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const r={meta:{global:!1},mixins:[n(930).Z],props:{container:{type:Object}},data:function(){return{}},methods:{reload:function(t){this.data_onPageRefresh(t)},loadMore:function(){this.data_onPageInfinite()}},render:function(){return this.layout_renderLayout()}}},276:(t,e,n)=>{"use strict";function r(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){c=!0,i=t},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw i}}}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function o(t,e,n,r,a,o,i){try{var s=t[o](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,a)}function i(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var i=t.apply(e,n);function s(t){o(i,r,a,s,c,"next",t)}function c(t){o(i,r,a,s,c,"throw",t)}s(void 0)}))}}n.d(e,{Z:()=>s});const s={props:{atomClass:{},language:{},multiple:{},searchQuery:{},selectedTags:{},showBlockCurrent:{}},data:function(){return{tagsCurrent:[],tagsAll:null}},watch:{atomClass:function(){this.reload()},language:function(){this.reload()}},computed:{tagsAll2:function(){var t=this;return this.tagsAll&&this.searchQuery?this.tagsAll.filter((function(e){return e.tagName.toLowerCase().indexOf(t.searchQuery.toLowerCase())>-1})):this.tagsAll}},created:function(){this.init()},methods:{init:function(){var t=this;return i(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.initTagsCurrent(),e.next=3,t.loadTagsAll();case 3:case"end":return e.stop()}}),e)})))()},reload:function(){var t=this;return i(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.tagsCurrent=[],e.next=3,t.loadTagsAll();case 3:case"end":return e.stop()}}),e)})))()},initTagsCurrent:function(){this.selectedTags?Array.isArray(this.selectedTags)?this.tagsCurrent=this.selectedTags.concat():"number"==typeof this.selectedTags?this.tagsCurrent=[this.selectedTags]:this.tagsCurrent=JSON.parse(this.selectedTags):this.tagsCurrent=[]},loadTagsAll:function(){var t=this;return i(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={where:{language:t.language},orders:[["tagName","asc"]]},e.next=3,t.$api.post("/a/base/tag/list",{atomClass:t.atomClass,options:n});case 3:r=e.sent,t.tagsAll=r.list;case 5:case"end":return e.stop()}}),e)})))()},getTagName:function(t){var e=this.getTagBase(t);return e?e.tagName:null},getTagBase:function(t){return this.tagsAll?this.tagsAll.find((function(e){return e.id===t})):null},tagIndex:function(t){return this.tagsCurrent.findIndex((function(e){return e===t}))},onTagRemove:function(t){var e=this.tagIndex(t);e>-1&&this.tagsCurrent.splice(e,1),this.emitChange()},onTagSwitch:function(t){if(this.multiple){var e=this.tagIndex(t.id);e>-1?this.tagsCurrent.splice(e,1):this.tagsCurrent.push(t.id)}else this.tagsCurrent[0]===t.id?this.tagsCurrent=[]:this.tagsCurrent=[t.id];this.emitChange()},emitChange:function(){this.$emit("change",this.tagsCurrent)},checked:function(){return this.multiple?this.tagsCurrent.length>0?this.tagsCurrent:null:this.tagsCurrent.length>0?this.tagsCurrent[0]:0},_renderTagsCurrent:function(){var t=this,e=this.$createElement;if(!this.showBlockCurrent)return null;if(!this.tagsAll)return null;var n,a=[],o=r(this.tagsCurrent);try{var i=function(){var r=n.value;a.push(e("f7-chip",{key:r,attrs:{text:t.getTagName(r),deleteable:!0},on:{click:function(){t.onTagRemove(r)}}}))};for(o.s();!(n=o.n()).done;)i()}catch(t){o.e(t)}finally{o.f()}return e("div",[e("f7-block-title",[this.$text("Selected Tags")]),e("f7-block",{class:"selected-tags"},[a]),e("hr")])},_renderTagsAll:function(){var t=this,e=this.$createElement;if(!this.tagsAll)return null;var n,a=[],o=r(this.tagsAll2);try{var i=function(){var r=n.value,o={chip:!0,"col-33":!0,"chip-outline":-1===t.tagIndex(r.id)};a.push(e("div",{key:r.id,class:o,on:{click:function(){t.onTagSwitch(r)}}},[e("div",{class:"chip-label"},[r.tagName]),e("f7-badge",{class:"eb-icon-badge",attrs:{color:"gray"}},[r.tagAtomCount])]))};for(o.s();!(n=o.n()).done;)i()}catch(t){o.e(t)}finally{o.f()}return e("f7-block",[e("div",{class:"row tags"},[a,e("div",{class:"col-33"}),e("div",{class:"col-33"})])])}},render:function(){var t=arguments[0],e=this._renderTagsCurrent(),n=this._renderTagsAll();return t("div",{class:"eb-tag-select"},[e,n])}}},696:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});const r={meta:{size:"medium"},mixins:[n(902).Z],data:function(){var t=this.$f7route.query;return{container:{mode:t.mode,atomId:parseInt(t.atomId||0),itemId:parseInt(t.itemId||0),layout:t.layout}}},render:function(){return this.layout_renderPage()}}},235:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});const r={mixins:[n(930).Z],data:function(){var t=this.$f7route.query,e=t&&t.module,n=t&&t.atomClassName,r=e&&n?{module:e,atomClassName:n}:null,a=t&&t.options?JSON.parse(t.options):{},o=t&&t.params?JSON.parse(t.params):null,i=t&&t.scene,s=t&&t.layout,c=t&&t.resource;return t.appLanguage&&(a.language=t.appLanguage),{container:{atomClass:r,options:a,params:o,scene:i,layout:s,resource:c}}},render:function(){return this.layout_renderPage()}}},368:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i});var r=n(3),a=n.n(r),o=n(930);const i={mixins:[a().prototype.$meta.module.get("a-base").options.mixins.ebAtomClasses,o.Z],data:function(){var t=this.$f7route.query,e=t&&t.module,n=t&&t.atomClassName;return{container:{atomClass:e&&n?{module:e,atomClassName:n}:null,options:t&&t.options?JSON.parse(t.options):null,scene:"search",layout:"list"}}},render:function(){var t=arguments[0];return t("eb-search-page",{attrs:{advanced:!0,title:this.page_getTitle(),subtitle:this.page_getSubtitle(),advancedSearchTitle:"Advanced Filter"},on:{search:this.search_onSearch,loadMore:this.page_onInfinite,disable:this.search_onSearchDisable,searchAdvanced:this.search_onSearchAdvanced}},[this.layout_renderComponent()])}}},783:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i});var r=n(3),a=n.n(r),o=n(930);const i={mixins:[a().prototype.$meta.module.get("a-components").options.mixins.ebPageContext,o.Z],data:function(){return{container:{atomClass:null,options:null,params:null,scene:"select",layout:"select"}}},created:function(){var t=this.contextParams;this.container.atomClass=t.atomClass,this.container.options=t.options;var e,n=t.selectMode;e="single"===t.selectMode?t.selectedAtomId?[t.selectedAtomId]:[]:t.selectedAtomIds?t.selectedAtomIds.concat():[],this.container.params={selectMode:n,selectedAtomIds:e},"single"===t.selectMode&&(this.container.scene="selecting",this.container.layout="selecting"),this.container.resource=t.resource},render:function(){return this.layout_renderPage()}}},239:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i});var r=n(3),a=n.n(r),o=n(930);const i={mixins:[a().prototype.$meta.module.get("a-components").options.mixins.ebPageContext,o.Z],data:function(){return{container:{atomClass:null,options:null,params:null,scene:"selecting",layout:"selecting"}}},created:function(){var t=this.contextParams;this.container.atomClass=t.atomClass,this.container.options=t.options,this.container.params=t.params,this.container.resource=t.resource},render:function(){return this.layout_renderPage()}}},450:(t,e,n)=>{var r=n(233),a=n(361)(r);a.push([t.id,".eb-tag-select .selected-tags {\n  min-height: 40px;\n}\n.eb-tag-select .selected-tags .chip + .chip {\n  margin-left: 6px;\n}\n.eb-tag-select .tags {\n  justify-content: space-around;\n}\n.eb-tag-select .tags .chip {\n  cursor: pointer;\n}\n.eb-tag-select .tags .chip .chip-media {\n  min-width: 32px;\n  width: auto;\n  border: 1px solid var(--f7-block-header-text-color);\n  color: var(--f7-block-header-text-color);\n}\n","",{version:3,sources:["webpack://./front/src/assets/css/module.less"],names:[],mappings:"AAAA;EAEI,gBAAA;AAAJ;AAGM;EACE,gBAAA;AADR;AALA;EAYI,6BAAA;AAJJ;AARA;EAeM,eAAA;AAJN;AAXA;EAkBQ,eAAA;EACA,WAAA;EACA,mDAAA;EACA,wCAAA;AAJR",sourcesContent:[".eb-tag-select {\n  .selected-tags {\n    min-height: 40px;\n\n    .chip {\n      & + .chip {\n        margin-left: 6px;\n      }\n    }\n  }\n\n  .tags {\n    justify-content: space-around;\n\n    .chip {\n      cursor: pointer;\n\n      .chip-media {\n        min-width: 32px;\n        width: auto;\n        border: 1px solid var(--f7-block-header-text-color);\n        color: var(--f7-block-header-text-color);\n      }\n    }\n  }\n}\n"],sourceRoot:""}]),t.exports=a},779:(t,e,n)=>{var r=n(233),a=n(361)(r);a.push([t.id,".label-edit-list .label-media[data-v-2dedb27f] {\n  width: 16px;\n  height: 16px;\n  border-radius: 8px;\n}\n.label-edit .label-prompt[data-v-2dedb27f] {\n  position: absolute;\n  width: 100%;\n  top: 10px;\n  text-align: center;\n}\n.label-edit .label-form[data-v-2dedb27f] {\n  margin-top: 40px;\n}\n.label-edit .label-colors[data-v-2dedb27f] {\n  height: 60px;\n  width: 100%;\n}\n","",{version:3,sources:["webpack://./front/src/pages/atom/labels.vue","webpack://./labels.vue"],names:[],mappings:"AAgLA;EAEI,WAAA;EACA,YAAA;EACA,kBAAA;AChLJ;ADoLA;EAEI,kBAAA;EACA,WAAA;EACA,SAAA;EACA,kBAAA;ACnLJ;AD8KA;EASI,gBAAA;ACpLJ;AD2KA;EAaI,YAAA;EACA,WAAA;ACrLJ",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.label-edit-list {\n  .label-media {\n    width: 16px;\n    height: 16px;\n    border-radius: 8px;\n  }\n}\n\n.label-edit {\n  .label-prompt {\n    position: absolute;\n    width: 100%;\n    top: 10px;\n    text-align: center;\n  }\n\n  .label-form {\n    margin-top: 40px;\n  }\n\n  .label-colors {\n    height: 60px;\n    width: 100%;\n  }\n}\n",".label-edit-list .label-media {\n  width: 16px;\n  height: 16px;\n  border-radius: 8px;\n}\n.label-edit .label-prompt {\n  position: absolute;\n  width: 100%;\n  top: 10px;\n  text-align: center;\n}\n.label-edit .label-form {\n  margin-top: 40px;\n}\n.label-edit .label-colors {\n  height: 60px;\n  width: 100%;\n}\n"],sourceRoot:""}]),t.exports=a},361:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=t(e);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,r){"string"==typeof t&&(t=[[null,t,""]]);var a={};if(r)for(var o=0;o<this.length;o++){var i=this[o][0];null!=i&&(a[i]=!0)}for(var s=0;s<t.length;s++){var c=[].concat(t[s]);r&&a[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),e.push(c))}},e}},233:t=>{"use strict";function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}t.exports=function(t){var n,r,a=(r=4,function(t){if(Array.isArray(t))return t}(n=t)||function(t,e){var n=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null!=n){var r,a,o=[],i=!0,s=!1;try{for(n=n.call(t);!(i=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);i=!0);}catch(t){s=!0,a=t}finally{try{i||null==n.return||n.return()}finally{if(s)throw a}}return o}}(n,r)||function(t,n){if(t){if("string"==typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=a[1],i=a[3];if(!i)return o;if("function"==typeof btoa){var s=btoa(unescape(encodeURIComponent(JSON.stringify(i)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),u="/*# ".concat(c," */"),l=i.sources.map((function(t){return"/*# sourceURL=".concat(i.sourceRoot||"").concat(t," */")}));return[o].concat(l).concat([u]).join("\n")}return[o].join("\n")}},722:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});const r={data:function(){return{atomId:this.$f7route.query.atomId}},created:function(){var t=this;this.$api.post("/a/base/atom/star",{key:{atomId:this.atomId},atom:{star:1}}).then((function(){t.$view.dialog.alert(t.$text("Starred")).then((function(){t.openAtom()}))}))},methods:{openAtom:function(){location.assign(this.$f7route.query.returnTo)}}},a=(0,n(792).Z)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("eb-page",[n("eb-navbar",{attrs:{large:"",largeTransparent:"",title:t.$text("Star"),"eb-back-link":"Back"}}),t._v(" "),n("f7-block")],1)}),[],!1,null,null,null).exports},472:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i});var r=n(3),a=n.n(r);const o={components:{atomTab:n(592).Z},data:function(){var t=this.$f7route.query;return{layout:t&&t.layout,stats:{drafts:0,draftsFlowing:0},tabId:{drafts:a().prototype.$meta.util.nextId("drafts"),draftsFlowing:a().prototype.$meta.util.nextId("draftsFlowing")},tabName:"drafts"}},computed:{pageTitle:function(){return"drafts"===this.tabName?this.$text("Drafts"):this.$text("DraftsFlowingMineTab")}},created:function(){},methods:{getContainer:function(t){var e={stage:"draft",mine:1};return e.where="drafts"===t?{atomFlowId:0}:{atomFlowId:{op:">",val:0}},{options:e,layout:this.layout}},onStatsChange:function(t,e){this.stats[e]=t}}},i=(0,n(792).Z)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("eb-page",{attrs:{"page-content":!1,tabs:"","with-subnavbar":""}},[n("eb-navbar",{attrs:{title:t.pageTitle,"eb-back-link":"Back"}},[n("f7-subnavbar",[n("f7-toolbar",{attrs:{top:"",tabbar:""}},[n("eb-link",{attrs:{"tab-link":"#"+t.tabId.drafts,tabLinkActive:"drafts"===t.tabName,text:t.$text("Drafts"),"badge-color":"orange",badge:t.stats.drafts,stats_params:{module:"a-base",name:"drafts"}},on:{stats_change:function(e){return t.onStatsChange(e,"drafts")}}}),t._v(" "),n("eb-link",{attrs:{"tab-link":"#"+t.tabId.draftsFlowing,tabLinkActive:"draftsFlowing"===t.tabName,text:t.$text("DraftsFlowingMineTab"),"badge-color":"gray",badge:t.stats.draftsFlowing,stats_params:{module:"a-base",name:"draftsFlowing"}},on:{stats_change:function(e){return t.onStatsChange(e,"draftsFlowing")}}})],1)],1)],1),t._v(" "),n("f7-tabs",{ref:"tabs"},[n("eb-tab-page-content",{attrs:{id:t.tabId.drafts,tabActive:"drafts"===t.tabName,"data-ref":"drafts"},on:{"tab:show":function(e){t.tabName="drafts"}}},[n("atomTab",{ref:"drafts",attrs:{slot:"list",container:t.getContainer("drafts")},slot:"list"})],1),t._v(" "),n("eb-tab-page-content",{attrs:{id:t.tabId.draftsFlowing,tabActive:"draftsFlowing"===t.tabName,"data-ref":"draftsFlowing"},on:{"tab:show":function(e){t.tabName="draftsFlowing"}}},[n("atomTab",{ref:"draftsFlowing",attrs:{slot:"list",container:t.getContainer("draftsFlowing")},slot:"list"})],1)],1)],1)}),[],!1,null,null,null).exports},693:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>o});const r={data:function(){return{atomId:parseInt(this.$f7route.query.atomId),item:null,labels:[],sheetOpened:!1,labelId:0,labelText:"",labelColor:"",colors:[{name:"Red",value:"red"},{name:"Orange",value:"orange"},{name:"Purple",value:"purple"},{name:"Yellow",value:"yellow"},{name:"Blue",value:"blue"},{name:"Green",value:"green"}]}},computed:{labelsAll:function(){return this.$store.getters["a/base/userLabels"]}},methods:{onDone:function(){this.$f7router.back()},onAddLabel:function(){this.labelId=0,this.labelText="",this.labelColor="",this.sheetOpened=!0},onEditLabel:function(t,e){this.labelId=e,this.labelText=this.labelsAll[e].text,this.labelColor=this.labelsAll[e].color,this.sheetOpened=!0},onFormSubmit:function(){this.$refs.buttonSubmit.onClick()},onSubmit:function(){var t=this;if(this.labelText&&this.labelColor){var e=this.$meta.util.extend({},this.labelsAll);return 0===this.labelId?e[this.newLabelId()]={text:this.labelText,color:this.labelColor}:e[this.labelId]={text:this.labelText,color:this.labelColor},this.$api.post("/a/base/user/setLabels",{labels:e}).then((function(){t.$store.commit("a/base/setLabels",e),t.sheetOpened=!1}))}},onColorSelect:function(t){this.labelColor=t.value},newLabelId:function(){var t=Object.keys(this.labelsAll);return 0===t.length?1:(t.sort((function(t,e){return e-t})),parseInt(t[0])+1)},labelChecked:function(t){return this.labels&&this.labels.indexOf(t)>-1},onLabelCheckChange:function(t,e){var n=this,r=this.labels.indexOf(e);t.currentTarget.checked&&-1===r?this.labels.push(e):!t.currentTarget.checked&&r>-1&&this.labels.splice(r,1),this.labels.sort((function(t,e){return t-e})),this.$api.post("/a/base/atom/labels",{key:{atomId:this.atomId},atom:{labels:this.labels}}).then((function(){n.$meta.eventHub.$emit("atom:labels",{key:{atomId:n.atomId},labels:n.labels})}))}},created:function(){var t=this;this.$store.dispatch("a/base/getLabels"),this.$api.post("/a/base/atom/read",{key:{atomId:this.atomId}}).then((function(e){t.item=e,t.labels=JSON.parse(t.item.labels)||[]}))}},a=r;n(210);const o=(0,n(792).Z)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("eb-page",[n("eb-navbar",{attrs:{large:"",largeTransparent:"",title:t.$text("UserLabels"),"eb-back-link":"Back"}},[n("f7-nav-right",[n("eb-link",{attrs:{iconF7:"::add"},on:{click:function(e){return e.preventDefault(),t.onAddLabel.apply(null,arguments)}}})],1)],1),t._v(" "),t.labelsAll?n("f7-list",{staticClass:"label-edit-list"},[n("f7-list-item",{attrs:{"group-title":"",title:t.item?t.item.atomName:""}}),t._v(" "),t._l(Object.keys(t.labelsAll),(function(e){return n("eb-list-item",{key:e,attrs:{title:t.labelsAll[e].text,checkbox:"",checked:t.labelChecked(e),swipeout:""},on:{change:function(n){return t.onLabelCheckChange(n,e)}}},[n("div",{class:"label-media bg-color-"+t.labelsAll[e].color,attrs:{slot:"media"},slot:"media"}),t._v(" "),n("eb-context-menu",[n("div",{attrs:{slot:"right"},slot:"right"},[n("div",{attrs:{close:"",color:"orange",context:e,onPerform:t.onEditLabel}},[t._v(t._s(t.$text("Edit")))])])])],1)}))],2):t._e(),t._v(" "),n("f7-sheet",{ref:"ebSheet",staticClass:"label-edit",attrs:{fill:"",opened:t.sheetOpened},on:{"sheet:closed":function(e){t.sheetOpened=!1}}},[n("f7-toolbar",[n("div",{staticClass:"left"},[n("f7-link",{attrs:{"sheet-close":""}},[t._v(t._s(t.$text("Close")))])],1),t._v(" "),n("div",{staticClass:"right"},[n("eb-link",{ref:"buttonSubmit",attrs:{onPerform:t.onSubmit}},[t._v(t._s(t.$text("Submit")))])],1)]),t._v(" "),n("f7-page-content",[n("div",{staticClass:"label-prompt"},[n("f7-badge",{attrs:{color:t.labelColor}},[t._v(t._s(t.labelText||t.$text("PleaseInputText")))])],1),t._v(" "),n("eb-list",{staticClass:"label-form",attrs:{form:"","inline-labels":"","no-hairlines-md":""},on:{submit:t.onFormSubmit}},[n("eb-list-input",{attrs:{label:t.$text("Text"),type:"text","clear-button":"",placeholder:t.$text("Text")},model:{value:t.labelText,callback:function(e){t.labelText=e},expression:"labelText"}}),t._v(" "),n("f7-list-item",[n("div",{staticClass:"row label-colors"},t._l(t.colors,(function(e){return n("f7-button",{key:e.value,class:"col-33 color-"+e.value,attrs:{small:"",fill:""},on:{click:function(n){return t.onColorSelect(e)}}},[t._v(t._s(t.$text(e.name)))])})),1)])],1)],1)],1)],1)}),[],!1,null,"2dedb27f",null).exports},642:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>c});var r=n(3),a=n.n(r),o=a().prototype.$meta.module.get("a-base").options.mixins.ebModules,i=a().prototype.$meta.module.get("a-base").options.mixins.ebAtomClasses;const s={mixins:[o,a().prototype.$meta.module.get("a-components").options.mixins.ebPageContext,i],data:function(){return{}},computed:{ready:function(){return this.modulesAll&&this.atomClassesAll},module:function(){return this.contextParams.atomClass?this.contextParams.atomClass.module:null},atomClassName:function(){return this.contextParams.atomClass?this.contextParams.atomClass.atomClassName:null},optional:function(){return this.contextParams.optional},simple:function(){return this.contextParams.simple},resource:function(){return this.contextParams.resource},inner:function(){return this.contextParams.inner},inner2:function(){return void 0!==this.inner&&this.inner},atomClasses:function(){var t=[];for(var e in this.optional&&t.push({title:null,module:null,atomClassName:null}),this.atomClassesAll){var n=this.modulesAll[e],r=this.atomClassesAll[e];for(var a in r){var o=r[a];if(null===this.inner2||Boolean(this.inner2)===Boolean(o.inner)){if(this.resource){if(!o.resource)continue;if("a-base"===e&&"role"===a)continue}if((0!==this.simple||!o.simple)&&(1!==this.simple||o.simple)){var i=o.titleLocale,s=n.titleLocale;t.push({title:i,module:e,atomClassName:a,after:s})}}}}return t}},methods:{onItemClick:function(t){var e=null;t.module&&(e={module:t.module,atomClassName:t.atomClassName,title:t.title}),this.contextCallback(200,e),this.$f7router.back()}}},c=(0,n(792).Z)(s,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("eb-page",[n("eb-navbar",{attrs:{large:"",largeTransparent:"",title:t.$text("Select Atom Class"),"eb-back-link":"Back"}}),t._v(" "),t.ready?n("f7-list",t._l(t.atomClasses,(function(e,r){return n("f7-list-item",{key:r,attrs:{radio:"",checked:t.module===e.module&&t.atomClassName===e.atomClassName,title:e.title},on:{click:function(n){return t.onItemClick(e)}}},[n("div",{attrs:{slot:"after"},slot:"after"},[t._v(t._s(e.after))])])})),1):t._e()],1)}),[],!1,null,null,null).exports},824:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i});var r=n(3),a=n.n(r);const o={components:{atomTab:n(592).Z},data:function(){var t=this.$f7route.query;return{layout:t&&t.layout,stats:{stars:0,labels:{}},tabId:{stars:a().prototype.$meta.util.nextId("stars"),labels:a().prototype.$meta.util.nextId("labels")},tabName:"stars"}},computed:{pageTitle:function(){if("stars"===this.tabName)return"".concat(this.$text("Stars"));var t=this.tabName.split("_"),e=t[t.length-1];return this.userLabels[e].text},userLabels:function(){return this.$store.getters["a/base/userLabels"]}},created:function(){this.$store.dispatch("a/base/getLabels")},methods:{getContainer:function(t,e){var n={stage:"formal"};return"stars"===t?n.star=1:n.label=parseInt(e),{options:n,layout:this.layout}},onStatsChange:function(t,e,n){"stars"===e?this.stats[e]=t:this.$set(this.stats.labels,n,t)}}},i=(0,n(792).Z)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("eb-page",{attrs:{"page-content":!1,tabs:"","with-subnavbar":""}},[n("eb-navbar",{attrs:{title:t.pageTitle,"eb-back-link":"Back"}},[n("f7-subnavbar",[n("f7-toolbar",{attrs:{top:"",tabbar:"",scrollable:t.userLabels&&Object.keys(t.userLabels).length>1}},[n("eb-link",{attrs:{"tab-link":"#"+t.tabId.stars,tabLinkActive:"stars"===t.tabName,text:t.$text("Stars"),"badge-color":"gray",badge:t.stats.stars,stats_params:{module:"a-base",name:"stars"}},on:{stats_change:function(e){return t.onStatsChange(e,"stars")}}}),t._v(" "),t.userLabels?t._l(Object.keys(t.userLabels),(function(e){return n("eb-link",{key:e,attrs:{"tab-link":"#"+t.tabId.labels+"_"+e,tabLinkActive:t.tabName===t.tabId.labels+"_"+e,text:t.userLabels[e].text,"badge-color":t.userLabels[e].color,badge:t.stats.labels[e],stats_params:{module:"a-base",name:"labels",nameSub:e}},on:{stats_change:function(n){return t.onStatsChange(n,"labels",e)}}})})):t._e()],2)],1)],1),t._v(" "),n("f7-tabs",{ref:"tabs"},[n("eb-tab-page-content",{attrs:{id:t.tabId.stars,tabActive:"stars"===t.tabName,"data-ref":"stars"},on:{"tab:show":function(e){t.tabName="stars"}}},[n("atomTab",{ref:"stars",attrs:{slot:"list",container:t.getContainer("stars")},slot:"list"})],1),t._v(" "),t.userLabels?t._l(Object.keys(t.userLabels),(function(e){return n("eb-tab-page-content",{key:e,attrs:{id:t.tabId.labels+"_"+e,tabActive:t.tabName===t.tabId.labels+"_"+e,"data-ref":t.tabId.labels+"_"+e},on:{"tab:show":function(n){t.tabName=t.tabId.labels+"_"+e}}},[n("atomTab",{ref:t.tabId.labels+"_"+e,refInFor:!0,attrs:{slot:"list",container:t.getContainer("labels",e)},slot:"list"})],1)})):t._e()],2)],1)}),[],!1,null,null,null).exports},484:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>o});var r=n(3);const a={mixins:[n.n(r)().prototype.$meta.module.get("a-base").options.mixins.ebAtomActions],data:function(){var t=this.$f7route.query,e=t&&t.module,n=t&&t.atomClassName,r=e&&n?{module:e,atomClassName:n}:null,a=t&&t.where?JSON.parse(t.where):null;if("mine"===(t&&t.scene)){a||(a={});var o=this.$store.state.auth.user.op;a["i.userId"]=o.id}return{atomClass:r,where:a,order:"desc",items:[]}},computed:{user:function(){return this.$store.state.auth.user.op}},created:function(){},mounted:function(){this.$meta.eventHub.$on("attachment:action",this.onAttachmentChanged)},beforeDestroy:function(){this.$meta.eventHub.$off("attachment:action",this.onAttachmentChanged)},methods:{onRefresh:function(t){t(),this.reload()},onInfinite:function(){this.$refs.loadMore.loadMore()},onLoadClear:function(t){this.items=[],t()},onLoadMore:function(t){var e=this,n=t.index,r={where:{mode:2,attachment:1},orders:[["i_createdAt",this.order]],page:{index:n}};return this.where&&(r.where=this.where),this.$api.post("/a/file/file/all",{atomClass:this.atomClass,options:r}).then((function(t){return e.items=e.items.concat(t.list),t}))},reload:function(){this.$refs.loadMore.reload()},onPerformSort:function(){this.order="desc"===this.order?"asc":"desc",this.reload()},onAttachmentChanged:function(t){},onPerformViewAtom:function(t,e){var n=this.getAction({module:e.module,atomClassName:e.atomClassName,name:"read"});if(n)return this.$meta.util.performAction({ctx:this,action:n,item:e})},onItemClick:function(t,e){var n=this;this.$meta.config.base.jwt?this.$api.post("/a/base/jwt/create").then((function(t){n._openUrl(e,t.jwt)})):this._openUrl(e,null)},_openUrl:function(t,e){e?window.open(this.$meta.util.combineQueries(t.i_downloadUrl,{"eb-jwt":e})):window.open(t.i_downloadUrl)}}},o=(0,n(792).Z)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("eb-page",{attrs:{ptr:"",infinite:"",infinitePreloader:!1},on:{"ptr:refresh":t.onRefresh,infinite:t.onInfinite}},[n("eb-navbar",{attrs:{large:"",largeTransparent:"",title:t.$text("Attachment List"),"eb-back-link":"Back"}},[n("f7-nav-right",[n("eb-link",{attrs:{iconF7:"desc"===t.order?"::arrow-down":"::arrow-up",onPerform:t.onPerformSort}})],1)],1),t._v(" "),n("f7-list",t._l(t.items,(function(e){return n("eb-list-item",{key:e.id,staticClass:"item",attrs:{title:e.i_realName,link:"#",context:e,onPerform:t.onItemClick}},[n("div",{staticClass:"header",attrs:{slot:"root-start"},slot:"root-start"},[n("div",{staticClass:"userName"},[n("eb-link",{attrs:{context:e,onPerform:t.onPerformViewAtom}},[t._v(t._s(e.atomName))])],1),t._v(" "),n("div",{staticClass:"date"},[t._v(t._s(t.$meta.util.formatDateTimeRelative(e.i_createdAt)))])])])})),1),t._v(" "),n("eb-load-more",{ref:"loadMore",attrs:{onLoadClear:t.onLoadClear,onLoadMore:t.onLoadMore,autoInit:!0}})],1)}),[],!1,null,null,null).exports},381:(t,e,n)=>{"use strict";function r(t,e,n,r,a,o,i){try{var s=t[o](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,a)}n.r(e),n.d(e,{default:()=>o});const a={data:function(){return{atomId:parseInt(this.$f7route.query.atomId),items:[],actionWrite:null}},computed:{user:function(){return this.$store.state.auth.user.op}},created:function(){this.checkActionWrite()},methods:{onRefresh:function(t){t(),this.reload()},onInfinite:function(){this.$refs.loadMore.loadMore()},onLoadClear:function(t){this.items=[],t()},onLoadMore:function(t){var e=this,n={where:{mode:2,attachment:1},orders:[["createdAt","asc"]],page:{index:t.index}};return this.$api.post("/a/file/file/list",{key:{atomId:this.atomId},options:n}).then((function(t){return e.items=e.items.concat(t.list),t}))},reload:function(){this.$refs.loadMore.reload()},checkActionWrite:function(){var t,e=this;return(t=regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$api.post("/a/base/atom/checkRightAction",{key:{atomId:e.atomId},action:3,stage:"draft",checkFlow:!0});case 2:(n=t.sent)&&0===n.atomClosed&&(e.actionWrite=n);case 4:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(a,o){var i=t.apply(e,n);function s(t){r(i,a,o,s,c,"next",t)}function c(t){r(i,a,o,s,c,"throw",t)}s(void 0)}))})()},onPerformAdd:function(){var t=this;return new Promise((function(e,n){t.$view.navigate("/a/file/file/upload",{context:{params:{mode:2,atomId:t.atomId,attachment:1},callback:function(r){200===r&&(t.$meta.eventHub.$emit("attachment:action",{action:"create",atomId:t.atomId}),t.reload(),e()),!1===r&&n(new Error(""))}}})}))},onPerformDelete:function(t,e){var n=this;return this.$view.dialog.confirm().then((function(){return n.$api.post("/a/file/file/delete",{fileId:e.id}).then((function(){n.$meta.util.swipeoutClose(t.currentTarget),n.$meta.eventHub.$emit("attachment:action",{action:"delete",atomId:n.atomId,fileId:e.id}),n.deleteItem(e.id)}))}))},deleteItem:function(t){var e=this.items.findIndex((function(e){return e.id===t}));-1!==e&&this.items.splice(e,1)},onItemClick:function(t,e){var n=this;this.$meta.config.base.jwt?this.$api.post("/a/base/jwt/create").then((function(t){n._openUrl(e,t.jwt)})):this._openUrl(e,null)},_openUrl:function(t,e){e?window.open(this.$meta.util.combineQueries(t.downloadUrl,{"eb-jwt":e})):window.open(t.downloadUrl)},getItemMedia:function(t){var e=t.avatar||this.$meta.config.modules["a-base"].user.avatar.default;return this.$meta.util.combineImageUrl(e,32)}}},o=(0,n(792).Z)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("eb-page",{attrs:{ptr:"",infinite:"",infinitePreloader:!1},on:{"ptr:refresh":t.onRefresh,infinite:t.onInfinite}},[n("eb-navbar",{attrs:{large:"",largeTransparent:"",title:t.$text("Attachment List"),"eb-back-link":"Back"}},[n("f7-nav-right",[t.actionWrite?n("eb-link",{attrs:{iconF7:"::add",onPerform:t.onPerformAdd}}):t._e()],1)],1),t._v(" "),n("f7-list",t._l(t.items,(function(e){return n("eb-list-item",{key:e.id,staticClass:"item",attrs:{title:e.realName,link:"#",context:e,onPerform:t.onItemClick,swipeout:e.userId===t.user.id}},[n("div",{attrs:{slot:"media"},slot:"media"},[n("img",{staticClass:"avatar avatar32",attrs:{src:t.getItemMedia(e)}})]),t._v(" "),n("div",{staticClass:"header",attrs:{slot:"root-start"},slot:"root-start"},[n("div",{staticClass:"userName"},[n("span",[t._v(t._s(e.userName))])]),t._v(" "),n("div",{staticClass:"date"},[t._v(t._s(t.$meta.util.formatDateTimeRelative(e.createdAt)))])]),t._v(" "),t.actionWrite?n("eb-context-menu",[n("div",{attrs:{slot:"right"},slot:"right"},[n("div",{attrs:{color:"orange",context:e,onPerform:t.onPerformDelete}},[t._v(t._s(t.$text("Delete")))])])]):t._e()],1)})),1),t._v(" "),n("eb-load-more",{ref:"loadMore",attrs:{onLoadClear:t.onLoadClear,onLoadMore:t.onLoadMore,autoInit:!0}})],1)}),[],!1,null,null,null).exports},723:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});const r=(0,n(792).Z)({data:function(){return{}}},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("eb-page",[n("eb-navbar",{attrs:{large:"",largeTransparent:"",title:t.$text("About"),"eb-back-link":"Back"}}),t._v(" "),n("f7-toolbar",{attrs:{position:"bottom"}},[n("f7-link",{attrs:{external:"",target:"_blank",href:"https://cabloy.com"}},[t._v(t._s(t.$text("Documentation")))]),t._v(" "),n("f7-link",{attrs:{external:"",target:"_blank",href:"https://community.cabloy.com"}},[t._v(t._s(t.$text("Community")))]),t._v(" "),n("f7-link",{attrs:{external:"",target:"_blank",href:"https://github.com/zhennann/cabloy"}},[t._v("GitHub")])],1),t._v(" "),n("f7-block-title",[t._v(t._s(t.$text("Welcome to CabloyJS")))]),t._v(" "),n("f7-block",{attrs:{strong:""}},[n("div",{staticClass:"alert-info"},[t._v(t._s(t.$text("CabloyAboutTip1")))]),t._v(" "),n("p",[t._v(t._s(t.$text("CabloyAboutTip2")))]),t._v(" "),n("p",[t._v(t._s(t.$text("CabloyAboutTip3")))]),t._v(" "),n("p",[t._v(t._s(t.$text("CabloyAboutTip4")))])])],1)}),[],!1,null,"56be7418",null).exports},238:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});const r={components:{},data:function(){return{data:JSON.parse(this.$f7route.query.data)}},computed:{pageTitle:function(){return this.$store.state.auth.instance.title}},methods:{}},a=(0,n(792).Z)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("eb-page",[n("eb-navbar",{attrs:{large:"",largeTransparent:"",title:t.pageTitle,"eb-back-link":"Back"}}),t._v(" "),n("f7-card",[n("f7-card-header",[t._v(t._s(t.data.title||t.$text("Friendly Tips")))]),t._v(" "),n("f7-card-content",[t._v("\n      "+t._s(t.data.message)+"\n    ")]),t._v(" "),t.data.link?n("f7-card-footer",[n("div"),t._v(" "),n("eb-link",{attrs:{"eb-href":t.data.link}},[t._v(t._s(t.data.linkText||t.$text("Link")))])],1):t._e()],1)],1)}),[],!1,null,"0494e83e",null).exports},849:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});const r={components:{},data:function(){return{data:JSON.parse(this.$f7route.query.data)}},computed:{pageTitle:function(){return this.$store.state.auth.instance.title}},methods:{onPerformOpenLink:function(){window.open(this.data.link,this.data.target||"_blank"),this.$f7router.back()}}},a=(0,n(792).Z)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("eb-page",[n("eb-navbar",{attrs:{title:t.pageTitle,"eb-back-link":"Back"}}),t._v(" "),n("f7-card",[n("f7-card-header",[t._v(t._s(t.data.title||t.$text("OpenLinkTitleRedirect")))]),t._v(" "),n("f7-card-content",[n("eb-link",{attrs:{onPerform:t.onPerformOpenLink}},[t._v(t._s(t.data.linkText||t.$text("Open Link")))])],1)],1)],1)}),[],!1,null,"84cac672",null).exports},255:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>s});var r=n(3),a=n.n(r),o=n(28);const i={mixins:[a().prototype.$meta.module.get("a-components").options.mixins.ebPageContext],components:{categorySelect:o.Z},data:function(){var t=this.$f7route.query;return{atomClass:{module:t.module,atomClassName:t.atomClassName},language:t.language}},computed:{categoryIdStart:function(){return this.contextParams.categoryIdStart},multiple:function(){return this.contextParams.multiple},catalogOnly:function(){return this.contextParams.catalogOnly},leafOnly:function(){return this.contextParams.leafOnly},disabledCategoryIds:function(){return this.contextParams.disabledCategoryIds},selectedCategoryIds:function(){return this.contextParams.selectedCategoryIds}},methods:{onPerformDone:function(){var t,e=this.$refs.tree.getInstance().checked();t=e&&0!==e.length?e:null,this.contextCallback(200,t),this.$f7router.back()}}},s=(0,n(792).Z)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("eb-page",[n("eb-navbar",{attrs:{large:"",largeTransparent:"",title:t.$text("Select Category"),"eb-back-link":"Back"}},[n("f7-nav-right",[n("eb-link",{attrs:{iconF7:"::done",onPerform:t.onPerformDone}})],1)],1),t._v(" "),n("categorySelect",{ref:"tree",attrs:{atomClass:t.atomClass,language:t.language,categoryIdStart:t.categoryIdStart,multiple:t.multiple,catalogOnly:t.catalogOnly,leafOnly:t.leafOnly,disabledCategoryIds:t.disabledCategoryIds,selectedCategoryIds:t.selectedCategoryIds}})],1)}),[],!1,null,null,null).exports},54:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>o});var r=n(3);const a={mixins:[n.n(r)().prototype.$meta.module.get("a-base").options.mixins.ebAtomActions],data:function(){var t=this.$f7route.query,e=t&&t.module,n=t&&t.atomClassName,r=e&&n?{module:e,atomClassName:n}:null,a=t&&t.where?JSON.parse(t.where):null;if("mine"===(t&&t.scene)){a||(a={});var o=this.$store.state.auth.user.op;a["h.userId"]=o.id}return{atomClass:r,where:a,order:"desc",items:[],moduleMarkdownRender:null,rightDeleteComment:!1}},computed:{user:function(){return this.$store.state.auth.user.op},markdownHost:function(){return{}}},created:function(){var t=this;this.$api.post("/a/base/resource/check",{atomStaticKeys:["a-base:deleteComment"]}).then((function(e){t.rightDeleteComment=e[0].passed,t.$meta.module.use("a-markdownrender",(function(e){t.moduleMarkdownRender=e}))}))},mounted:function(){this.$meta.eventHub.$on("comment:action",this.onCommentChanged)},beforeDestroy:function(){this.$meta.eventHub.$off("comment:action",this.onCommentChanged)},methods:{onRefresh:function(t){t(),this.reload()},onInfinite:function(){this.$refs.loadMore.loadMore()},onLoadClear:function(t){this.items=[],t()},onLoadMore:function(t){var e=this,n=t.index,r={orders:[["h_updatedAt",this.order]],page:{index:n}};return this.where&&(r.where=this.where),this.$api.post("/a/base/comment/all",{atomClass:this.atomClass,options:r}).then((function(t){return e.items=e.items.concat(t.list),t}))},reload:function(){this.$refs.loadMore.reload()},onPerformDelete:function(t,e){var n=this;return this.$view.dialog.confirm().then((function(){return n.$api.post("/a/base/comment/delete",{key:{atomId:e.atomId},data:{commentId:e.h_id}}).then((function(t){return n.$meta.eventHub.$emit("comment:action",t),!0}))}))},onPerformHeart:function(t,e){var n=this;if(!this.user.anonymous)return this.$api.post("/a/base/comment/heart",{key:{atomId:e.atomId},data:{commentId:e.h_id,heart:e.h_heart?0:1}}).then((function(t){n.$meta.eventHub.$emit("comment:action",t)}));this.$view.dialog.confirm(this.$text("Please Sign In")).then((function(){n.$meta.vueLayout.openLogin()}))},onCommentChanged:function(t){var e=this,n=t.action,r=t.atomId,a=t.commentId;if("create"!==n){var o=this.items.findIndex((function(t){return t.h_id===a}));"delete"!==n?-1!==o&&this.$api.post("/a/base/comment/item",{key:{atomId:r},data:{commentId:a}}).then((function(t){for(var n=e.items[o],r=0,a=Object.keys(t);r<a.length;r++){var i=a[r];n["h_".concat(i)]=t[i]}})):-1!==o&&this.items.splice(o,1)}else this.reload()},onPerformSort:function(){this.order="desc"===this.order?"asc":"desc",this.reload()},onPerformViewAtom:function(t,e){var n=this.getAction({module:e.module,atomClassName:e.atomClassName,name:"read"});if(n)return this.$meta.util.performAction({ctx:this,action:n,item:e})},getItemMedia:function(t){var e=t.h_avatar||this.$meta.config.modules["a-base"].user.avatar.default;return this.$meta.util.combineImageUrl(e,32)}}},o=(0,n(792).Z)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("eb-page",{attrs:{ptr:"",infinite:"",infinitePreloader:!1},on:{"ptr:refresh":t.onRefresh,infinite:t.onInfinite}},[n("eb-navbar",{attrs:{large:"",largeTransparent:"",title:t.$text("Comment List"),"eb-back-link":"Back"}},[n("f7-nav-right",[n("eb-link",{attrs:{iconF7:"desc"===t.order?"::arrow-down":"::arrow-up",onPerform:t.onPerformSort}})],1)],1),t._v(" "),t.moduleMarkdownRender?t._l(t.items,(function(e){return n("f7-card",{key:e.h_id,staticClass:"comment"},[n("f7-card-header",[n("div",{staticClass:"header-container"},[n("div",{staticClass:"header-atom"},[n("eb-link",{attrs:{context:e,onPerform:t.onPerformViewAtom}},[t._v(t._s(e.atomName))])],1),t._v(" "),n("div",{staticClass:"header-comment"},[n("div",{staticClass:"title"},[n("img",{staticClass:"avatar avatar32",attrs:{src:t.getItemMedia(e)}}),t._v(" "),n("div",{staticClass:"name"},[t._v(t._s(e.h_userName))]),t._v(" "),n("div",{staticClass:"date"},[t._v("\n                #"+t._s(e.h_sorting)+" · "+t._s(t.$meta.util.formatDateTimeRelative(e.h_createdAt))+"\n              ")])]),t._v(" "),n("div",{staticClass:"actions"},[e.h_userId===t.user.id?n("eb-link",{staticClass:"action",attrs:{iconF7:"::edit",iconSize:"18","eb-href":"/a/basefront/comment/item?atomId="+e.atomId+"&commentId="+e.h_id+"&replyId=0"}}):t._e(),t._v(" "),e.h_userId===t.user.id||t.rightDeleteComment?n("eb-link",{staticClass:"action",attrs:{iconF7:"::delete-forever",iconSize:"18",context:e,onPerform:t.onPerformDelete}}):t._e(),t._v(" "),n("eb-link",{staticClass:"action",attrs:{iconF7:e.h_heart?"::heart":":outline:heart-outline",iconSize:"18",context:e,onPerform:t.onPerformHeart}},[t._v(t._s(e.h_heartCount))]),t._v(" "),t.user.anonymous?t._e():n("eb-link",{staticClass:"action",attrs:{iconF7:"::reply",iconSize:"18","eb-href":"/a/basefront/comment/item?atomId="+e.atomId+"&commentId=0&replyId="+e.h_id}})],1)])])]),t._v(" "),n("f7-card-content",{attrs:{padding:""}},[n("eb-markdown-render",{attrs:{host:t.markdownHost,html:e.h_html}})],1)],1)})):t._e(),t._v(" "),n("eb-load-more",{ref:"loadMore",attrs:{onLoadClear:t.onLoadClear,onLoadMore:t.onLoadMore,autoInit:!0}})],2)}),[],!1,null,null,null).exports},767:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});const r={data:function(){return{atomId:this.$f7route.query.atomId,commentId:this.$f7route.query.commentId}},created:function(){var t=this;this.$api.post("/a/base/comment/heart",{key:{atomId:this.atomId},atom:{star:1},data:{commentId:this.commentId,heart:1}}).then((function(){t.$view.dialog.alert(t.$text("Hearted")).then((function(){t.openAtom()}))}))},methods:{openAtom:function(){location.assign(this.$f7route.query.returnTo)}}},a=(0,n(792).Z)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("eb-page",[n("eb-navbar",{attrs:{large:"",largeTransparent:"",title:t.$text("HeartForAtom"),"eb-back-link":"Back"}}),t._v(" "),n("f7-block")],1)}),[],!1,null,null,null).exports},531:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>s});var r=n(3);function a(t,e,n,r,a,o,i){try{var s=t[o](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,a)}function o(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function s(t){a(i,r,o,s,c,"next",t)}function c(t){a(i,r,o,s,c,"throw",t)}s(void 0)}))}}const i={mixins:[n.n(r)().prototype.$meta.module.get("a-components").options.mixins.ebPageDirty],meta:{size:"medium"},data:function(){return{atomId:parseInt(this.$f7route.query.atomId),commentId:parseInt(this.$f7route.query.commentId||0),replyId:parseInt(this.$f7route.query.replyId||0),module:null,comment:null,reply:null,content:""}},computed:{page_title:function(){var t=this.$text("Comment");return this.page_getDirtyTitle(t)},ready:function(){return this.module&&(0===this.commentId||this.comment)&&(0===this.replyId||this.reply)},readOnly:function(){return!1},host:function(){return{atomId:this.atomId,opts:{upload:{flag:"comment"}}}}},created:function(){var t=this;this.$meta.module.use("a-markdown",(function(e){t.module=e})),this.loadComment(this.commentId),this.loadReply(this.replyId)},methods:{loadComment:function(t){var e=this;return o(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,e.$api.post("/a/base/comment/item",{key:{atomId:e.atomId},data:{commentId:t}});case 4:r=n.sent,e.comment=r,e.content=e.comment.content;case 7:case"end":return n.stop()}}),n)})))()},loadReply:function(t){var e=this;return o(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,e.$api.post("/a/base/comment/item",{key:{atomId:e.atomId},data:{commentId:t}});case 4:r=n.sent,e.reply=r;case 6:case"end":return n.stop()}}),n)})))()},onInput:function(t){this.content!==t&&(this.content=t,this.page_setDirty(!0))},onSave:function(){this.$refs.buttonSave.onClick()},onPerformSave:function(){var t=this;return o(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.content){e.next=2;break}return e.abrupt("return");case 2:if(t.$refs.editor){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,t.$refs.editor.checkContent();case 6:return e.next=8,t.$api.post("/a/base/comment/save",{key:{atomId:t.atomId},data:{commentId:t.commentId,replyId:t.replyId,content:t.content}});case 8:n=e.sent,t.page_setDirty(!1),t.$meta.eventHub.$emit("comment:action",n),(r=t.$f7route.query.returnTo)?location.assign(r):t.$f7router.back();case 13:case"end":return e.stop()}}),e)})))()},onPreRender:function(t){if(this.comment)return this.fullContent({content:t,replyContent:this.comment.replyContent,replyUserName:this.comment.replyUserName});if(this.reply){var e=this.fullContent({content:this.reply.content,replyContent:this.reply.replyContent,replyUserName:this.reply.replyUserName});return this.fullContent({content:t,replyContent:e,replyUserName:this.reply.userName})}return t},fullContent:function(t){var e=t.content,n=t.replyContent,r=t.replyUserName;if(!n)return e;var a=this._getMarkdownSep(n);return"".concat(e,"\n\n> `").concat(r,"`:\n\n").concat(a," comment-quot\n").concat(n,"\n").concat(a,"\n\n")},_getMarkdownSep:function(t){var e=t.indexOf(":::");if(-1===e)return":::";for(var n=e+3;":"===t[n];)++n;return":".repeat(n-e+1)}}},s=(0,n(792).Z)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("eb-page",[n("eb-navbar",{attrs:{title:t.page_title,"eb-back-link":"Back"}},[n("f7-nav-right",[n("eb-link",{ref:"buttonSave",attrs:{iconF7:"::save",onPerform:t.onPerformSave}})],1)],1),t._v(" "),t.ready?[n("eb-box",[n("eb-markdown-editor",{ref:"editor",attrs:{readOnly:t.readOnly,host:t.host,value:t.content},on:{input:t.onInput,save:t.onSave}})],1)]:t._e()],2)}),[],!1,null,null,null).exports},577:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>c});var r=n(3),a=n.n(r);function o(t,e,n,r,a,o,i){try{var s=t[o](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,a)}function i(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var i=t.apply(e,n);function s(t){o(i,r,a,s,c,"next",t)}function c(t){o(i,r,a,s,c,"throw",t)}s(void 0)}))}}const s={mixins:[a().prototype.$meta.module.get("a-base").options.mixins.ebAtomActions,a().prototype.$meta.module.get("a-components").options.mixins.ebPageContext],data:function(){return{atomId:parseInt(this.$f7route.query.atomId),commentId:parseInt(this.$f7route.query.commentId||0),order:"desc",items:[],moduleMarkdownRender:null,single:!0,atom:null}},computed:{user:function(){return this.$store.state.auth.user.op},showSingle:function(){return this.commentId>0&&this.single},markdownHost:function(){return{atomId:this.atom.atomId,atom:this.atom}}},created:function(){var t=this;this.$meta.module.use("a-markdownrender",(function(e){t.moduleMarkdownRender=e})),this._loadAtom()},mounted:function(){this.$meta.eventHub.$on("comment:action",this.onCommentChanged)},beforeDestroy:function(){this.$meta.eventHub.$off("comment:action",this.onCommentChanged)},methods:{onRefresh:function(t){t(),this.reload()},onInfinite:function(){this.$refs.loadMore.loadMore()},onLoadClear:function(t){this.items=[],t()},onLoadMore:function(t){var e=this,n=t.index,r={};this.showSingle&&(r.id=this.commentId);var a={where:r,orders:[["updatedAt",this.order]],page:{index:n}};return this.$api.post("/a/base/comment/list",{key:{atomId:this.atomId},options:a}).then((function(t){return e.items=e.items.concat(t.list),t}))},reload:function(){this.$refs.loadMore.reload()},_loadAtom:function(){var t=this;return i(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.contextParams||!t.contextParams.atom){e.next=4;break}t.atom=t.contextParams.atom,e.next=7;break;case 4:return e.next=6,t.$api.post("/a/base/atom/read",{key:{atomId:t.atomId}});case 6:t.atom=e.sent;case 7:case"end":return e.stop()}}),e)})))()},onPerformViewAtom:function(){var t=this;return i(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.atom){e.next=2;break}return e.abrupt("return");case 2:if(n=t.getAction({module:t.atom.module,atomClassName:t.atom.atomClassName,name:"read"})){e.next=5;break}return e.abrupt("return");case 5:return e.abrupt("return",t.$meta.util.performAction({ctx:t,action:n,item:t.atom}));case 6:case"end":return e.stop()}}),e)})))()},onPerformDelete:function(t,e){var n=this;return this.$view.dialog.confirm().then((function(){return n.$api.post("/a/base/comment/delete",{key:{atomId:n.atomId},data:{commentId:e.id}}).then((function(t){return n.$meta.eventHub.$emit("comment:action",t),!0}))}))},onPerformHeart:function(t,e){var n=this;if(!this.user.anonymous)return this.$api.post("/a/base/comment/heart",{key:{atomId:this.atomId},data:{commentId:e.id,heart:e.heart?0:1}}).then((function(t){n.$meta.eventHub.$emit("comment:action",t)}));this.$view.dialog.confirm(this.$text("Please Sign In")).then((function(){n.$meta.vueLayout.openLogin()}))},onCommentChanged:function(t){var e=this,n=t.action,r=t.atomId,o=t.commentId;if(r===this.atomId)if("create"!==n){var i=this.items.findIndex((function(t){return t.id===o}));"delete"!==n?-1!==i&&this.$api.post("/a/base/comment/item",{key:{atomId:this.atomId},data:{commentId:o}}).then((function(t){a().set(e.items,i,t)})):-1!==i&&this.items.splice(i,1)}else this.reload()},onPerformSort:function(){this.order="desc"===this.order?"asc":"desc",this.reload()},getItemMedia:function(t){var e=t.avatar||this.$meta.config.modules["a-base"].user.avatar.default;return this.$meta.util.combineImageUrl(e,32)},onPerformShowAllComments:function(){this.single=!1,this.reload()}}},c=(0,n(792).Z)(s,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("eb-page",{attrs:{ptr:"",infinite:"",infinitePreloader:!1},on:{"ptr:refresh":t.onRefresh,infinite:t.onInfinite}},[n("eb-navbar",{attrs:{title:t.$text("Comment List"),"eb-back-link":"Back"}},[n("f7-nav-right",[t.user.anonymous?t._e():n("eb-link",{attrs:{iconF7:"::add","eb-href":"/a/basefront/comment/item?atomId="+t.atomId+"&commentId=0&replyId=0"}}),t._v(" "),n("eb-link",{attrs:{iconF7:"desc"===t.order?"::arrow-down":"::arrow-up",onPerform:t.onPerformSort}})],1),t._v(" "),n("f7-subnavbar",[n("div"),t._v(" "),t.atom?n("eb-link",{attrs:{onPerform:t.onPerformViewAtom}},[n("span",{staticClass:"eb-text-overflow-ellipsis"},[t._v(t._s(t.atom.atomName))])]):t._e()],1)],1),t._v(" "),t.moduleMarkdownRender&&t.atom?t._l(t.items,(function(e){return n("f7-card",{key:e.id,staticClass:"comment"},[n("f7-card-header",[n("div",{staticClass:"title"},[n("img",{staticClass:"avatar avatar32",attrs:{src:t.getItemMedia(e)}}),t._v(" "),n("div",{staticClass:"name"},[t._v(t._s(e.userName))]),t._v(" "),n("div",{staticClass:"date"},[t._v("#"+t._s(e.sorting)+" · "+t._s(t.$meta.util.formatDateTimeRelative(e.createdAt)))])]),t._v(" "),n("div",{staticClass:"actions"},[e.userId===t.user.id?n("eb-link",{staticClass:"action",attrs:{iconF7:"::edit",iconSize:"18","eb-href":"/a/basefront/comment/item?atomId="+t.atomId+"&commentId="+e.id+"&replyId=0"}}):t._e(),t._v(" "),e.userId===t.user.id?n("eb-link",{staticClass:"action",attrs:{iconF7:"::delete-forever",iconSize:"18",context:e,onPerform:t.onPerformDelete}}):t._e(),t._v(" "),n("eb-link",{staticClass:"action",attrs:{iconF7:e.heart?"::heart":":outline:heart-outline",iconSize:"18",iconBadge:e.heartCount,badgeColor:"orange",context:e,onPerform:t.onPerformHeart}}),t._v(" "),t.user.anonymous?t._e():n("eb-link",{staticClass:"action",attrs:{iconF7:"::reply",iconSize:"18","eb-href":"/a/basefront/comment/item?atomId="+t.atomId+"&commentId=0&replyId="+e.id}})],1)]),t._v(" "),n("f7-card-content",{attrs:{padding:""}},[n("eb-markdown-render",{attrs:{host:t.markdownHost,html:e.html}})],1)],1)})):t._e(),t._v(" "),n("eb-load-more",{ref:"loadMore",class:t.showSingle?"display-none":"",attrs:{onLoadClear:t.onLoadClear,onLoadMore:t.onLoadMore,autoInit:!0}}),t._v(" "),t.showSingle?n("eb-button",{attrs:{onPerform:t.onPerformShowAllComments}},[t._v(t._s(t.$text("ShowAllComments")))]):t._e()],2)}),[],!1,null,null,null).exports},133:(t,e,n)=>{"use strict";function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){o(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e,n,r,a,o,i){try{var s=t[o](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,a)}function s(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function s(t){i(o,r,a,s,c,"next",t)}function c(t){i(o,r,a,s,c,"throw",t)}s(void 0)}))}}n.r(e),n.d(e,{default:()=>u});const c={data:function(){var t=this.$f7route.query;return{atomId:parseInt(t.atomId),items:null}},created:function(){this.reload()},methods:{combineAtomClassAndLanguage:function(){var t={module:this.atomClass.module,atomClassName:this.atomClass.atomClassName};return this.language&&(t.language=this.language),t},onRefresh:function(t){t(),this.reload()},reload:function(){var t=this;this.$api.post("/a/base/resource/resourceRoles",{key:{atomId:this.atomId}}).then((function(e){t.items=e.list}))},onPerformAdd:function(){var t=this;return s(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.$view.navigate("/a/baseadmin/role/select",{target:"_self",context:{params:{roleIdStart:null,multiple:!0},callback:function(e,n){200===e&&t._resourceRoleAdd(n)}}});case 1:case"end":return e.stop()}}),e)})))()},_resourceRoleAdd:function(t){var e=this;return s(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t&&0!==t.length){n.next=2;break}return n.abrupt("return");case 2:return r=t.map((function(t){return t.itemId})),n.next=5,e.$api.post("/a/base/resource/resourceRoleAdd",{key:{atomId:e.atomId},data:{roles:r}});case 5:e.reload();case 6:case"end":return n.stop()}}),n)})))()},onItemClick:function(t,e){var n=this;return s(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.onPerformEdit(t,e);case 2:case"end":return r.stop()}}),r)})))()},onPerformEdit:function(t,e){var n=this;return s(regeneratorRuntime.mark((function t(){var r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.$view.dialog.prompt(n.$text("Please specify the new tag name"));case 2:if(r=t.sent){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,n.$api.post("/a/base/tag/save",{tagId:e.id,data:{tagName:r}});case 7:-1!==(o=n.items.findIndex((function(t){return t.id===e.id})))&&n.items.splice(o,1,a(a({},e),{},{tagName:r}));case 9:case"end":return t.stop()}}),t)})))()},onPerformRemove:function(t,e){var n=this;return s(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.$view.dialog.confirm();case 2:return r.next=4,n.$api.post("/a/base/resource/resourceRoleRemove",{key:{atomId:n.atomId},data:{roleId:e.roleId}});case 4:n.$meta.util.swipeoutClose(t.currentTarget),-1!==(a=n.items.findIndex((function(t){return t.id===e.id})))&&n.items.splice(a,1);case 7:case"end":return r.stop()}}),r)})))()}}},u=(0,n(792).Z)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("eb-page",{attrs:{ptr:""},on:{"ptr:refresh":t.onRefresh}},[n("eb-navbar",{attrs:{large:"",largeTransparent:"",title:t.$text("Authorize"),"eb-back-link":"Back"}},[n("f7-nav-right",[n("eb-link",{attrs:{iconF7:"::add",onPerform:t.onPerformAdd}})],1)],1),t._v(" "),n("f7-list",t._l(t.items,(function(e){return n("eb-list-item",{key:e.id,staticClass:"item",attrs:{title:e.roleNameLocale,swipeout:""}},[n("eb-context-menu",[n("div",{attrs:{slot:"right"},slot:"right"},[n("div",{attrs:{color:"red",context:e,onPerform:t.onPerformRemove}},[t._v(t._s(t.$text("Remove")))])])])],1)})),1),t._v(" "),t.items&&0===t.items.length?n("div",{staticClass:"text-align-center"},[t._v(t._s(t.$text("No Data")))]):t._e()],1)}),[],!1,null,"8dbf8166",null).exports},245:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>u});var r=n(3);function a(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){c=!0,i=t},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw i}}}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function i(t,e,n,r,a,o,i){try{var s=t[o](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,a)}function s(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function s(t){i(o,r,a,s,c,"next",t)}function c(t){i(o,r,a,s,c,"throw",t)}s(void 0)}))}}const c={mixins:[n.n(r)().prototype.$meta.module.get("a-components").options.mixins.ebPageContext],data:function(){var t=this.$f7route.query;return{maxLevelAutoOpened:parseInt(t.maxLevelAutoOpened||1),resourceType:t.resourceType,treeData:null,resourcesArrayAll:null}},computed:{ready:function(){return this.treeData&&this.resourcesArrayAll},pageTitle:function(){var t=this.$store.getState("a/base/resourceTypes");return t?"".concat(this.$text("Select")," ").concat(t[this.resourceType].titleLocale):null},multiple:function(){return this.contextParams.multiple},fixed:function(){return this.contextParams.fixed},checkedAtomStaticKeys:function(){return this.contextParams.checkedAtomStaticKeys},root:function(){return{attrs:{itemToggle:!1,selectable:!1,multiple:this.multiple}}}},created:function(){this.__init()},methods:{__init:function(){var t=this;return s(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("a/base/getResourceTypes");case 2:return e.next=4,t.$store.dispatch("a/base/getResourcesArray",{resourceType:t.resourceType});case 4:return t.resourcesArrayAll=e.sent,e.next=7,t.$store.dispatch("a/base/getCategoryTreeResource",{resourceType:t.resourceType});case 7:t.treeData=e.sent;case 8:case"end":return e.stop()}}),e)})))()},combineAtomClassAndLanguage:function(){var t={module:this.atomClass.module,atomClassName:this.atomClass.atomClassName};return this.language&&(t.language=this.language),t},_loadNodeCategories:function(t,e){var n=this;return s(regeneratorRuntime.mark((function r(){var o,i,s,c,u,l,m,d,f;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:o=t.__level||0,i=o+1,s=t.root?n.treeData:t.data.children,c=[],u=a(s),r.prev=5,u.s();case 7:if((l=u.n()).done){r.next=17;break}if(m=l.value,d=!1,f={id:m.id,attrs:{id:e._calcNodeAttrId(t,m),label:m.categoryNameLocale,toggle:!0,itemToggle:!0,loadChildren:!0,checkbox:d,checkOnLabel:d,selectable:d},data:m,__level:i},!(i<=n.maxLevelAutoOpened||-1===n.maxLevelAutoOpened)){r.next=14;break}return r.next=14,e._preloadChildren(f);case 14:c.push(f);case 15:r.next=7;break;case 17:r.next=22;break;case 19:r.prev=19,r.t0=r.catch(5),u.e(r.t0);case 22:return r.prev=22,u.f(),r.finish(22);case 25:return r.abrupt("return",c);case 26:case"end":return r.stop()}}),r,null,[[5,19,22,25]])})))()},_checkCheckedInit:function(t){return!!this.checkedAtomStaticKeys&&this.checkedAtomStaticKeys.findIndex((function(e){return e===t.atomStaticKey}))>-1},_loadNodeResources:function(t){var e=this;return s(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.resourcesArrayAll.filter((function(e){return e.atomCategoryId===t.id})),n.abrupt("return",r.map((function(t){var n=!0,r=e._checkCheckedInit(t),a="disabled"===e.fixed&&!0===JSON.parse(t.resourceConfig).fixed;return{id:t.atomId,attrs:{label:t.atomNameLocale,toggle:!1,loadChildren:!1,checkbox:n,checked:r,checkOnLabel:n,selectable:n,itemToggle:!1,disabled:a},data:t}})));case 2:case"end":return n.stop()}}),n)})))()},onLoadChildren:function(t,e){var n=this;return s(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!t.root&&1!==t.data.categoryCatalog){r.next=4;break}return r.next=3,n._loadNodeCategories(t,e);case 3:case 6:return r.abrupt("return",r.sent);case 4:return r.next=6,n._loadNodeResources(t,e);case 7:case"end":return r.stop()}}),r)})))()},onPerformDone:function(){var t,e=this.$refs.tree.checked();t=e&&0!==e.length?e:null,this.contextCallback(200,t),this.$f7router.back()}}},u=(0,n(792).Z)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("eb-page",[n("eb-navbar",{attrs:{large:"",largeTransparent:"",title:t.pageTitle,"eb-back-link":"Back"}},[n("f7-nav-right",[n("eb-link",{attrs:{iconF7:"::done",onPerform:t.onPerformDone}})],1)],1),t._v(" "),t.ready?n("eb-treeview",{ref:"tree",attrs:{root:t.root,onLoadChildren:t.onLoadChildren}}):t._e(),t._v(" "),n("f7-block")],1)}),[],!1,null,"36c61c45",null).exports},442:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>s});var r=n(3),a=n.n(r),o=n(276);const i={mixins:[a().prototype.$meta.module.get("a-components").options.mixins.ebPageContext],components:{tagSelect:o.Z},data:function(){var t=this.$f7route.query;return{atomClass:{module:t.module,atomClassName:t.atomClassName},language:t.language,searchQuery:null}},computed:{selectedTags:function(){return this.contextParams.selectedTags},multiple:function(){return!1!==this.contextParams.multiple},showBlockCurrent:function(){return!1!==this.contextParams.showBlockCurrent}},created:function(){var t=this;this.onSearch=this.$meta.util.debounce((function(e,n){t.searchQuery=n}),200)},methods:{onPerformDone:function(){var t=this.$refs.tagSelect.checked();this.contextCallback(200,t),this.$f7router.back()},onPerformSearch:function(){this.$refs.searchbar.f7Searchbar.enable()},onDisable:function(){this.searchQuery=null}}},s=(0,n(792).Z)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("eb-page",[n("eb-navbar",{attrs:{large:"",largeTransparent:"",title:t.$text("Select Tags"),"eb-back-link":"Back"}},[n("f7-nav-right",[n("eb-link",{attrs:{iconF7:"::search",onPerform:t.onPerformSearch}}),t._v(" "),n("eb-link",{ref:"buttonSubmit",attrs:{iconF7:"::done",onPerform:t.onPerformDone}})],1),t._v(" "),n("f7-searchbar",{ref:"searchbar",attrs:{expandable:"",backdrop:!1,"disable-button":!0,"clear-button":!0,"custom-search":!0},on:{"searchbar:search":t.onSearch,"searchbar:disable":t.onDisable}})],1),t._v(" "),n("tagSelect",{ref:"tagSelect",attrs:{atomClass:t.atomClass,language:t.language,multiple:t.multiple,searchQuery:t.searchQuery,selectedTags:t.selectedTags,showBlockCurrent:t.showBlockCurrent}})],1)}),[],!1,null,null,null).exports},792:(t,e,n)=>{"use strict";function r(t,e,n,r,a,o,i,s){var c,u="function"==typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=n,u._compiled=!0),r&&(u.functional=!0),o&&(u._scopeId="data-v-"+o),i?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),a&&a.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(i)},u._ssrRegister=c):a&&(c=s?function(){a.call(this,(u.functional?this.parent:this).$root.$options.shadowRoot)}:a),c)if(u.functional){u._injectStyles=c;var l=u.render;u.render=function(t,e){return c.call(e),l(t,e)}}else{var m=u.beforeCreate;u.beforeCreate=m?[].concat(m,c):[c]}return{exports:t,options:u}}n.d(e,{Z:()=>r})},65:(t,e,n)=>{var r=n(450);r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[t.id,r,""]]),r.locals&&(t.exports=r.locals),(0,n(159).Z)("537bb97c",r,!0,{})},210:(t,e,n)=>{var r=n(779);r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[t.id,r,""]]),r.locals&&(t.exports=r.locals),(0,n(159).Z)("82655904",r,!0,{})},159:(t,e,n)=>{"use strict";function r(t,e){for(var n=[],r={},a=0;a<e.length;a++){var o=e[a],i=o[0],s={id:t+":"+a,css:o[1],media:o[2],sourceMap:o[3]};r[i]?r[i].parts.push(s):n.push(r[i]={id:i,parts:[s]})}return n}n.d(e,{Z:()=>h});var a="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!a)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var o={},i=a&&(document.head||document.getElementsByTagName("head")[0]),s=null,c=0,u=!1,l=function(){},m=null,d="data-vue-ssr-id",f="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function h(t,e,n,a){u=n,m=a||{};var i=r(t,e);return p(i),function(e){for(var n=[],a=0;a<i.length;a++){var s=i[a];(c=o[s.id]).refs--,n.push(c)}for(e?p(i=r(t,e)):i=[],a=0;a<n.length;a++){var c;if(0===(c=n[a]).refs){for(var u=0;u<c.parts.length;u++)c.parts[u]();delete o[c.id]}}}}function p(t){for(var e=0;e<t.length;e++){var n=t[e],r=o[n.id];if(r){r.refs++;for(var a=0;a<r.parts.length;a++)r.parts[a](n.parts[a]);for(;a<n.parts.length;a++)r.parts.push(b(n.parts[a]));r.parts.length>n.parts.length&&(r.parts.length=n.parts.length)}else{var i=[];for(a=0;a<n.parts.length;a++)i.push(b(n.parts[a]));o[n.id]={id:n.id,refs:1,parts:i}}}}function v(){var t=document.createElement("style");return t.type="text/css",i.appendChild(t),t}function b(t){var e,n,r=document.querySelector("style["+d+'~="'+t.id+'"]');if(r){if(u)return l;r.parentNode.removeChild(r)}if(f){var a=c++;r=s||(s=v()),e=x.bind(null,r,a,!1),n=x.bind(null,r,a,!0)}else r=v(),e=_.bind(null,r),n=function(){r.parentNode.removeChild(r)};return e(t),function(r){if(r){if(r.css===t.css&&r.media===t.media&&r.sourceMap===t.sourceMap)return;e(t=r)}else n()}}var g,y=(g=[],function(t,e){return g[t]=e,g.filter(Boolean).join("\n")});function x(t,e,n,r){var a=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=y(e,a);else{var o=document.createTextNode(a),i=t.childNodes;i[e]&&t.removeChild(i[e]),i.length?t.insertBefore(o,i[e]):t.appendChild(o)}}function _(t,e){var n=e.css,r=e.media,a=e.sourceMap;if(r&&t.setAttribute("media",r),m.ssrId&&t.setAttribute(d,e.id),a&&(n+="\n/*# sourceURL="+a.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}},990:(t,e,n)=>{var r={"./atom/item.jsx":696,"./atom/list.jsx":235,"./atom/searchQuick.jsx":368,"./atom/select.jsx":783,"./atom/selecting.jsx":239};function a(t){var e=o(t);return n(e)}function o(t){if(!n.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}a.keys=function(){return Object.keys(r)},a.resolve=o,t.exports=a,a.id=990},142:(t,e,n)=>{var r={"./atom/autoStar.vue":722,"./atom/draftTabs.vue":472,"./atom/labels.vue":693,"./atom/selectAtomClass.vue":642,"./atom/starTabs.vue":824,"./attachment/all.vue":484,"./attachment/list.vue":381,"./base/about.vue":723,"./base/alert.vue":238,"./base/openLink.vue":849,"./category/categorySelect.vue":255,"./comment/all.vue":54,"./comment/autoHeart.vue":767,"./comment/item.vue":531,"./comment/list.vue":577,"./resource/authorize.vue":133,"./resource/resourceSelect.vue":245,"./tag/tagSelect.vue":442};function a(t){var e=o(t);return n(e)}function o(t){if(!n.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}a.keys=function(){return Object.keys(r)},a.resolve=o,t.exports=a,a.id=142},3:t=>{"use strict";t.exports=window.Vue}},e={};function n(r){var a=e[r];if(void 0!==a)return a.exports;var o=e[r]={id:r,exports:{}};return t[r](o,o.exports,n),o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var r={};(()=>{"use strict";var t;n.r(r),n.d(r,{default:()=>e}),n(65);const e={install:function(e,r){return t?console.error("already installed."):(t=e,r({routes:n(644).Z,store:n(81).Z(t),config:n(788).Z,locales:n(137).Z,components:n(906).Z,mixins:n(751).Z}))}}})(),window["a-basefront"]=r})();
//# sourceMappingURL=front.js.map