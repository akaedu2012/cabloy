(()=>{var t={451:(t,e,n)=>{"use strict";function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function r(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){o(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e,n,a,r,o,i){try{var s=t[o](i),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(a,r)}function s(t){return function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function s(t){i(o,a,r,s,l,"next",t)}function l(t){i(o,a,r,s,l,"throw",t)}s(void 0)}))}}n.d(e,{Z:()=>L});const l={meta:{global:!1},methods:{onAction:function(t){var e=this;return s(regeneratorRuntime.mark((function n(){var a,o,i,s,l,u,c,d,m,f,p,h,b,y,v,g,k,A,x;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=t.ctx,o=t.action,i=t.item,s=i.item,l=i.meta,u=l&&l.flowTaskId||0,c={atomId:s.atomId},d={detailId:s.detailId,detailItemId:s.detailItemId},m={module:s.module,detailClassName:s.detailClassName},"create"!==o.name&&"create"!==o.action){n.next=11;break}return n.next=8,e._onActionCreate({ctx:a,action:o,item:s,meta:l,atomKey:c,detailClass:m});case 8:return n.abrupt("return",n.sent);case 11:if("delete"!==o.name){n.next=20;break}return n.next=14,a.$view.dialog.confirm();case 14:return n.next=16,a.$api.post("/a/detail/detail/delete",{flowTaskId:u,key:d});case 16:a.$meta.eventHub.$emit("detail:action",{atomKey:c,detailClass:m,key:d,action:o}),"/a/detail/detail/item"===a.$pageRoute.path&&a.$f7router.back(),n.next=75;break;case 20:if("save"!==o.name){n.next=27;break}return n.next=23,a.$api.post("/a/detail/detail/write",{flowTaskId:u,key:d,item:s});case 23:return a.$meta.eventHub.$emit("detail:action",{atomKey:c,detailClass:m,key:d,action:o}),n.abrupt("return",a.$text("Saved"));case 27:if("read"!==o.name){n.next=33;break}f={mode:"view",detailId:s.detailId,detailItemId:s.detailItemId,flowTaskId:u},p=a.$meta.util.combineQueries("/a/detail/detail/item",f),a.$view.navigate(p,o.navigateOptions),n.next=75;break;case 33:if("write"!==o.name){n.next=39;break}h={mode:"edit",detailId:s.detailId,detailItemId:s.detailItemId,flowTaskId:u},b=a.$meta.util.combineQueries("/a/detail/detail/item",h),a.$view.navigate(b,o.navigateOptions),n.next=75;break;case 39:if("clone"!==o.name){n.next=63;break}return n.prev=40,n.next=43,a.$api.post("/a/detail/detail/clone",{flowTaskId:u,key:d});case 43:return y=n.sent,v=r(r({},s),{},{detailId:y.detailId,detailItemId:y.detailItemId}),a.$meta.eventHub.$emit("detail:action",{atomKey:c,detailClass:m,key:y,action:{name:"create"}}),n.next=48,a.$store.dispatch("a/base/getDetailActions");case 48:return g=n.sent,k=g[s.module][s.detailClassName].write,k=a.$utils.extend({},k),"/a/detail/detail/item"===a.$pageRoute.path?k.navigateOptions={target:"_self"}:k.navigateOptions=o.navigateOptions,n.next=54,a.$meta.util.performAction({ctx:a,action:k,item:{item:v,meta:l}});case 54:n.next=61;break;case 56:if(n.prev=56,n.t0=n.catch(40),422!==n.t0.code){n.next=60;break}throw new Error(n.t0.message[0].message);case 60:throw n.t0;case 61:n.next=75;break;case 63:if("moveUp"!==o.name){n.next=70;break}return n.next=66,a.$api.post("/a/detail/detail/moveUp",{flowTaskId:u,key:d});case 66:A=n.sent,a.$meta.eventHub.$emit("detail:action",{atomKey:c,detailClass:m,key:d,action:o,result:A}),n.next=75;break;case 70:if("moveDown"!==o.name){n.next=75;break}return n.next=73,a.$api.post("/a/detail/detail/moveDown",{flowTaskId:u,key:d});case 73:x=n.sent,a.$meta.eventHub.$emit("detail:action",{atomKey:c,detailClass:m,key:d,action:o,result:x});case 75:case"end":return n.stop()}}),n,null,[[40,56]])})))()},_onActionCreate:function(t){return s(regeneratorRuntime.mark((function e(){var n,a,r,o,i,s,l,u,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.ctx,a=t.action,r=t.item,o=t.meta,i=t.atomKey,s=t.detailClass,e.next=3,n.$api.post("/a/detail/detail/create",{flowTaskId:o.flowTaskId,atomKey:i,detailClass:s,item:r});case 3:if(l=e.sent,n.$meta.eventHub.$emit("detail:action",{atomKey:i,detailClass:s,key:l,action:a}),1!==a.menu&&!a.actionComponent&&!a.actionPath){e.next=14;break}return r=n.$utils.extend({},r,l),e.next=9,n.$store.dispatch("a/base/getDetailActions");case 9:return u=e.sent,c=u[r.module][r.detailClassName].write,c=n.$utils.extend({},c),e.next=14,n.$meta.util.performAction({ctx:n,action:c,item:{item:r,meta:o}});case 14:return e.abrupt("return",l);case 15:case"end":return e.stop()}}),e)})))()}}};var u=n(5),c=n.n(u);function d(t,e,n,a,r,o,i){try{var s=t[o](i),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(a,r)}const m={data:function(){return{layout:{current:null,config:null,instance:null}}},created:function(){this.layout.current=this.container.layout||this.layout_get()},methods:{layout_get:function(){return"small"===this.$view.size?"list":"table"},layout_prepareConfig:function(){var t,e=this;return(t=regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.base.configDetailBase=e.$meta.config.modules["a-detail"].detail,!e.container.detailClass){t.next=5;break}return t.next=4,e.$meta.module.use(e.container.detailClass.module);case 4:e.base.configDetail=e.$meta.util.getProperty(e.$meta.config.modules[e.container.detailClass.module],"details.".concat(e.container.detailClass.detailClassName));case 5:e.base.config=e.base.configDetail?e.$meta.util.extend({},e.base.configDetailBase,e.base.configDetail):e.base.configDetailBase,e.layout.config=e.$meta.util.getProperty(e.base.config,"render.list.layouts.".concat(e.layout.current));case 7:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function i(t){d(o,a,r,i,s,"next",t)}function s(t){d(o,a,r,i,s,"throw",t)}i(void 0)}))})()},layout_getComponentOptions:function(){return{props:{layoutManager:this,layoutConfig:this.layout.config}}},layout_renderComponent:function(){var t=this.$createElement;return this.base.ready?t("eb-component",{attrs:{module:this.layout.config.component.module,name:this.layout.config.component.name,options:this.layout_getComponentOptions()}}):null},layout_getBlockComponentOptions:function(t){return{props:{layoutManager:this,blockConfig:t.blockConfig}}},layout_renderBlock:function(t){var e=t.blockName,n=this.$createElement;if(!this.base.ready)return null;var a=this.layout.config.blocks[e];return a?n("eb-component",{attrs:{module:a.component.module,name:a.component.name,options:this.layout_getBlockComponentOptions({blockConfig:a})}}):null},layout_renderLayout:function(){return(0,this.$createElement)("div",[this.layout_renderComponent()])}}};function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}const p={data:function(){return{bulk:{actions:null}}},created:function(){this.bulk_loadActions()},methods:{bulk_onAction:function(t,e){this.$f7.tooltip.hide(t.currentTarget);var n=this.getDetailAction(e);if(n){n=this.$utils.extend({},n,{targetEl:t.target});var a={atomId:this.container.atomId,module:e.module,detailClassName:e.detailClassName};return this.$meta.util.performAction({ctx:this,action:n,item:{item:a,meta:{flowTaskId:this.container.flowTaskId}}})}},bulk_loadActions:function(){var t=this;this.bulk.actions||this.$api.post("/a/detail/detail/actionsBulk",{flowTaskId:this.container.flowTaskId,atomKey:{atomId:this.container.atomId},detailClass:this.container.detailClass,mode:this.container.mode}).then((function(e){t.bulk.actions=e}))},bulk_renderActionsRight:function(){var t=this,e=this.$createElement,n=[];if(this.bulk.actions&&this.detailActionsAll){var a,r=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return f(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,r=function(){};return{s:r,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){s=!0,o=t},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}(this.bulk.actions);try{var o=function(){var r=a.value,o=t.getDetailAction(r);n.push(e("eb-link",{key:"actionsRight:".concat(o.name),attrs:{iconMaterial:o.icon&&o.icon.material,tooltip:o.icon&&o.titleLocale},props:{onPerform:function(e){return t.bulk_onAction(e,r)}}},[!o.icon&&o.titleLocale]))};for(r.s();!(a=r.n()).done;)o()}catch(t){r.e(t)}finally{r.f()}}return n}}},h={mixins:[{mixins:[c().prototype.$meta.module.get("a-base").options.mixins.ebDetailActions,{data:function(){return{base:{ready:!1,configDetailBase:null,configDetail:null,config:null}}},computed:{base_user:function(){return this.$store.state.auth.user.op}},created:function(){},methods:{base_prepareReadOptions:function(){var t={};return t.layout=this.layout.current,t},base_prepareSelectOptions:function(){var t={where:{}};return t.layout=this.layout.current,t.orders=null,this.container.options&&(t=this.$utils.extend({},t,this.container.options)),t},base_prepareSelectParams:function(){var t=this.base_prepareSelectOptions();return{flowTaskId:this.container.flowTaskId,atomKey:{atomId:this.container.atomId},detailClass:this.container.detailClass,options:t}},base_getItems:function(){return this.layout.instance?this.layout.instance.getItems():[]}}},{data:function(){return{}},methods:{}},m,p,{data:function(){return{actions:{list:null}}},created:function(){this.actions_fetchActions()},methods:{actions_fetchActions:function(){var t=this;this.actions.list||this.$api.post("/a/detail/detail/actions",{flowTaskId:this.container.flowTaskId,atomKey:{atomId:this.container.atomId},detailClass:this.container.detailClass,mode:this.container.mode}).then((function(e){t.actions.list=e}))}}}],data:function(){return{}},created:function(){var t=this;this.layout_prepareConfig().then((function(){t.base.ready=!0}))},beforeDestroy:function(){this.layout.instance=null,this.$emit("layoutManager:destroy")}}],props:{context:{type:Object}},data:function(){var t=this.context,e=t.parcel,n=t.property,a=t.validate;return{container:{title:this.context.getTitle(!0),mode:a.host&&a.host.mode,flowTaskId:a.host&&a.host.flowTaskId||0,atomId:e.data.atomId,atom:e.data,detailClass:n.ebParams.detailClass,options:{},layout:null}}},created:function(){},methods:{},render:function(){return this.layout_renderLayout()}},b={props:{context:{type:Object}},data:function(){return{}},mounted:function(){var t=this.context.validate;"edit"===(t.host&&t.host.mode)&&this.$meta.eventHub.$on("details:change",this.onActionChanged)},beforeDestroy:function(){var t=this.context.validate;"edit"===(t.host&&t.host.mode)&&this.$meta.eventHub.$off("details:change",this.onActionChanged)},methods:{onActionChanged:function(t){var e=this,n=t.atomKey,a=t.detailClass,r=t.details,o=this.context,i=o.parcel,s=o.property,l=o.validate;if(n.atomId===i.data.atomId&&a.module===s.ebParams.detailClass.module&&a.detailClassName===s.ebParams.detailClass.detailClassName){var u={details:r};this.$meta.util.sandbox.evaluate(s.ebParams.expression,u).then((function(t){e.context.setValue(t),s.ebAutoSubmit&&e.$nextTick((function(){l.onSubmit()}))})).catch((function(t){throw t}))}}},render:function(){var t=arguments[0],e=this.context,n=e.parcel,a=e.key,r=e.property,o=this.$utils.extend({},r,{ebType:"text"});return t("eb-list-item-validate",{attrs:{parcel:n,dataKey:a,property:o}})}};function y(t,e,n,a,r,o,i){try{var s=t[o](i),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(a,r)}const v={meta:{global:!1},props:{layoutManager:{type:Object},layoutConfig:{type:Object}},data:function(){return{items:[]}},created:function(){this.layoutManager.layout.instance=this,this.loadDetails()},methods:{loadDetails:function(){var t,e=this;return(t=regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.layoutManager.base_prepareSelectParams(),t.next=3,e.$api.post("/a/detail/detail/select",n);case 3:a=t.sent,e.items=a.list;case 5:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function i(t){y(o,a,r,i,s,"next",t)}function s(t){y(o,a,r,i,s,"throw",t)}i(void 0)}))})()},getBlockComponentOptions:function(t){var e=t.blockConfig;return{props:{layoutManager:this.layoutManager,layout:this,blockConfig:e}}},getItems:function(){return this.items},getItemsAll:function(){return this.getItems()},_renderBlock:function(t){var e=t.blockName,n=this.$createElement,a=this.layoutConfig.blocks[e];return a?n("eb-component",{attrs:{module:a.component.module,name:a.component.name,options:this.getBlockComponentOptions({blockConfig:a})}}):null}},render:function(){var t=arguments[0];return t("div",[this._renderBlock({blockName:"title"}),this._renderBlock({blockName:"items"})])}},g={meta:{global:!1},props:{layoutManager:{type:Object},blockConfig:{type:Object}},data:function(){return{}},methods:{_renderActionsLeft:function(){return(0,this.$createElement)("div",{class:"actions-block actions-block-left"},[this.layoutManager.container.title])},_renderActionsRight:function(){return(0,this.$createElement)("div",{class:"actions-block actions-block-right"},[this.layoutManager.bulk_renderActionsRight()])}},render:function(){var t=arguments[0];return t("f7-list-item",{attrs:{groupTitle:!0}},[t("div",{class:"detail-list-title-container"},[this._renderActionsLeft(),this._renderActionsRight()])])}};function k(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function A(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function x(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?A(Object(n),!0).forEach((function(e){w(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function w(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function I(t,e,n,a,r,o,i){try{var s=t[o](i),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(a,r)}function C(t){return function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function i(t){I(o,a,r,i,s,"next",t)}function s(t){I(o,a,r,i,s,"throw",t)}i(void 0)}))}}const _={meta:{global:!1},mixins:[c().prototype.$meta.module.get("a-base").options.mixins.ebDetailActions],props:{layoutManager:{type:Object},layout:{type:Object},blockConfig:{type:Object}},data:function(){return{}},mounted:function(){this.$meta.eventHub.$on("detail:action",this.onActionChanged)},beforeDestroy:function(){this.$meta.eventHub.$off("detail:action",this.onActionChanged)},methods:{getItemActions:function(){var t=this.layoutManager.actions.list;return t?this.$device.desktop?t:t.filter((function(t){return["read","write","delete"].indexOf(t.name)>-1})):t},onItemClick:function(t,e){var n=this;return C(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,n.onAction(t,e,{module:e.module,detailClassName:e.detailClassName,name:"view"===n.layoutManager.container.mode?"read":"write"});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}}),a)})))()},onSwipeoutOpened:function(t,e){},onAction:function(t,e,n){var a=this;return C(regeneratorRuntime.mark((function r(){var o,i;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o=a.getDetailAction(n)){r.next=3;break}return r.abrupt("return");case 3:return r.next=5,a.$meta.util.performAction({ctx:a,action:o,item:{item:e,meta:{flowTaskId:a.layoutManager.container.flowTaskId}}});case 5:return i=r.sent,a.$meta.util.swipeoutClose(t.target),r.abrupt("return",i);case 8:case"end":return r.stop()}}),r)})))()},onActionChanged:function(t){var e=this;return C(regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=t.atomKey,r=t.detailClass,a.atomId===e.layoutManager.container.atomId&&r.module===e.layoutManager.container.detailClass.module&&r.detailClassName===e.layoutManager.container.detailClass.detailClassName){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,e._onActionChanged(t);case 5:n.sent&&e.$meta.eventHub.$emit("details:change",x(x({},t),{},{details:e.layout.getItemsAll()}));case 7:case"end":return n.stop()}}),n)})))()},_onActionChanged:function(t){var e=this;return C(regeneratorRuntime.mark((function n(){var a,r,o,i,s,l,u,d,m,f,p;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=t.key,r=t.action,o=t.result,"create"!==r.name){n.next=5;break}return n.next=4,e.layout.loadDetails();case 4:return n.abrupt("return",!0);case 5:if(i=e.layout.items.findIndex((function(t){return t.detailId===a.detailId})),"delete"!==r.name){n.next=11;break}if(-1===i){n.next=10;break}return e.layout.items.splice(i,1),n.abrupt("return",!0);case 10:return n.abrupt("return",!1);case 11:if("moveUp"!==r.name&&"moveDown"!==r.name){n.next=25;break}if(o){n.next=14;break}return n.abrupt("return",!1);case 14:if(s="moveUp"===r.name?o.to:o.from,l="moveUp"===r.name?o.from:o.to,u=e.layout.items.findIndex((function(t){return t.detailId===s})),d=e.layout.items.findIndex((function(t){return t.detailId===l})),-1!==u&&-1!==d){n.next=22;break}return n.next=21,e.layout.loadDetails();case 21:return n.abrupt("return",!1);case 22:return m=e.layout.items.splice(d,1),e.layout.items.splice(u,0,m[0]),n.abrupt("return",!1);case 25:if(-1===i){n.next=32;break}return f=e.layoutManager.base_prepareReadOptions(),n.next=29,e.$api.post("/a/detail/detail/read",{flowTaskId:e.layoutManager.container.flowTaskId,key:a,options:f});case 29:return p=n.sent,c().set(e.layout.items,i,p),n.abrupt("return",!0);case 32:return n.abrupt("return",!1);case 33:case"end":return n.stop()}}),n)})))()},_getItemMetaSummary:function(t){return t._meta&&t._meta.summary||""},_getItemMetaFlags:function(t){var e=t._meta&&t._meta.flags||[];return Array.isArray(e)||(e=e.split(",")),e},_getActionColor:function(t,e){return 0===e?"orange":1===e?"red":"blue"},_getActionTitle:function(t){return this.getDetailActionTitle(t)},_renderListItem:function(t,e){var n,a=this,r=this.$createElement,o=r("div",{slot:"media"},[r("f7-badge",[e+1])]),i=r("div",{slot:"title",class:"title"},[r("div",[t.detailName])]),s=r("div",{slot:"root-end",class:"summary"},[this._getItemMetaSummary(t)]),l=[],u=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return k(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?k(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,r=function(){};return{s:r,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){s=!0,o=t},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}(this._getItemMetaFlags(t));try{for(u.s();!(n=u.n()).done;){var c=n.value;l.push(r("f7-badge",{key:c},[c]))}}catch(t){u.e(t)}finally{u.f()}var d=r("div",{slot:"after",class:"after"},[l]);return r("eb-list-item",{class:"item",key:t.detailId,attrs:{link:"#",swipeout:!0},props:{onPerform:function(e){return a.onItemClick(e,t)}},on:{swipeoutOpened:function(e){a.onSwipeoutOpened(e,t)},contextmenuOpened:function(e){a.onSwipeoutOpened(e,t)}}},[o,i,s,d,this._renderListItemContextMenu(t)])},_renderListItemContextMenu:function(t){var e=this,n=this.$createElement,a=this.getItemActions(),r=[];if(a){var o=function(o){o=parseInt(o);var s=a[o],l=e.getDetailAction(s);r.push(n("div",{key:s.code,attrs:{color:e._getActionColor(s,o)},props:{onPerform:function(n){return e.onAction(n,t,s)}}},[n("f7-icon",{slot:"media",attrs:{material:l.icon.material}}),e.$device.desktop&&n("div",{slot:"title"},[e._getActionTitle(s)])])),i=o};for(var i in a)o(i)}var s=n("div",{slot:"right",attrs:{ready:!!a}},[r]);return n("eb-context-menu",[s])},_renderList:function(){for(var t=this.$createElement,e=this.layout.items,n=[],a=0;a<e.length;a++)n.push(this._renderListItem(e[a],a));return t("f7-list",[n])}},render:function(){var t=arguments[0];return t("div",{class:"detail-list-main-container"},[this._renderList()])}};function $(t,e,n,a,r,o,i){try{var s=t[o](i),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(a,r)}const O={meta:{global:!1},mixins:[{data:function(){return{antdv:{locales:null}}},created:function(){var t=this;this.$meta.util.performAction({ctx:this,action:{actionModule:"a-antdv",actionComponent:"antdv",name:"locales"}}).then((function(e){t.antdv.locales=e}))},methods:{antdv_getLocale:function(){if(!this.antdv.locales)return null;var t=this.$meta.util.getLocale();return t&&"en-us"!==t?this.antdv.locales[t]:null}}}],props:{layoutManager:{type:Object},layoutConfig:{type:Object}},data:function(){return{info:{pageCurrent:1,pageSize:20,total:0},itemsPages:{},loading:!1}},computed:{dataSource:function(){return this.itemsPages[this.info.pageCurrent]}},created:function(){this.layoutManager.layout.instance=this,this.loadDetails()},methods:{loadDetails:function(){var t,e=this;return(t=regeneratorRuntime.mark((function t(){var n,a,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.loading=!0,n=e.layoutManager.base_prepareSelectParams(),t.next=5,e.$api.post("/a/detail/detail/select",n);case 5:a=t.sent,r=a.list,e.$set(e.itemsPages,e.info.pageCurrent,r),e.info.pageSize=e.info.total=r.length,e.loading=!1,t.next=16;break;case 12:t.prev=12,t.t0=t.catch(0),e.$view.toast.show({text:t.t0.message}),e.loading=!1;case 16:case"end":return t.stop()}}),t,null,[[0,12]])})),function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function i(t){$(o,a,r,i,s,"next",t)}function s(t){$(o,a,r,i,s,"throw",t)}i(void 0)}))})()},getItems:function(){return this.dataSource||[]},getItemsAll:function(){return this.getItems()},_findItem:function(t){for(var e in this.itemsPages){var n=this.itemsPages[e],a=n.findIndex((function(e){return e.detailId===t}));if(-1!==a)return{pageNum:parseInt(e),items:n,index:a}}return{pageNum:null,items:null,index:-1}},getBlockComponentOptions:function(t){var e=t.blockConfig;return{props:{layoutManager:this.layoutManager,layout:this,blockConfig:e}}},_renderBlock:function(t){var e=t.blockName,n=this.$createElement,a=this.layoutConfig.blocks[e];return a?n("eb-component",{attrs:{module:a.component.module,name:a.component.name,options:this.getBlockComponentOptions({blockConfig:a})}}):null},_renderEmpty:function(){var t=this.$createElement;return this.loading?t("f7-preloader"):t("div",[this.$text("No Data")])},_renderConfigProvider:function(){var t=this.$createElement;return this.antdv.locales?t("a-config-provider",{attrs:{locale:this.antdv_getLocale(),renderEmpty:this._renderEmpty}},[this._renderBlock({blockName:"items"})]):null}},render:function(){var t=arguments[0];return t("div",{class:"eb-antdv"},[this._renderBlock({blockName:"title"}),this._renderConfigProvider()])}},j={meta:{global:!1},props:{layoutManager:{type:Object},blockConfig:{type:Object}},data:function(){return{}},methods:{_renderActionsLeft:function(){return(0,this.$createElement)("div",{class:"actions-block actions-block-left"},[this.layoutManager.container.title])},_renderActionsRight:function(){return(0,this.$createElement)("div",{class:"actions-block actions-block-right"},[this.layoutManager.bulk_renderActionsRight()])}},render:function(){var t=arguments[0];return t("f7-list-item",{attrs:{groupTitle:!0}},[t("div",{class:"detail-list-title-container"},[this._renderActionsLeft(),this._renderActionsRight()])])}};function M(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function T(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?M(Object(n),!0).forEach((function(e){P(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function P(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function D(t,e,n,a,r,o,i){try{var s=t[o](i),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(a,r)}function S(t){return function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function i(t){D(o,a,r,i,s,"next",t)}function s(t){D(o,a,r,i,s,"throw",t)}i(void 0)}))}}function R(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}const N={meta:{global:!1},mixins:[c().prototype.$meta.module.get("a-base").options.mixins.ebDetailActions],props:{layoutManager:{type:Object},layout:{type:Object},blockConfig:{type:Object}},data:function(){return{contextmenuRecord:null}},computed:{columns:function(){var t,e=[],n=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return R(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?R(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,r=function(){};return{s:r,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){s=!0,o=t},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}(this.blockConfig.columns);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(!1!==a.visible){var r=this.$meta.util.extend({},a);r.key=r.key||r.dataIndex,r.title=this.$text(r.title),r.ellipsis=!0,r.customRender=this._customRender,e.push(r)}}}catch(t){n.e(t)}finally{n.f()}return e}},mounted:function(){this.$meta.eventHub.$on("detail:action",this.onActionChanged)},beforeDestroy:function(){this.$meta.eventHub.$off("detail:action",this.onActionChanged)},methods:{getItemActions:function(){return this.layoutManager.actions.list},onItemClick:function(t,e){var n=this;return S(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,n.onAction(t,e,{module:e.module,detailClassName:e.detailClassName,name:"view"===n.layoutManager.container.mode?"read":"write"});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}}),a)})))()},onSwipeoutOpened:function(t,e){},onAction:function(t,e,n){var a=this;return S(regeneratorRuntime.mark((function r(){var o,i;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o=a.getDetailAction(n)){r.next=3;break}return r.abrupt("return");case 3:return r.next=5,a.$meta.util.performAction({ctx:a,action:o,item:{item:e,meta:{flowTaskId:a.layoutManager.container.flowTaskId}}});case 5:return i=r.sent,a.$meta.util.swipeoutClose(t.target),r.abrupt("return",i);case 8:case"end":return r.stop()}}),r)})))()},onActionChanged:function(t){var e=this;return S(regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=t.atomKey,r=t.detailClass,a.atomId===e.layoutManager.container.atomId&&r.module===e.layoutManager.container.detailClass.module&&r.detailClassName===e.layoutManager.container.detailClass.detailClassName){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,e._onActionChanged(t);case 5:n.sent&&e.$meta.eventHub.$emit("details:change",T(T({},t),{},{details:e.layout.getItemsAll()}));case 7:case"end":return n.stop()}}),n)})))()},_onActionChanged:function(t){var e=this;return S(regeneratorRuntime.mark((function n(){var a,r,o,i,s,l,u,d,m,f,p,h,b;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=t.key,r=t.action,o=t.result,"create"!==r.name){n.next=5;break}return n.next=4,e.layout.loadDetails();case 4:return n.abrupt("return",!0);case 5:if(i=e.layout._findItem(a.detailId),s=i.items,l=i.index,"delete"!==r.name){n.next=12;break}if(-1===l){n.next=11;break}return s.splice(l,1),e.layout.info.total-=1,n.abrupt("return",!0);case 11:return n.abrupt("return",!1);case 12:if("moveUp"!==r.name&&"moveDown"!==r.name){n.next=26;break}if(o){n.next=15;break}return n.abrupt("return",!1);case 15:if(u="moveUp"===r.name?o.to:o.from,d="moveUp"===r.name?o.from:o.to,m=e.layout._findItem(u),f=e.layout._findItem(d),-1!==m.index&&-1!==f.index&&m.items===f.items){n.next=23;break}return n.next=22,e.layout.loadDetails();case 22:return n.abrupt("return",!1);case 23:return p=m.items.splice(f.index,1),m.items.splice(m.index,0,p[0]),n.abrupt("return",!1);case 26:if(-1===l){n.next=33;break}return h=e.layoutManager.base_prepareReadOptions(),n.next=30,e.$api.post("/a/detail/detail/read",{flowTaskId:e.layoutManager.container.flowTaskId,key:a,options:h});case 30:return b=n.sent,c().set(s,l,b),n.abrupt("return",!0);case 33:return n.abrupt("return",!1);case 34:case"end":return n.stop()}}),n)})))()},_getItemMetaSummary:function(t){return t._meta&&t._meta.summary||""},_getItemMetaFlags:function(t){var e=t._meta&&t._meta.flags||[];return Array.isArray(e)||(e=e.split(",")),e},_getActionColor:function(t,e){return 0===e?"orange":1===e?"red":"blue"},_getActionTitle:function(t){return this.getDetailActionTitle(t)},_customRender:function(t,e,n,a){var r=this.$createElement,o={props:{layoutManager:this.layoutManager,layout:this.layout,layoutItems:this,info:{text:t,record:e,index:n,column:a}}};return a.component?(a.component.options&&(o=this.$meta.util.extend({},a.component.options,o)),r("eb-component",{attrs:{module:a.component.module,name:a.component.name,options:o}})):r("eb-component",{attrs:{module:"a-basefront",name:"renderTableCellDefault",options:o}})},_customRow:function(t){var e=this;return{props:{},on:{contextmenu:function(n){var a=e.$$(e.$el).find(".popover");if(0!==a.length){n.stopPropagation(),n.preventDefault();var r=n.target;e.$nextTick((function(){e.$f7.popover.open(a,r),e.contextmenuRecord=t,e.onSwipeoutOpened(null,t)}))}}}}},_renderListItemContextMenu:function(){var t=this,e=this.$createElement,n=this.contextmenuRecord,a=this.getItemActions(),r=[];if(a){var o=function(o){o=parseInt(o);var s=a[o],l=t.getDetailAction(s);r.push(e("div",{key:s.code,attrs:{color:t._getActionColor(s,o)},props:{onPerform:function(e){return t.onAction(e,n,s)}}},[e("f7-icon",{slot:"media",attrs:{material:l.icon.material}}),e("div",{slot:"title"},[t._getActionTitle(s)])])),i=o};for(var i in a)o(i)}var s=e("div",{slot:"right",attrs:{ready:!!a}},[r]);return e("eb-context-menu",{attrs:{mode:"menu"}},[s])},_renderTable:function(){return(0,this.$createElement)("a-table",{attrs:{bordered:!0,columns:this.columns,rowKey:function(t){return t.detailId},dataSource:this.layout.dataSource,pagination:!1,customRow:this._customRow}})}},render:function(){var t=arguments[0];return t("div",{class:"detai-list-layout-table-container"},[this._renderTable(),this._renderListItemContextMenu()])}};function E(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return B(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?B(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,r=function(){};return{s:r,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){s=!0,o=t},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function B(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}const L={action:l,renderDetails:h,renderDetailsStat:b,listLayoutList:v,listLayoutBlockListTitle:g,listLayoutBlockListItems:_,listLayoutTable:O,listLayoutBlockTableTitle:j,listLayoutBlockTableItems:N,listLayoutTableCellDetailLineNo:{meta:{global:!1},props:{layoutManager:{type:Object},layout:{type:Object},layoutItems:{type:Object},info:{type:Object}},data:function(){return{}},created:function(){},methods:{},render:function(){var t=arguments[0],e=this.info.index;return t("span",[e+1])}},listLayoutTableCellDetailName:{meta:{global:!1},props:{layoutManager:{type:Object},layout:{type:Object},layoutItems:{type:Object},info:{type:Object}},data:function(){return{}},created:function(){},methods:{onItemClick:function(t){return this.layoutItems.onItemClick(t,this.info.record)}},render:function(){var t,e=this,n=arguments[0],a=this.info.record,r=[],o=E(this.layoutItems._getItemMetaFlags(a));try{for(o.s();!(t=o.n()).done;){var i=t.value;r.push(n("f7-badge",{key:i},[i]))}}catch(t){o.e(t)}finally{o.f()}var s=n("div",{class:"atomName-summary"},[this.layoutItems._getItemMetaSummary(a)]);return n("div",{class:"atom-list-layout-table-cell-atomName"},[n("div",{class:"atomName-inner"},[n("div",{class:"atomName-left"},[n("eb-link",{props:{onPerform:function(t){return e.onItemClick(t)}}},[this.info.record.detailName])]),n("div",{class:"atomName-right"},[r])]),s])}},itemLayoutMobile:{meta:{global:!1},props:{layoutManager:{type:Object},layoutConfig:{type:Object}},data:function(){return{}},created:function(){this.layoutManager.layout.instance=this},methods:{getBlockComponentOptions:function(t){var e=t.blockConfig;return{props:{layoutManager:this.layoutManager,layout:this,blockConfig:e}}},_renderBlock:function(t){var e=t.blockName,n=this.$createElement,a=this.layoutConfig.blocks[e];return a?n("eb-component",{attrs:{module:a.component.module,name:a.component.name,options:this.getBlockComponentOptions({blockConfig:a})}}):null}},render:function(){var t=arguments[0];return t("div",[this._renderBlock({blockName:"main"})])}},itemLayoutBlockMobileTitle:{meta:{global:!1},props:{layoutManager:{type:Object},blockConfig:{type:Object}},data:function(){return{}},created:function(){},methods:{},render:function(){var t=arguments[0];return t("f7-nav-right",[this.layoutManager.actions_render()])}},itemLayoutBlockMobileMain:{meta:{global:!1},props:{layoutManager:{type:Object},layout:{type:Object},blockConfig:{type:Object}},data:function(){return{}},render:function(){return this.layoutManager.validate_render()}}}},788:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});const a={detail:{render:{list:{info:{},layouts:{list:{component:{module:"a-detail",name:"listLayoutList"},blocks:{title:{component:{module:"a-detail",name:"listLayoutBlockListTitle"}},items:{component:{module:"a-detail",name:"listLayoutBlockListItems"}}}},table:{component:{module:"a-detail",name:"listLayoutTable"},blocks:{title:{component:{module:"a-detail",name:"listLayoutBlockTableTitle"}},items:{component:{module:"a-detail",name:"listLayoutBlockTableItems"},columns:[{dataIndex:"detailLineNo",title:"#",align:"center",width:"50px",component:{module:"a-detail",name:"listLayoutTableCellDetailLineNo"}},{dataIndex:"detailName",title:"Name",align:"left",component:{module:"a-detail",name:"listLayoutTableCellDetailName"}}]}}}}},item:{info:{},layouts:{mobile:{component:{module:"a-detail",name:"itemLayoutMobile"},blocks:{title:{component:{module:"a-detail",name:"itemLayoutBlockMobileTitle"}},main:{component:{module:"a-detail",name:"itemLayoutBlockMobileMain"}}}}}}}}}},933:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});const a={}},978:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});const a={}},137:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});const a={"en-us":n(933).Z,"zh-cn":n(978).Z}},644:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});const a=[{path:"detail/item",component:("detail/item",n(990)("./".concat("detail/item",".jsx")).default)}]},81:(t,e,n)=>{"use strict";function a(t){return{state:{},getters:{},mutations:{},actions:{}}}n.d(e,{Z:()=>a})},697:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>p});var a=n(5),r=n.n(a);function o(t,e,n,a,r,o,i){try{var s=t[o](i),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(a,r)}function i(t){return function(){var e=this,n=arguments;return new Promise((function(a,r){var i=t.apply(e,n);function s(t){o(i,a,r,s,l,"next",t)}function l(t){o(i,a,r,s,l,"throw",t)}s(void 0)}))}}const s={data:function(){return{base:{ready:!1,configDetailBase:null,configDetail:null,config:null,item:null,detailClass:null,module:null,validateParams:null,notfound:!1}}},computed:{base_ready:function(){return this.base.ready&&this.detailActionsAll},base_user:function(){return this.$store.state.auth.user.op}},created:function(){},mounted:function(){this.$meta.eventHub.$on("detail:action",this.base_onActionChanged)},beforeDestroy:function(){this.$meta.eventHub.$off("detail:action",this.base_onActionChanged)},methods:{base_loadItem:function(){var t=this;return i(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.base_prepareReadOptions(),e.next=4,t.$api.post("/a/detail/detail/read",{flowTaskId:t.container.flowTaskId,key:{detailId:t.container.detailId},options:n});case 4:return t.base.item=e.sent,t.base.detailClass={id:t.base.item.detailClassId,module:t.base.item.module,detailClassName:t.base.item.detailClassName},e.next=8,t.$meta.module.use(t.base.item.module);case 8:return t.base.module=e.sent,e.next=11,t.$api.post("/a/detail/detail/validator",{detailClass:{id:t.base.item.detailClassId}});case 11:return a=e.sent,t.base.validateParams={module:a.module,validator:a.validator},e.next=15,t.actions_fetchActions();case 15:return e.abrupt("return",!0);case 18:return e.prev=18,e.t0=e.catch(0),t.base.notfound=!0,e.abrupt("return",!1);case 22:case"end":return e.stop()}}),e,null,[[0,18]])})))()},base_prepareReadOptions:function(){var t={};return t.layout=this.layout.current,t},base_getCurrentStage:function(){if(!this.base.item)return null;var t=this.base.item.atomStage;return void 0!==t?0===t?"draft":1===t?"formal":"history":void 0},base_onActionChanged:function(t){var e=this;return i(regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=t.key,r=t.action,e.base_ready){n.next=4;break}return n.abrupt("return");case 4:if(e.base.item.detailId===a.detailId){n.next=6;break}return n.abrupt("return");case 6:if("edit"!==e.container.mode){n.next=9;break}return e.base.item.detailUpdatedAt=new Date,n.abrupt("return");case 9:if("create"!==r.name){n.next=11;break}return n.abrupt("return");case 11:if("delete"!==r.name){n.next=16;break}return e.base.item=null,e.base.notfound=!0,e.base.ready=!1,n.abrupt("return");case 16:return n.next=18,e.base_loadItem();case 18:case"end":return n.stop()}}),n)})))()}}};function l(t,e,n,a,r,o,i){try{var s=t[o](i),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(a,r)}const u={data:function(){return{layout:{current:null,config:null,instance:null}}},created:function(){this.layout.current=this.container.layout||this.layout_get()},methods:{layout_get:function(){return"large"===this.$view.size?"pc":"mobile"},layout_prepareConfig:function(){var t,e=this;return(t=regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.base.configDetailBase=e.$meta.config.modules["a-detail"].detail,e.base.configDetail=e.$meta.util.getProperty(e.$meta.config.modules[e.base.detailClass.module],"details.".concat(e.base.detailClass.detailClassName)),e.base.config=e.base.configDetail?e.$meta.util.extend({},e.base.configDetailBase,e.base.configDetail):e.base.configDetailBase,(n=e.$meta.util.getProperty(e.base.config,"render.item.layouts.".concat(e.layout.current)))||(n=e.$meta.util.getProperty(e.base.config,"render.item.layouts.mobile")),e.layout.config=n;case 6:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function i(t){l(o,a,r,i,s,"next",t)}function s(t){l(o,a,r,i,s,"throw",t)}i(void 0)}))})()},layout_getComponentOptions:function(){return{props:{layoutManager:this,layoutConfig:this.layout.config}}},layout_renderComponent:function(){var t=this.$createElement;return this.base.ready?t("eb-component",{attrs:{module:this.layout.config.component.module,name:this.layout.config.component.name,options:this.layout_getComponentOptions()}}):null},layout_getBlockComponentOptions:function(t){return{props:{layoutManager:this,blockConfig:t.blockConfig}}},layout_renderBlock:function(t){var e=t.blockName,n=this.$createElement;if(!this.base.ready)return null;var a=this.layout.config.blocks[e];return a?n("eb-component",{attrs:{module:a.component.module,name:a.component.name,options:this.layout_getBlockComponentOptions({blockConfig:a})}}):null},layout_renderLayout:function(){var t=this.$createElement;return this.base.notfound?t("f7-card",[t("f7-card-header",[this.$text("Friendly Tips")]),t("f7-card-content",[this.$text("Not Found")])]):t("div",[this.layout_renderComponent(),this.actions_renderPopover()])}}};function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function d(t,e,n,a,r,o,i){try{var s=t[o](i),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(a,r)}function m(t){return function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function i(t){d(o,a,r,i,s,"next",t)}function s(t){d(o,a,r,i,s,"throw",t)}i(void 0)}))}}const f={data:function(){return{actions:{list:null,popoverId:r().prototype.$meta.util.nextId("popover")}}},computed:{actions_itemActions:function(){return this.actions.list?this.actions.list.filter((function(t){return-1===["read"].indexOf(t.name)})):null},actions_listPopover:function(){if(!this.base_ready)return null;var t=this.actions_itemActions;return t&&(t=t.filter((function(t){return-1===["write"].indexOf(t.name)}))).length>0?t:null}},methods:{actions_fetchActions:function(){var t=this;return m(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.actions.list){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.$api.post("/a/detail/detail/actions",{flowTaskId:t.container.flowTaskId,atomKey:{atomId:t.base.item.atomId},detailClass:t.base.detailClass,mode:t.container.mode});case 4:t.actions.list=e.sent;case 5:case"end":return e.stop()}}),e)})))()},actions_findAction:function(t){return this.actions_itemActions?this.actions_itemActions.find((function(e){return e.name===t})):null},actions_onSubmit:function(){this.$refs.buttonSave.onClick()},actions_submit:function(t,e){var n=this;return m(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r=n.validate_getInstance()){a.next=3;break}return a.abrupt("return");case 3:return a.next=5,r.perform(t,{action:e});case 5:return a.abrupt("return",a.sent);case 6:case"end":return a.stop()}}),a)})))()},actions_onSaveDone:function(t){var e=this;return m(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.actions_onAction(t,"save");case 2:e.$f7router.back();case 3:case"end":return n.stop()}}),n)})))()},actions_onAction:function(t,e){var n=this;return m(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if("save"!==e){a.next=4;break}return a.next=3,n.actions_submit(t,e);case 3:return a.abrupt("return",a.sent);case 4:return"string"==typeof e&&(e={module:n.base.atomClass.module,atomClassName:n.base.atomClass.atomClassName,name:e}),r=n.getDetailAction(e),a.next=8,n.$meta.util.performAction({ctx:n,action:r,item:{item:n.base.item,meta:{flowTaskId:n.container.flowTaskId}}});case 8:return a.abrupt("return",a.sent);case 9:case"end":return a.stop()}}),a)})))()},actions_render:function(){var t=this,e=this.$createElement;if(!this.base_ready)return null;var n=[];if(this.actions_findAction("write")){var a="save";n.push(e("eb-link",{key:a,ref:"buttonSave",attrs:{iconMaterial:"save"},props:{onPerform:function(e){return t.actions_onAction(e,a)}}})),n.push(e("eb-link",{key:"saveDone",ref:"buttonSaveDone",attrs:{iconMaterial:"done"},props:{onPerform:function(e){return t.actions_onSaveDone(e)}}}))}return this.actions_listPopover&&n.push(e("f7-link",{key:"actionsPopover",attrs:{iconMaterial:"more_horiz","popover-open":"#".concat(this.actions.popoverId)}})),n},actions_renderPopover:function(){var t,e=this,n=this.$createElement,a=this.actions_listPopover;if(a){var r,o=[],i=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,r=function(){};return{s:r,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){s=!0,o=t},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}(a);try{var s=function(){var t=r.value,a=e.getDetailAction(t);o.push(n("eb-list-item",{key:t.code,attrs:{link:"#","popover-close":!0},props:{onPerform:function(n){return e.actions_onAction(n,t)}}},[n("f7-icon",{slot:"media",attrs:{material:a.icon&&a.icon.material}}),n("div",{slot:"title"},[e.getDetailActionTitle(t)])]))};for(i.s();!(r=i.n()).done;)s()}catch(t){i.e(t)}finally{i.f()}t=n("f7-list",{attrs:{inset:!0}},[o])}return n("f7-popover",{attrs:{id:this.actions.popoverId}},[t])}}},p={meta:{size:"small"},mixins:[{mixins:[r().prototype.$meta.module.get("a-base").options.mixins.ebDetailActions,s,{data:function(){return{}},methods:{page_getTitle:function(){var t=this.$text("Details");return this.base.item?this.base.item.detailName:t},page_getSubtitle:function(){return""}}},u,{data:function(){return{subnavbar:{enable:!1}}},methods:{}},f,{data:function(){return{}},methods:{validate_getInstance:function(){return this.$refs.validate},validate_onSubmit:function(){this.actions_onSubmit()},validate_onPerformValidate:function(t,e){var n=e&&e.action,a=this.$utils.extend({},this.actions_findAction("write"),{name:n}),r=this.getDetailAction(a);return this.$meta.util.performAction({ctx:this,action:r,item:{item:this.base.item,meta:{flowTaskId:this.container.flowTaskId}}})},validate_render:function(){var t=this.$createElement;return this.base_ready?t("eb-validate",{ref:"validate",attrs:{host:{stage:this.base_getCurrentStage(),mode:this.container.mode,flowTaskId:this.container.flowTaskId,detailId:this.container.detailId},readOnly:"edit"!==this.container.mode,auto:!0,data:this.base.item,params:this.base.validateParams},props:{onPerform:this.validate_onPerformValidate},on:{submit:this.validate_onSubmit}}):null}}}],data:function(){return{}},created:function(){var t=this;this.base_loadItem().then((function(e){e&&t.layout_prepareConfig().then((function(){t.base.ready=!0}))}))},beforeDestroy:function(){this.layout.instance=null,this.$emit("layoutManager:destroy")}}],data:function(){var t=this.$f7route.query;return{container:{mode:t.mode,flowTaskId:parseInt(t.flowTaskId||0),detailId:parseInt(t.detailId||0),detailItemId:parseInt(t.detailItemId||0),layout:t.layout}}},render:function(){var t=arguments[0];return t("eb-page",{attrs:{withSubnavbar:this.subnavbar.enable}},[t("eb-navbar",{attrs:{title:this.page_getTitle(),subtitle:this.page_getSubtitle(),"eb-back-link":"Back"}},[this.layout_renderBlock({blockName:"title"}),this.layout.instance&&this.subnavbar.enable&&this.layout_renderBlock({blockName:"subnavbar"})]),this.layout_renderLayout()])}}},891:(t,e,n)=>{var a=n(233),r=n(361)(a);r.push([t.id,":root .detail-list-title-container,\n:root .detail-item-title-container {\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n  font-size: var(--f7-toolbar-font-size);\n}\n:root .detail-list-title-container .actions-block,\n:root .detail-item-title-container .actions-block {\n  height: var(--f7-toolbar-height);\n  display: flex;\n  align-items: center;\n}\n:root .detail-list-title-container .actions-block a.link,\n:root .detail-item-title-container .actions-block a.link {\n  padding: 0 6px;\n  width: auto;\n  min-width: auto;\n}\n:root .detail-list-title-container .actions-block-left,\n:root .detail-item-title-container .actions-block-left {\n  justify-content: flex-start;\n}\n:root .detail-list-title-container .actions-block-right,\n:root .detail-item-title-container .actions-block-right {\n  justify-content: flex-end;\n}\n:root .detail-list-main-container .list > ul {\n  padding: 0;\n}\n","",{version:3,sources:["webpack://./front/src/assets/css/module.less"],names:[],mappings:"AAAA;;EAII,WAAA;EACA,aAAA;EACA,mBAAA;EACA,8BAAA;EACA,mBAAA;EACA,sCAAA;AADJ;AARA;;EAaM,gCAAA;EACA,aAAA;EACA,mBAAA;AADN;AAdA;;EAkBQ,cAAA;EACA,WAAA;EACA,eAAA;AAAR;AApBA;;EAyBM,2BAAA;AADN;AAxBA;;EA6BM,yBAAA;AADN;AA5BA;EAoCM,UAAA;AALN",sourcesContent:[":root {\n\n  .detail-list-title-container,\n  .detail-item-title-container {\n    width: 100%;\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    align-items: center;\n    font-size: var(--f7-toolbar-font-size);\n\n\n    .actions-block {\n      height: var(--f7-toolbar-height);\n      display: flex;\n      align-items: center;\n\n      a.link {\n        padding: 0 6px;\n        width: auto;\n        min-width: auto;\n      }\n    }\n\n    .actions-block-left {\n      justify-content: flex-start;\n    }\n\n    .actions-block-right {\n      justify-content: flex-end;\n\n    }\n  }\n\n  .detail-list-main-container {\n    .list>ul {\n      padding: 0;\n    }\n  }\n\n}\n"],sourceRoot:""}]),t.exports=r},361:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=t(e);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,a){"string"==typeof t&&(t=[[null,t,""]]);var r={};if(a)for(var o=0;o<this.length;o++){var i=this[o][0];null!=i&&(r[i]=!0)}for(var s=0;s<t.length;s++){var l=[].concat(t[s]);a&&r[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),e.push(l))}},e}},233:t=>{"use strict";function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}t.exports=function(t){var n,a,r=(a=4,function(t){if(Array.isArray(t))return t}(n=t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],a=!0,r=!1,o=void 0;try{for(var i,s=t[Symbol.iterator]();!(a=(i=s.next()).done)&&(n.push(i.value),!e||n.length!==e);a=!0);}catch(t){r=!0,o=t}finally{try{a||null==s.return||s.return()}finally{if(r)throw o}}return n}}(n,a)||function(t,n){if(t){if("string"==typeof t)return e(t,n);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?e(t,n):void 0}}(n,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[1],i=r[3];if("function"==typeof btoa){var s=btoa(unescape(encodeURIComponent(JSON.stringify(i)))),l="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),u="/*# ".concat(l," */"),c=i.sources.map((function(t){return"/*# sourceURL=".concat(i.sourceRoot||"").concat(t," */")}));return[o].concat(c).concat([u]).join("\n")}return[o].join("\n")}},824:(t,e,n)=>{var a=n(891);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.id,a,""]]),a.locals&&(t.exports=a.locals),(0,n(159).Z)("3a4253be",a,!0,{})},159:(t,e,n)=>{"use strict";function a(t,e){for(var n=[],a={},r=0;r<e.length;r++){var o=e[r],i=o[0],s={id:t+":"+r,css:o[1],media:o[2],sourceMap:o[3]};a[i]?a[i].parts.push(s):n.push(a[i]={id:i,parts:[s]})}return n}n.d(e,{Z:()=>p});var r="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!r)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var o={},i=r&&(document.head||document.getElementsByTagName("head")[0]),s=null,l=0,u=!1,c=function(){},d=null,m="data-vue-ssr-id",f="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function p(t,e,n,r){u=n,d=r||{};var i=a(t,e);return h(i),function(e){for(var n=[],r=0;r<i.length;r++){var s=i[r];(l=o[s.id]).refs--,n.push(l)}for(e?h(i=a(t,e)):i=[],r=0;r<n.length;r++){var l;if(0===(l=n[r]).refs){for(var u=0;u<l.parts.length;u++)l.parts[u]();delete o[l.id]}}}}function h(t){for(var e=0;e<t.length;e++){var n=t[e],a=o[n.id];if(a){a.refs++;for(var r=0;r<a.parts.length;r++)a.parts[r](n.parts[r]);for(;r<n.parts.length;r++)a.parts.push(y(n.parts[r]));a.parts.length>n.parts.length&&(a.parts.length=n.parts.length)}else{var i=[];for(r=0;r<n.parts.length;r++)i.push(y(n.parts[r]));o[n.id]={id:n.id,refs:1,parts:i}}}}function b(){var t=document.createElement("style");return t.type="text/css",i.appendChild(t),t}function y(t){var e,n,a=document.querySelector("style["+m+'~="'+t.id+'"]');if(a){if(u)return c;a.parentNode.removeChild(a)}if(f){var r=l++;a=s||(s=b()),e=k.bind(null,a,r,!1),n=k.bind(null,a,r,!0)}else a=b(),e=A.bind(null,a),n=function(){a.parentNode.removeChild(a)};return e(t),function(a){if(a){if(a.css===t.css&&a.media===t.media&&a.sourceMap===t.sourceMap)return;e(t=a)}else n()}}var v,g=(v=[],function(t,e){return v[t]=e,v.filter(Boolean).join("\n")});function k(t,e,n,a){var r=n?"":a.css;if(t.styleSheet)t.styleSheet.cssText=g(e,r);else{var o=document.createTextNode(r),i=t.childNodes;i[e]&&t.removeChild(i[e]),i.length?t.insertBefore(o,i[e]):t.appendChild(o)}}function A(t,e){var n=e.css,a=e.media,r=e.sourceMap;if(a&&t.setAttribute("media",a),d.ssrId&&t.setAttribute(m,e.id),r&&(n+="\n/*# sourceURL="+r.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */"),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}},990:(t,e,n)=>{var a={"./detail/item.jsx":697};function r(t){var e=o(t);return n(e)}function o(t){if(!n.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}r.keys=function(){return Object.keys(a)},r.resolve=o,t.exports=r,r.id=990},142:t=>{function e(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}e.keys=()=>[],e.resolve=e,e.id=142,t.exports=e},5:t=>{"use strict";t.exports=window.Vue}},e={};function n(a){var r=e[a];if(void 0!==r)return r.exports;var o=e[a]={id:a,exports:{}};return t[a](o,o.exports,n),o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var a in e)n.o(e,a)&&!n.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var a={};(()=>{"use strict";var t;n.r(a),n.d(a,{default:()=>e}),n(824);const e={install:function(e,a){return t?console.error("already installed."):(t=e,a({routes:n(644).Z,store:n(81).Z(t),config:n(788).Z,locales:n(137).Z,components:n(451).Z}))}}})(),window["a-detail"]=a})();
//# sourceMappingURL=front.js.map