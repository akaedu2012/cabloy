(()=>{var e={286:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var r=n(3),a=n.n(r);function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t,n,r,a,o,s){try{var i=e[o](s),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,a)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function s(e){i(o,r,a,s,c,"next",e)}function c(e){i(o,r,a,s,c,"throw",e)}s(void 0)}))}}function u(e){var t=function(){this._callbackCounter=0,this._callbacksAll={},this._callbacksMap={},this.initialize=function(){a().prototype.$f7.on("notificationClick",this._onNotificationClick.bind(this))},this.subscribe=function(){a().prototype.$meta.store.state.auth.user.op.anonymous||(this.subscribeId=e.subscribe("/a/message/uniform",this._onMessage.bind(this),this._onSubscribed.bind(this)))},this.reset=function(){this._callbacksAll={},this._callbacksMap={}},this.register=function(e,t){if(!e)throw new Error("messageClassName not empty");this._callbacksAll[e]||(this._callbacksAll[e]=[]);var n=++this._callbackCounter;return this._callbacksAll[e].push({id:n,callback:t}),this._callbacksMap[n]=e,n},this.unRegister=function(e){var t=this._callbacksMap[e];if(t){delete this._callbacksMap[e];var n=this._callbacksAll[t];if(n){var r=n.findIndex((function(t){return t.id===e}));-1!==r&&n.splice(r,1)}}},this._onMessage=function(){var e=c(regeneratorRuntime.mark((function e(t){var n,r,o,s,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.message,r=JSON.parse(n.content),e.next=4,this._performCallbacks({scene:"show",message:n,content:r});case 4:if(!e.sent){e.next=7;break}return e.abrupt("return");case 7:if(r.issuerAvatar){e.next=13;break}return e.next=10,a().prototype.$meta.util.combineIcon({f7:"::info-circle",size:"16"});case 10:o=e.sent,e.next=14;break;case 13:o='<img class="avatar avatar16" src="'.concat(r.issuerAvatar,'">');case 14:s={icon:o,title:r.issuerName,titleRightText:a().prototype.$meta.util.formatDateTime(n.createdAt),subtitle:r.title,text:r.body,closeButton:!0,closeOnClick:!0,swipeToClose:!1,_message:n,_content:r,"a-message:helper":!0,on:{closed:function(e){e.destroy()}}},-1!==(i=a().prototype.$meta.config.modules["a-message"].notification.closeTimeout)&&(s.closeTimeout=i),a().prototype.$f7.notification.create(s).open();case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),this._onSubscribed=function(){},this._onNotificationClick=function(){var e=c(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.params["a-message:helper"]){e.next=2;break}return e.abrupt("return");case 2:return n=t.params._message,r=t.params._content,e.next=6,this._openMessage({message:n,content:r});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),this._openMessage=function(){var e=c(regeneratorRuntime.mark((function e(t){var n,r,o,s,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.message,r=t.content,o=t.options,e.next=3,a().prototype.$meta.api.post("/a/socketio/message/setRead",{messageClass:{id:n.messageClassId},messageIds:[n.id]});case 3:return e.next=5,this._performCallbacks({scene:"click",message:n,content:r});case 5:if(!e.sent){e.next=8;break}return e.abrupt("return");case 8:(s=r.actionPath)&&(i=o&&o.navigate,a().prototype.$meta.vueLayout.navigate(s,i));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),this._performCallbacks=function(){var e=c(regeneratorRuntime.mark((function e(t){var n,r,a,s,i,c,u,l,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.scene,r=t.message,a=t.content,s="".concat(r.module,":").concat(r.messageClassName),i=this._callbacksAll[s]){e.next=5;break}return e.abrupt("return");case 5:c=!1,u=o(i),e.prev=7,u.s();case 9:if((l=u.n()).done){e.next=17;break}return f=l.value,e.next=13,f.callback({scene:n,message:r,content:a});case 13:!0===e.sent&&(c=!0);case 15:e.next=9;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(7),u.e(e.t0);case 22:return e.prev=22,u.f(),e.finish(22);case 25:return e.abrupt("return",c);case 26:case"end":return e.stop()}}),e,this,[[7,19,22,25]])})));return function(t){return e.apply(this,arguments)}}()};return{simple:function(){var e=new t;return e.initialize(),e}}}function l(e,t,n,r,a,o,s){try{var i=e[o](s),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,a)}var f=null;const m={uniform:{meta:{global:!1},methods:{onAction:function(e){var t=e.ctx;if("initialize"===e.action.name)return this._initialize({ctx:t})},_initialize:function(e){var t,n=this;return(t=regeneratorRuntime.mark((function t(){var r,o,s,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.ctx,!f){t.next=3;break}return t.abrupt("return",f);case 3:return o={actionModule:"a-socketio",actionComponent:"io",name:"instance"},t.next=6,n.$meta.util.performAction({ctx:r,action:o});case 6:return s=t.sent,i=u(s),f=i.simple(),a().prototype.$meta.eventHub.$on("auth:login",(function(){f.reset(),f.subscribe()})),f.subscribe(),t.abrupt("return",f);case 12:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function s(e){l(o,r,a,s,i,"next",e)}function i(e){l(o,r,a,s,i,"throw",e)}s(void 0)}))})()}}}}},788:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r={notification:{closeTimeout:-1}}},933:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r={}},978:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r={Messages:"消息",Message:"消息","Message Not Exists":"消息不存在"}},137:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r={"en-us":n(933).Z,"zh-cn":n(978).Z}},644:(e,t,n)=>{"use strict";function r(e){return n(990)("./".concat(e,".jsx")).default}n.d(t,{Z:()=>a});const a=[{path:"group",component:r("message/group")},{path:"list",component:r("message/list")},{path:"autojump",component:r("message/autojump"),meta:{auth:!0}}]},81:(e,t,n)=>{"use strict";function r(e){return{state:{},getters:{},mutations:{},actions:{}}}n.d(t,{Z:()=>r})},372:(e,t,n)=>{"use strict";function r(e,t,n,r,a,o,s){try{var i=e[o](s),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,a)}n.r(t),n.d(t,{default:()=>a});const a={data:function(){return{messageId:parseInt(this.$f7route.query.id),done:!1}},methods:{onPageAfterIn:function(){var e=this;this.done||this.autojump().then((function(){e.done=!0})).catch((function(t){e.done=!0,e.$view.toast.show({text:t.message})}))},autojump:function(){var e,t=this;return(e=regeneratorRuntime.mark((function e(){var n,r,a,o,s,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={where:{"a.id":t.messageId}},e.next=3,t.$api.post("/a/socketio/message/select",{options:n});case 3:if(r=e.sent,a=r.list[0]){e.next=7;break}throw new Error(t.$text("Message Not Exists"));case 7:return o=JSON.parse(a.content),s={actionModule:"a-message",actionComponent:"uniform",name:"initialize"},e.next=11,t.$meta.util.performAction({ctx:t,action:s});case 11:return i=e.sent,e.next=14,i._openMessage({message:a,content:o,options:{navigate:{ctx:t,target:"_self",reloadCurrent:!0}}});case 14:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(a,o){var s=e.apply(t,n);function i(e){r(s,a,o,i,c,"next",e)}function c(e){r(s,a,o,i,c,"throw",e)}i(void 0)}))})()}},render:function(){var e=arguments[0];return e("eb-page",{on:{pageAfterIn:this.onPageAfterIn}},[e("eb-navbar",{attrs:{title:this.$text("Message"),"eb-back-link":"Back"}}),e("f7-block",{class:"text-align-center"},[!this.done&&e("f7-preloader")])])}}},213:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l});var r=n(3);function a(e,t,n,r,a,o,s){try{var i=e[o](s),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,a)}const o={data:function(){return{}},methods:{layout_onGetLayoutConfigKeyCurrent:function(){return"message.".concat(null,".render.group.layout.current.").concat(this.$view.size)},layout_onPrepareConfigFull:function(){var e,t=this;return(e=regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("a/baselayout/getLayoutItem",{layoutKey:"a-message:layoutMessageGroupBase"});case 2:return n=e.sent,t.base.configMessageBase=n.content,e.abrupt("return",t.base.configMessageBase);case 5:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var s=e.apply(t,n);function i(e){a(s,r,o,i,c,"next",e)}function c(e){a(s,r,o,i,c,"throw",e)}i(void 0)}))})()}}};function s(e,t,n,r,a,o,s){try{var i=e[o](s),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,a)}const i={data:function(){return{data:{provider:{itemKey:null}}}},methods:{data_provider_onLoadItemsAll:function(){var e,t=this;return(e=regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.base_prepareSelectParams(),e.next=3,t.$api.post("/a/message/message/group",n);case 3:return r=e.sent,e.abrupt("return",{list:r});case 5:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){s(o,r,a,i,c,"next",e)}function c(e){s(o,r,a,i,c,"throw",e)}i(void 0)}))})()}}},c={methods:{item_renderListItem:function(e){var t=this,n=this.$createElement;return n("eb-list-item",{key:this.item_getMessageClassNameFull(e),attrs:{link:"#",title:e.messageClass.info.titleLocale},props:{onPerform:function(n){return t.item_onPerformItem(n,e)}}},[n("div",{slot:"after"},[this.item_renderStats(e)])])},item_onPerformItem:function(e,t){var n="/a/message/list?messageClass=".concat(encodeURIComponent(JSON.stringify(t.messageClass)));this.$view.navigate(n,{target:"_self"})},item_getMessageClassNameFull:function(e){return"".concat(e.module,":").concat(e.messageClassName)},item_renderStats:function(e){var t=this.$createElement,n=e.messageClass.info.uniform.stats;if(n)return t("eb-stats-color",{attrs:{stats_params:n.params}})}}};function u(e,t,n,r,a,o,s){try{var i=e[o](s),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,a)}const l={mixins:[{mixins:[n.n(r)().prototype.$meta.module.get("a-base").options.mixins.ebLayoutManagerBase,{data:function(){return{base:{configMessageBase:null}}},computed:{},methods:{base_prepareSelectOptions:function(){var e={where:{}};return e.layout=this.layout.current,this.container.options&&(e=this.$utils.extend({},e,this.container.options)),e},base_prepareSelectParams:function(){return{options:this.base_prepareSelectOptions()}}}},{data:function(){return{}},methods:{page_onGetTitle:function(){return this.$text("Messages")},page_onGetTitleSub:function(){return""}}},o,i,c],data:function(){return{}},created:function(){this.index_init()},methods:{index_init:function(){var e,t=this;return(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.base_init();case 2:return e.next=4,t.layout_prepareConfigLayout();case 4:t.base.ready=!0;case 5:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function s(e){u(o,r,a,s,i,"next",e)}function i(e){u(o,r,a,s,i,"throw",e)}s(void 0)}))})()}}}],data:function(){return{container:{}}},render:function(){return this.layout_renderPage()}}},335:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>_});var r=n(3);function a(e,t,n,r,a,o,s){try{var i=e[o](s),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,a)}const o={data:function(){return{}},methods:{layout_onGetLayoutConfigKeyCurrent:function(){var e=this.base_messageClass,t=e?"".concat(e.module,"_").concat(e.messageClassName):null;return"message.".concat(t,".render.list.layout.current.").concat(this.$view.size)},layout_onPrepareConfigFull:function(){var e,t=this;return(e=regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("a/baselayout/getLayoutItem",{layoutKey:"a-message:layoutMessageListBase"});case 2:return n=e.sent,t.base.configMessageBase=n.content,e.abrupt("return",t.base.configMessageBase);case 5:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var s=e.apply(t,n);function i(e){a(s,r,o,i,c,"next",e)}function c(e){a(s,r,o,i,c,"throw",e)}i(void 0)}))})()}}};function s(e,t,n,r,a,o,s){try{var i=e[o](s),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,a)}const i={data:function(){return{}},methods:{actions_render:function(){var e=this.$createElement;if(!this.base.ready)return null;var t=[];return t.push(e("eb-link",{key:"actionsMarkAllAsRead",attrs:{iconF7:"::mark-email-read"},props:{onPerform:this.actions_onPerformMarkAllAsRead}})),t},actions_onPerformMarkAllAsRead:function(){var e,t=this;return(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$api.post("/a/socketio/message/setRead",{messageClass:t.base_messageClass,all:!0});case 2:t.message_readAll();case 3:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){s(o,r,a,i,c,"next",e)}function c(e){s(o,r,a,i,c,"throw",e)}i(void 0)}))})()}}};function c(e,t,n,r,a,o,s){try{var i=e[o](s),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,a)}const u={data:function(){return{data:{provider:{itemKey:"id"}}}},methods:{data_provider_onLoadItemsPage:function(e){var t,n=this;return(t=regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.page,(a=n.base_prepareSelectParams()).options.page=r,t.next=5,n.$api.post("/a/socketio/message/select",a);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function s(e){c(o,r,a,s,i,"next",e)}function i(e){c(o,r,a,s,i,"throw",e)}s(void 0)}))})()}}};function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t,n,r,a,o,s){try{var i=e[o](s),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,a)}const d={data:function(){return{notification:{simple:null,callbackId:0}}},created:function(){var e=this;this.$meta.util.performAction({ctx:this,action:{actionModule:"a-message",actionComponent:"uniform",name:"initialize"}}).then((function(t){var n=e.base_messageClass,r="".concat(n.module,":").concat(n.messageClassName);e.notification.simple=t,e.notification.callbackId=e.notification.simple.register(r,e.notification_callback.bind(e))}))},beforeDestroy:function(){this.notification.callbackId&&(this.notification.simple.unRegister(this.notification.callbackId),this.notification.callbackId=0)},methods:{notification_callback:function(e){var t,n=this;return(t=regeneratorRuntime.mark((function t(){var r,a,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.scene,a=e.message,"show"!==r){t.next=7;break}return o=f(f({},a),{},{messageRead:0}),n.message_appendNew({message:o}),t.abrupt("return",!1);case 7:if("click"!==r){t.next=10;break}return n.message_readSet({message:a}),t.abrupt("return",!1);case 10:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function s(e){p(o,r,a,s,i,"next",e)}function i(e){p(o,r,a,s,i,"throw",e)}s(void 0)}))})()}}};function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const v={data:function(){return{message:{queueScroll:null}}},created:function(){this.message.queueScroll=this.$meta.util.queue(this.message_queueTaskScroll.bind(this))},beforeDestroy:function(){},methods:{message_readSet:function(e){var t=e.message,n=this.data_getItems().find((function(e){return e.id===t.id}));n&&(n.messageRead=1)},message_readAll:function(){var e,t=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){i=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(i)throw o}}}}(this.data_getItems());try{for(t.s();!(e=t.n()).done;){var n=e.value;0===n.messageRead&&(n.messageRead=1)}}catch(e){t.e(e)}finally{t.f()}},message_appendNew:function(e){var t=e.message;this.data_getItems().unshift(t),this.message_scroll()},message_scroll:function(){var e=this;this.$nextTick((function(){e.message.queueScroll.push()}))},message_queueTaskScroll:function(e,t){var n=this.$$(this.$page.$el).find(".page-content");if(0===n.scrollTop())return t();n.scrollTop(0,300,t)}}};function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const b={methods:{item_renderListItem:function(e){var t,n=this,r=this.$createElement,a=JSON.parse(e.content),o=r("div",{slot:"media"},[r("img",{class:"avatar avatar24",attrs:{src:this.item_getItemMetaMedia(a)}})]),s=r("div",{slot:"root-start",class:"header"},[r("div",{class:"mediaLabel"},[r("span",[this.item_getItemMetaMediaLabel(a)])]),r("div",{class:"date"},[r("span",[this.$meta.util.formatDateTimeRelative(e.createdAt)])])]),i=r("div",{slot:"title",class:"title"},[r("div",[a.title])]),c=r("div",{slot:"root-end",class:"summary"},[this.item_getItemMetaSummary(a)]),u=[],l=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){i=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(i)throw o}}}}(this.item_getItemMetaFlags(e,a));try{for(l.s();!(t=l.n()).done;){var f=t.value;u.push(r("f7-badge",{key:f},[f]))}}catch(e){l.e(e)}finally{l.f()}e.messageRead||u.push(r("f7-icon",{key:"messageRead",attrs:{f7:":outline:mail-outline"}}));var m=r("div",{slot:"after",class:"after"},[u]);return r("eb-list-item",{class:"item",attrs:{link:"#"},props:{onPerform:function(t){return n.item_onItemClick(t,e)}}},[o,s,i,c,m])},item_onItemClick:function(e,t){var n=this,r=[t.id];this.$api.post("/a/socketio/message/setRead",{messageClass:this.base_messageClass,messageIds:r}).then((function(){n.message_readSet({message:t})}));var a=JSON.parse(t.content);a.actionPath&&this.$view.navigate(a.actionPath)},item_getItemMetaMedia:function(e){var t=e.issuerAvatar||this.$meta.config.modules["a-base"].user.avatar.default;return this.$meta.util.combineImageUrl(t,24)},item_getItemMetaMediaLabel:function(e){return e.issuerName},item_getItemMetaSummary:function(e){return e.body||""},item_getItemMetaFlags:function(){return[]}}};function y(e,t,n,r,a,o,s){try{var i=e[o](s),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,a)}const _={mixins:[{mixins:[n.n(r)().prototype.$meta.module.get("a-base").options.mixins.ebLayoutManagerBase,{data:function(){return{base:{configMessageBase:null}}},computed:{base_messageClass:function(){var e=this.container.messageClass;return{module:e.info.module,messageClassName:e.info.name}}},methods:{base_prepareSelectOptions:function(){var e={where:{}};return e.layout=this.layout.current,e.orders=[["a.createdAt","desc"]],this.container.options&&(e=this.$utils.extend({},e,this.container.options)),e},base_prepareSelectParams:function(){var e=this.base_prepareSelectOptions();return{messageClass:this.base_messageClass,options:e}}}},{data:function(){return{}},methods:{page_ptr:function(){return!0},page_infinite:function(){return!0},page_onGetTitle:function(){return"".concat(this.$text("Messages"),": ").concat(this.container.messageClass.info.titleLocale)},page_onGetTitleSub:function(){return""}}},o,i,u,d,v,b],data:function(){return{}},created:function(){this.index_init()},methods:{index_init:function(){var e,t=this;return(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.base_init();case 2:return e.next=4,t.layout_prepareConfigLayout();case 4:t.base.ready=!0;case 5:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function s(e){y(o,r,a,s,i,"next",e)}function i(e){y(o,r,a,s,i,"throw",e)}s(void 0)}))})()}}}],data:function(){var e=this.$f7route.query;return{container:{messageClass:JSON.parse(e.messageClass)}}},render:function(){return this.layout_renderPage()}}},450:(e,t,n)=>{var r=n(233),a=n(361)(r);a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),e.exports=a},361:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var a={};if(r)for(var o=0;o<this.length;o++){var s=this[o][0];null!=s&&(a[s]=!0)}for(var i=0;i<e.length;i++){var c=[].concat(e[i]);r&&a[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),t.push(c))}},t}},233:e=>{"use strict";function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}e.exports=function(e){var n,r,a=(r=4,function(e){if(Array.isArray(e))return e}(n=e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var r,a,o=[],s=!0,i=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);s=!0);}catch(e){i=!0,a=e}finally{try{s||null==n.return||n.return()}finally{if(i)throw a}}return o}}(n,r)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=a[1],s=a[3];if(!s)return o;if("function"==typeof btoa){var i=btoa(unescape(encodeURIComponent(JSON.stringify(s)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(i),u="/*# ".concat(c," */"),l=s.sources.map((function(e){return"/*# sourceURL=".concat(s.sourceRoot||"").concat(e," */")}));return[o].concat(l).concat([u]).join("\n")}return[o].join("\n")}},65:(e,t,n)=>{var r=n(450);r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[e.id,r,""]]),r.locals&&(e.exports=r.locals),(0,n(159).Z)("82992ce6",r,!0,{})},159:(e,t,n)=>{"use strict";function r(e,t){for(var n=[],r={},a=0;a<t.length;a++){var o=t[a],s=o[0],i={id:e+":"+a,css:o[1],media:o[2],sourceMap:o[3]};r[s]?r[s].parts.push(i):n.push(r[s]={id:s,parts:[i]})}return n}n.d(t,{Z:()=>d});var a="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!a)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var o={},s=a&&(document.head||document.getElementsByTagName("head")[0]),i=null,c=0,u=!1,l=function(){},f=null,m="data-vue-ssr-id",p="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function d(e,t,n,a){u=n,f=a||{};var s=r(e,t);return h(s),function(t){for(var n=[],a=0;a<s.length;a++){var i=s[a];(c=o[i.id]).refs--,n.push(c)}for(t?h(s=r(e,t)):s=[],a=0;a<n.length;a++){var c;if(0===(c=n[a]).refs){for(var u=0;u<c.parts.length;u++)c.parts[u]();delete o[c.id]}}}}function h(e){for(var t=0;t<e.length;t++){var n=e[t],r=o[n.id];if(r){r.refs++;for(var a=0;a<r.parts.length;a++)r.parts[a](n.parts[a]);for(;a<n.parts.length;a++)r.parts.push(g(n.parts[a]));r.parts.length>n.parts.length&&(r.parts.length=n.parts.length)}else{var s=[];for(a=0;a<n.parts.length;a++)s.push(g(n.parts[a]));o[n.id]={id:n.id,refs:1,parts:s}}}}function v(){var e=document.createElement("style");return e.type="text/css",s.appendChild(e),e}function g(e){var t,n,r=document.querySelector("style["+m+'~="'+e.id+'"]');if(r){if(u)return l;r.parentNode.removeChild(r)}if(p){var a=c++;r=i||(i=v()),t=_.bind(null,r,a,!1),n=_.bind(null,r,a,!0)}else r=v(),t=x.bind(null,r),n=function(){r.parentNode.removeChild(r)};return t(e),function(r){if(r){if(r.css===e.css&&r.media===e.media&&r.sourceMap===e.sourceMap)return;t(e=r)}else n()}}var b,y=(b=[],function(e,t){return b[e]=t,b.filter(Boolean).join("\n")});function _(e,t,n,r){var a=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=y(t,a);else{var o=document.createTextNode(a),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(o,s[t]):e.appendChild(o)}}function x(e,t){var n=t.css,r=t.media,a=t.sourceMap;if(r&&e.setAttribute("media",r),f.ssrId&&e.setAttribute(m,t.id),a&&(n+="\n/*# sourceURL="+a.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}},990:(e,t,n)=>{var r={"./message/autojump.jsx":372,"./message/group.jsx":213,"./message/list.jsx":335};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id=990},142:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=142,e.exports=t},3:e=>{"use strict";e.exports=window.Vue}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={id:r,exports:{}};return e[r](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};(()=>{"use strict";var e;n.r(r),n.d(r,{default:()=>t}),n(65);const t={install:function(t,r){return e?console.error("already installed."):(e=t,r({routes:n(644).Z,store:n(81).Z(e),config:n(788).Z,locales:n(137).Z,components:n(286).Z}))}}})(),window["a-message"]=r})();
//# sourceMappingURL=front.js.map