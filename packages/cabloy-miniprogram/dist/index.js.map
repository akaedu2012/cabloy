{"version":3,"sources":["webpack://cabloy/webpack/universalModuleDefinition","webpack://cabloy/webpack/bootstrap","webpack://cabloy/./src/main.js","webpack://cabloy/./src/util.js","webpack://cabloy/./src/api.js","webpack://cabloy/./src/data.js","webpack://cabloy/./src/config.js"],"names":["Util","require","Api","Data","Config","module","exports","app","options","_util","_api","_data","_config","cabloy","util","api","data","config","value","extend","preferredLocale","locale","toLowerCase","replace","locales","localeShort","split","Object","keys","find","item","indexOf","login","dingtalk","__login_dingtalk","wechat","__login_wechat","wxwork","__login_wxwork","Promise","resolve","reject","scene","base","detail","__login","code","then","wx","success","res","getSetting","authSetting","getUserInfo","qy","dd","getAuthCode","authCode","url","container","post","user","instance","isObject","o","constructor","deep","to","from","args","splice","i","length","nextSource","undefined","keysArray","nextIndex","len","nextKey","desc","getOwnPropertyDescriptor","enumerable","request","baseURL","headers","Authorization","jwt","header","_statusCode","statusCode","status","error","Error","message","fail","err","httpRequest","get","method","_instance","_user","_jwt","_locale","_wxSystemInfo","getSystemInfoSync","_ddSysmtemInfo","_container","environment","systemInfo","loggedIn","agent","anonymous","language","configDefault"],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"cabloy\"] = factory();\n\telse\n\t\troot[\"cabloy\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","const Util = require('./util.js');\nconst Api = require('./api.js');\nconst Data = require('./data.js');\nconst Config = require('./config.js');\n\nmodule.exports = function(app, options) {\n  let _util;\n  let _api;\n  let _data;\n  let _config;\n\n  const cabloy = {\n    get app() {\n      return app;\n    },\n    get util() {\n      if (!_util) {\n        _util = Util(this);\n      }\n      return _util;\n    },\n    get api() {\n      if (!_api) {\n        _api = Api(this);\n      }\n      return _api;\n    },\n    get data() {\n      if (!_data) {\n        _data = Data(this);\n      }\n      return _data;\n    },\n    get config() {\n      if (!_config) {\n        _config = Config(this, options);\n      }\n      return _config;\n    },\n    set config(value) {\n      if (!_config) {\n        _config = Config(this, options);\n      }\n      _config = this.util.extend({}, _config, value);\n    },\n  };\n\n  return cabloy;\n};\n","module.exports = function(cabloy) {\n  return {\n    preferredLocale(locale) {\n      locale = locale.toLowerCase().replace(/_/g, '-');\n      const locales = cabloy.config.locales;\n      // match exactly\n      if (locales[locale]) return locale;\n      // match fuzzy\n      const localeShort = locale.split('-')[0];\n      return Object.keys(locales).find(item => item.indexOf(localeShort) === 0);\n    },\n\n    login(options) {\n      if (cabloy.data.dingtalk) {\n        return this.__login_dingtalk(options);\n      } else if (cabloy.data.wechat) {\n        return this.__login_wechat(options);\n      } else if (cabloy.data.wxwork) {\n        return this.__login_wxwork(options);\n      }\n    },\n\n    __login_wechat(options) {\n      return new Promise((resolve, reject) => {\n        const scene = cabloy.config.base.scene;\n        if (options && options.detail) {\n          // 直接进行后台登录\n          this.__login({ scene, code: null, detail: options.detail }).then(resolve).catch(reject);\n        } else {\n          // 小程序登录\n          wx.login({\n            success: res => {\n              const code = res.code;\n              // 获取用户信息\n              wx.getSetting({\n                success: res => {\n                  if (res.authSetting['scope.userInfo']) {\n                    // 已经授权，可以直接调用 getUserInfo 获取头像昵称，不会弹框\n                    wx.getUserInfo({\n                      success: detail => {\n                        // 后台登录\n                        this.__login({ scene, code, detail }).then(resolve).catch(reject);\n                      },\n                    });\n                  } else {\n                    // 虽然没有userInfo，但有openid，仍然可以进行后台登录\n                    this.__login({ scene, code, detail: null }).then(resolve).catch(reject);\n                  }\n                },\n              });\n            },\n          });\n        }\n      });\n    },\n\n    __login_wxwork(options) {\n      return new Promise((resolve, reject) => {\n        // 小程序登录\n        wx.qy.login({\n          success: res => {\n            const scene = cabloy.config.base.scene;\n            const code = res.code;\n            this.__login({ scene, code }).then(resolve).catch(reject);\n          },\n        });\n      });\n    },\n\n    __login_dingtalk(options) {\n      return new Promise((resolve, reject) => {\n        // 小程序登录\n        dd.getAuthCode({\n          success: res => {\n            const scene = cabloy.config.base.scene;\n            const code = res.authCode;\n            this.__login({ scene, code }).then(resolve).catch(reject);\n          },\n        });\n      });\n    },\n\n    __login({ scene, code, detail }) {\n      // 后台登录\n      const url = `/a/${cabloy.data.container}/authMini/login?locale=${cabloy.data.locale}`;\n      return cabloy.api.post(url, { scene, code, detail }).then(data => {\n        // user\n        cabloy.data.user = data.user;\n        // instance\n        cabloy.data.instance = data.instance;\n        // config\n        cabloy.config = data.config;\n        // ok\n        return data.user;\n      });\n    },\n\n    isObject(o) {\n      return typeof o === 'object' && o !== null && o.constructor && o.constructor === Object;\n    },\n\n    extend(...args) {\n      let deep = true;\n      let to;\n      let from;\n      if (typeof args[0] === 'boolean') {\n        deep = args[0];\n        to = args[1];\n        args.splice(0, 2);\n        from = args;\n      } else {\n        to = args[0];\n        args.splice(0, 1);\n        from = args;\n      }\n      for (let i = 0; i < from.length; i += 1) {\n        const nextSource = args[i];\n        if (nextSource !== undefined && nextSource !== null) {\n          const keysArray = Object.keys(Object(nextSource));\n          for (let nextIndex = 0, len = keysArray.length; nextIndex < len; nextIndex += 1) {\n            const nextKey = keysArray[nextIndex];\n            const desc = Object.getOwnPropertyDescriptor(nextSource, nextKey);\n            if (desc !== undefined && desc.enumerable) {\n              if (!deep) {\n                to[nextKey] = nextSource[nextKey];\n              } else if (this.isObject(to[nextKey]) && this.isObject(nextSource[nextKey])) {\n                this.extend(to[nextKey], nextSource[nextKey]);\n              } else if (!this.isObject(to[nextKey]) && this.isObject(nextSource[nextKey])) {\n                to[nextKey] = {};\n                this.extend(to[nextKey], nextSource[nextKey]);\n              } else {\n                to[nextKey] = nextSource[nextKey];\n              }\n            }\n          }\n        }\n      }\n      return to;\n    },\n  };\n};\n","module.exports = function(cabloy) {\n  return {\n    request(options) {\n      // url\n      if (options.url.indexOf('/') === 0) {\n        options.url = `${cabloy.config.api.baseURL}/api${options.url}`;\n      }\n      // jwt\n      if (cabloy.data.dingtalk) {\n        if (!options.headers) options.headers = {};\n        options.headers.Authorization = `Bearer ${cabloy.data.jwt || ''}`;\n      } else {\n        if (!options.header) options.header = {};\n        options.header.Authorization = `Bearer ${cabloy.data.jwt || ''}`;\n      }\n      // promise\n      return new Promise((resolve, reject) => {\n        // callback\n        options.success = res => {\n          // statusCode\n          const _statusCode = res.statusCode || res.status;\n          if (_statusCode !== 200) {\n            const error = new Error();\n            error.code = _statusCode;\n            return reject(error);\n          }\n          if (res.data.code !== 0) {\n            const error = new Error();\n            error.code = res.data.code;\n            error.message = res.data.message;\n            return reject(error);\n          }\n          // check jwt\n          if (res.data['eb-jwt']) {\n            cabloy.data.jwt = res.data['eb-jwt'];\n          }\n          resolve(res.data.data);\n        };\n        options.fail = err => {\n          reject(err);\n        };\n        // request\n        if (cabloy.data.dingtalk) {\n          dd.httpRequest(options);\n        } else {\n          wx.request(options);\n        }\n      });\n    },\n    get(url, options) {\n      options = options || {};\n      options.url = url;\n      options.method = 'GET';\n      return this.request(options);\n    },\n    post(url, data, options) {\n      options = options || {};\n      options.url = url;\n      options.method = 'POST';\n      options.data = data;\n      return this.request(options);\n    },\n  };\n};\n","module.exports = function(cabloy, options) {\n  let _instance = null;\n  let _user = null;\n  let _jwt = null;\n  let _locale = null;\n\n  // systemInfo\n  const _wxSystemInfo = typeof wx !== 'undefined' && wx.getSystemInfoSync();\n  const _ddSysmtemInfo = typeof dd !== 'undefined' && dd.getSystemInfoSync();\n\n  // container\n  let _container;\n  if (typeof dd !== 'undefined') {\n    _container = 'dingtalk';\n  } else if (typeof wx !== 'undefined' && _wxSystemInfo.environment !== 'wxwork') {\n    _container = 'wechat';\n  } else if (typeof wx !== 'undefined' && _wxSystemInfo.environment === 'wxwork') {\n    _container = 'wxwork';\n  }\n\n  return {\n    get systemInfo() {\n      return _wxSystemInfo || _ddSysmtemInfo;\n    },\n    get container() {\n      return _container;\n    },\n    get dingtalk() {\n      return _container === 'dingtalk';\n    },\n    get wechat() {\n      return _container === 'wechat';\n    },\n    get wxwork() {\n      return _container === 'wxwork';\n    },\n    get jwt() {\n      return _jwt;\n    },\n    set jwt(value) {\n      _jwt = value;\n    },\n    get user() {\n      return _user;\n    },\n    set user(value) {\n      _user = value;\n    },\n    get loggedIn() {\n      const user = this.user;\n      return user && user.agent.anonymous === 0;\n    },\n    get instance() {\n      return _instance;\n    },\n    set instance(value) {\n      _instance = value;\n    },\n    get locale() {\n      // systemInfo\n      if (!_locale) {\n        _locale = cabloy.util.preferredLocale(this.systemInfo.language);\n      }\n      // config\n      if (!_locale) {\n        _locale = cabloy.config.base.locale;\n      }\n      // default\n      if (!_locale) {\n        _locale = 'en-us';\n      }\n      return _locale;\n    },\n  };\n};\n","const configDefault = {\n  base: {\n    scene: 'default',\n    locale: 'en-us',\n  },\n  api: {\n    baseURL: '',\n  },\n  locales: {\n    'en-us': 'English',\n    'zh-cn': 'Chinese',\n  },\n};\n\nmodule.exports = function(cabloy, options) {\n  return cabloy.util.extend({}, configDefault, options);\n};\n"],"sourceRoot":""}